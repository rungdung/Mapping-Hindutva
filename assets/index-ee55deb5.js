(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function i(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=i(a);fetch(a.href,s)}})();function pt(){}function fo(n,e){for(const i in e)n[i]=e[i];return n}function ya(n){return n()}function $s(){return Object.create(null)}function Ie(n){n.forEach(ya)}function Nn(n){return typeof n=="function"}function ne(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function Bl(n){return Object.keys(n).length===0}function se(n,...e){if(n==null)return pt;const i=n.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function $(n){let e;return se(n,i=>e=i)(),e}function V(n,e,i){n.$$.on_destroy.push(se(e,i))}function Ze(n,e,i,r){if(n){const a=va(n,e,i,r);return n[0](a)}}function va(n,e,i,r){return n[1]&&r?fo(i.ctx.slice(),n[1](r(e))):i.ctx}function Be(n,e,i,r){if(n[2]&&r){const a=n[2](r(i));if(e.dirty===void 0)return a;if(typeof a=="object"){const s=[],l=Math.max(e.dirty.length,a.length);for(let h=0;h<l;h+=1)s[h]=e.dirty[h]|a[h];return s}return e.dirty|a}return e.dirty}function Re(n,e,i,r,a,s){if(a){const l=va(e,i,r,s);n.p(l,a)}}function He(n){if(n.ctx.length>32){const e=[],i=n.ctx.length/32;for(let r=0;r<i;r++)e[r]=-1;return e}return-1}function as(n){const e={};for(const i in n)e[i]=!0;return e}function ft(n,e,i){return n.set(i),e}function Ai(n){return n&&Nn(n.destroy)?n.destroy:pt}function rt(n,e){n.appendChild(e)}function tt(n,e,i){n.insertBefore(e,i||null)}function Q(n){n.parentNode&&n.parentNode.removeChild(n)}function fn(n,e){for(let i=0;i<n.length;i+=1)n[i]&&n[i].d(e)}function dt(n){return document.createElement(n)}function yi(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function vi(n){return document.createTextNode(n)}function Ct(){return vi(" ")}function Pe(){return vi("")}function Et(n,e,i,r){return n.addEventListener(e,i,r),()=>n.removeEventListener(e,i,r)}function ri(n){return function(e){return e.preventDefault(),n.call(this,e)}}function ti(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function hn(n){return function(e){e.target===this&&n.call(this,e)}}function S(n,e,i){i==null?n.removeAttribute(e):n.getAttribute(e)!==i&&n.setAttribute(e,i)}function Rl(n){return Array.from(n.childNodes)}function Vi(n,e){e=""+e,n.data!==e&&(n.data=e)}function no(n,e){n.value=e??""}function J(n,e,i,r){i==null?n.style.removeProperty(e):n.style.setProperty(e,i,r?"important":"")}function tr(n,e,i){for(let r=0;r<n.options.length;r+=1){const a=n.options[r];if(a.__value===e){a.selected=!0;return}}(!i||e!==void 0)&&(n.selectedIndex=-1)}let Jn;function Hl(){if(Jn===void 0){Jn=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Jn=!0}}return Jn}function ba(n,e){getComputedStyle(n).position==="static"&&(n.style.position="relative");const r=dt("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const a=Hl();let s;return a?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=Et(window,"message",l=>{l.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{s=Et(r.contentWindow,"resize",e),e()}),rt(n,r),()=>{(a||s&&r.contentWindow)&&s(),Q(r)}}function Nt(n,e,i){n.classList[i?"add":"remove"](e)}function Gl(n,e,{bubbles:i=!1,cancelable:r=!1}={}){const a=document.createEvent("CustomEvent");return a.initCustomEvent(n,i,r,e),a}function dn(n,e){return new n(e)}let On;function zn(n){On=n}function Ki(){if(!On)throw new Error("Function called outside component initialization");return On}function wa(n){Ki().$$.before_update.push(n)}function bi(n){Ki().$$.on_mount.push(n)}function La(n){Ki().$$.after_update.push(n)}function _o(n){Ki().$$.on_destroy.push(n)}function mo(){const n=Ki();return(e,i,{cancelable:r=!1}={})=>{const a=n.$$.callbacks[e];if(a){const s=Gl(e,i,{cancelable:r});return a.slice().forEach(l=>{l.call(n,s)}),!s.defaultPrevented}return!0}}function $t(n,e){return Ki().$$.context.set(n,e),e}function Gt(n){return Ki().$$.context.get(n)}function be(n,e){const i=n.$$.callbacks[e.type];i&&i.slice().forEach(r=>r.call(this,e))}const un=[],Oi=[];let cn=[];const er=[],Ca=Promise.resolve();let Qo=!1;function Pa(){Qo||(Qo=!0,Ca.then(ka))}function Fl(){return Pa(),Ca}function _n(n){cn.push(n)}const Ho=new Set;let an=0;function ka(){if(an!==0)return;const n=On;do{try{for(;an<un.length;){const e=un[an];an++,zn(e),Wl(e.$$)}}catch(e){throw un.length=0,an=0,e}for(zn(null),un.length=0,an=0;Oi.length;)Oi.pop()();for(let e=0;e<cn.length;e+=1){const i=cn[e];Ho.has(i)||(Ho.add(i),i())}cn.length=0}while(un.length);for(;er.length;)er.pop()();Qo=!1,Ho.clear(),zn(n)}function Wl(n){if(n.fragment!==null){n.update(),Ie(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(_n)}}function Ul(n){const e=[],i=[];cn.forEach(r=>n.indexOf(r)===-1?e.push(r):i.push(r)),i.forEach(r=>r()),cn=e}const to=new Set;let Ui;function re(){Ui={r:0,c:[],p:Ui}}function ae(){Ui.r||Ie(Ui.c),Ui=Ui.p}function B(n,e){n&&n.i&&(to.delete(n),n.i(e))}function W(n,e,i,r){if(n&&n.o){if(to.has(n))return;to.add(n),Ui.c.push(()=>{to.delete(n),r&&(i&&n.d(1),r())}),n.o(e)}else r&&r()}function oo(n,e){W(n,1,1,()=>{e.delete(n.key)})}function so(n,e,i,r,a,s,l,h,c,d,_,p){let v=n.length,g=s.length,b=v;const w={};for(;b--;)w[n[b].key]=b;const k=[],M=new Map,O=new Map,I=[];for(b=g;b--;){const G=p(a,s,b),X=i(G);let Y=l.get(X);Y?r&&I.push(()=>Y.p(G,e)):(Y=d(X,G),Y.c()),M.set(X,k[b]=Y),X in w&&O.set(X,Math.abs(b-w[X]))}const Z=new Set,D=new Set;function H(G){B(G,1),G.m(h,_),l.set(G.key,G),_=G.first,g--}for(;v&&g;){const G=k[g-1],X=n[v-1],Y=G.key,ht=X.key;G===X?(_=G.first,v--,g--):M.has(ht)?!l.has(Y)||Z.has(Y)?H(G):D.has(ht)?v--:O.get(Y)>O.get(ht)?(D.add(Y),H(G)):(Z.add(ht),v--):(c(X,l),v--)}for(;v--;){const G=n[v];M.has(G.key)||c(G,l)}for(;g;)H(k[g-1]);return Ie(I),k}function ls(n,e){const i={},r={},a={$$scope:1};let s=n.length;for(;s--;){const l=n[s],h=e[s];if(h){for(const c in l)c in h||(r[c]=1);for(const c in h)a[c]||(i[c]=h[c],a[c]=1);n[s]=h}else for(const c in l)a[c]=1}for(const l in r)l in i||(i[l]=void 0);return i}function us(n){return typeof n=="object"&&n!==null?n:{}}function Dt(n){n&&n.c()}function Ot(n,e,i,r){const{fragment:a,after_update:s}=n.$$;a&&a.m(e,i),r||_n(()=>{const l=n.$$.on_mount.map(ya).filter(Nn);n.$$.on_destroy?n.$$.on_destroy.push(...l):Ie(l),n.$$.on_mount=[]}),s.forEach(_n)}function It(n,e){const i=n.$$;i.fragment!==null&&(Ul(i.after_update),Ie(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function jl(n,e){n.$$.dirty[0]===-1&&(un.push(n),Pa(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function le(n,e,i,r,a,s,l,h=[-1]){const c=On;zn(n);const d=n.$$={fragment:null,ctx:[],props:s,update:pt,not_equal:a,bound:$s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:$s(),dirty:h,skip_bound:!1,root:e.target||c.$$.root};l&&l(d.root);let _=!1;if(d.ctx=i?i(n,e.props||{},(p,v,...g)=>{const b=g.length?g[0]:v;return d.ctx&&a(d.ctx[p],d.ctx[p]=b)&&(!d.skip_bound&&d.bound[p]&&d.bound[p](b),_&&jl(n,p)),v}):[],d.update(),_=!0,Ie(d.before_update),d.fragment=r?r(d.ctx):!1,e.target){if(e.hydrate){const p=Rl(e.target);d.fragment&&d.fragment.l(p),p.forEach(Q)}else d.fragment&&d.fragment.c();e.intro&&B(n.$$.fragment),Ot(n,e.target,e.anchor,e.customElement),ka()}zn(c)}class ue{$destroy(){It(this,1),this.$destroy=pt}$on(e,i){if(!Nn(i))return pt;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(i),()=>{const a=r.indexOf(i);a!==-1&&r.splice(a,1)}}$set(e){this.$$set&&!Bl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var Ma=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ro={},ql={get exports(){return ro},set exports(n){ro=n}};/* @preserve
 * Leaflet 1.9.3, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(n,e){(function(i,r){r(e)})(Ma,function(i){var r="1.9.3";function a(t){var o,u,f,m;for(u=1,f=arguments.length;u<f;u++){m=arguments[u];for(o in m)t[o]=m[o]}return t}var s=Object.create||function(){function t(){}return function(o){return t.prototype=o,new t}}();function l(t,o){var u=Array.prototype.slice;if(t.bind)return t.bind.apply(t,u.call(arguments,1));var f=u.call(arguments,2);return function(){return t.apply(o,f.length?f.concat(u.call(arguments)):arguments)}}var h=0;function c(t){return"_leaflet_id"in t||(t._leaflet_id=++h),t._leaflet_id}function d(t,o,u){var f,m,y,C;return C=function(){f=!1,m&&(y.apply(u,m),m=!1)},y=function(){f?m=arguments:(t.apply(u,arguments),setTimeout(C,o),f=!0)},y}function _(t,o,u){var f=o[1],m=o[0],y=f-m;return t===f&&u?t:((t-m)%y+y)%y+m}function p(){return!1}function v(t,o){if(o===!1)return t;var u=Math.pow(10,o===void 0?6:o);return Math.round(t*u)/u}function g(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function b(t){return g(t).split(/\s+/)}function w(t,o){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?s(t.options):{});for(var u in o)t.options[u]=o[u];return t.options}function k(t,o,u){var f=[];for(var m in t)f.push(encodeURIComponent(u?m.toUpperCase():m)+"="+encodeURIComponent(t[m]));return(!o||o.indexOf("?")===-1?"?":"&")+f.join("&")}var M=/\{ *([\w_ -]+) *\}/g;function O(t,o){return t.replace(M,function(u,f){var m=o[f];if(m===void 0)throw new Error("No value provided for variable "+u);return typeof m=="function"&&(m=m(o)),m})}var I=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function Z(t,o){for(var u=0;u<t.length;u++)if(t[u]===o)return u;return-1}var D="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function H(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var G=0;function X(t){var o=+new Date,u=Math.max(0,16-(o-G));return G=o+u,window.setTimeout(t,u)}var Y=window.requestAnimationFrame||H("RequestAnimationFrame")||X,ht=window.cancelAnimationFrame||H("CancelAnimationFrame")||H("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function nt(t,o,u){if(u&&Y===X)t.call(o);else return Y.call(window,l(t,o))}function A(t){t&&ht.call(window,t)}var ot={__proto__:null,extend:a,create:s,bind:l,get lastId(){return h},stamp:c,throttle:d,wrapNum:_,falseFn:p,formatNum:v,trim:g,splitWords:b,setOptions:w,getParamString:k,template:O,isArray:I,indexOf:Z,emptyImageUrl:D,requestFn:Y,cancelFn:ht,requestAnimFrame:nt,cancelAnimFrame:A};function E(){}E.extend=function(t){var o=function(){w(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=o.__super__=this.prototype,f=s(u);f.constructor=o,o.prototype=f;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(o[m]=this[m]);return t.statics&&a(o,t.statics),t.includes&&(at(t.includes),a.apply(null,[f].concat(t.includes))),a(f,t),delete f.statics,delete f.includes,f.options&&(f.options=u.options?s(u.options):{},a(f.options,t.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,C=f._initHooks.length;y<C;y++)f._initHooks[y].call(this)}},o},E.include=function(t){var o=this.prototype.options;return a(this.prototype,t),t.options&&(this.prototype.options=o,this.mergeOptions(t.options)),this},E.mergeOptions=function(t){return a(this.prototype.options,t),this},E.addInitHook=function(t){var o=Array.prototype.slice.call(arguments,1),u=typeof t=="function"?t:function(){this[t].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function at(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=I(t)?t:[t];for(var o=0;o<t.length;o++)t[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var F={on:function(t,o,u){if(typeof t=="object")for(var f in t)this._on(f,t[f],o);else{t=b(t);for(var m=0,y=t.length;m<y;m++)this._on(t[m],o,u)}return this},off:function(t,o,u){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var f in t)this._off(f,t[f],o);else{t=b(t);for(var m=arguments.length===1,y=0,C=t.length;y<C;y++)m?this._off(t[y]):this._off(t[y],o,u)}return this},_on:function(t,o,u,f){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(t,o,u)===!1){u===this&&(u=void 0);var m={fn:o,ctx:u};f&&(m.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(m)}},_off:function(t,o,u){var f,m,y;if(this._events&&(f=this._events[t],!!f)){if(arguments.length===1){if(this._firingCount)for(m=0,y=f.length;m<y;m++)f[m].fn=p;delete this._events[t];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var C=this._listens(t,o,u);if(C!==!1){var x=f[C];this._firingCount&&(x.fn=p,this._events[t]=f=f.slice()),f.splice(C,1)}}},fire:function(t,o,u){if(!this.listens(t,u))return this;var f=a({},o,{type:t,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var m=this._events[t];if(m){this._firingCount=this._firingCount+1||1;for(var y=0,C=m.length;y<C;y++){var x=m[y],z=x.fn;x.once&&this.off(t,z,x.ctx),z.call(x.ctx||this,f)}this._firingCount--}}return u&&this._propagateEvent(f),this},listens:function(t,o,u,f){typeof t!="string"&&console.warn('"string" type argument expected');var m=o;typeof o!="function"&&(f=!!o,m=void 0,u=void 0);var y=this._events&&this._events[t];if(y&&y.length&&this._listens(t,m,u)!==!1)return!0;if(f){for(var C in this._eventParents)if(this._eventParents[C].listens(t,o,u,f))return!0}return!1},_listens:function(t,o,u){if(!this._events)return!1;var f=this._events[t]||[];if(!o)return!!f.length;u===this&&(u=void 0);for(var m=0,y=f.length;m<y;m++)if(f[m].fn===o&&f[m].ctx===u)return m;return!1},once:function(t,o,u){if(typeof t=="object")for(var f in t)this._on(f,t[f],o,!0);else{t=b(t);for(var m=0,y=t.length;m<y;m++)this._on(t[m],o,u,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[c(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[c(t)],this},_propagateEvent:function(t){for(var o in this._eventParents)this._eventParents[o].fire(t.type,a({layer:t.target,propagatedFrom:t.target},t),!0)}};F.addEventListener=F.on,F.removeEventListener=F.clearAllEventListeners=F.off,F.addOneTimeEventListener=F.once,F.fireEvent=F.fire,F.hasEventListeners=F.listens;var Zt=E.extend(F);function lt(t,o,u){this.x=u?Math.round(t):t,this.y=u?Math.round(o):o}var K=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};lt.prototype={clone:function(){return new lt(this.x,this.y)},add:function(t){return this.clone()._add(et(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(et(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new lt(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new lt(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=K(this.x),this.y=K(this.y),this},distanceTo:function(t){t=et(t);var o=t.x-this.x,u=t.y-this.y;return Math.sqrt(o*o+u*u)},equals:function(t){return t=et(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=et(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function et(t,o,u){return t instanceof lt?t:I(t)?new lt(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new lt(t.x,t.y):new lt(t,o,u)}function bt(t,o){if(t)for(var u=o?[t,o]:t,f=0,m=u.length;f<m;f++)this.extend(u[f])}bt.prototype={extend:function(t){var o,u;if(!t)return this;if(t instanceof lt||typeof t[0]=="number"||"x"in t)o=u=et(t);else if(t=Mt(t),o=t.min,u=t.max,!o||!u)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=u.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(t){return et((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return et(this.min.x,this.max.y)},getTopRight:function(){return et(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var o,u;return typeof t[0]=="number"||t instanceof lt?t=et(t):t=Mt(t),t instanceof bt?(o=t.min,u=t.max):o=u=t,o.x>=this.min.x&&u.x<=this.max.x&&o.y>=this.min.y&&u.y<=this.max.y},intersects:function(t){t=Mt(t);var o=this.min,u=this.max,f=t.min,m=t.max,y=m.x>=o.x&&f.x<=u.x,C=m.y>=o.y&&f.y<=u.y;return y&&C},overlaps:function(t){t=Mt(t);var o=this.min,u=this.max,f=t.min,m=t.max,y=m.x>o.x&&f.x<u.x,C=m.y>o.y&&f.y<u.y;return y&&C},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var o=this.min,u=this.max,f=Math.abs(o.x-u.x)*t,m=Math.abs(o.y-u.y)*t;return Mt(et(o.x-f,o.y-m),et(u.x+f,u.y+m))},equals:function(t){return t?(t=Mt(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function Mt(t,o){return!t||t instanceof bt?t:new bt(t,o)}function St(t,o){if(t)for(var u=o?[t,o]:t,f=0,m=u.length;f<m;f++)this.extend(u[f])}St.prototype={extend:function(t){var o=this._southWest,u=this._northEast,f,m;if(t instanceof mt)f=t,m=t;else if(t instanceof St){if(f=t._southWest,m=t._northEast,!f||!m)return this}else return t?this.extend(wt(t)||gt(t)):this;return!o&&!u?(this._southWest=new mt(f.lat,f.lng),this._northEast=new mt(m.lat,m.lng)):(o.lat=Math.min(f.lat,o.lat),o.lng=Math.min(f.lng,o.lng),u.lat=Math.max(m.lat,u.lat),u.lng=Math.max(m.lng,u.lng)),this},pad:function(t){var o=this._southWest,u=this._northEast,f=Math.abs(o.lat-u.lat)*t,m=Math.abs(o.lng-u.lng)*t;return new St(new mt(o.lat-f,o.lng-m),new mt(u.lat+f,u.lng+m))},getCenter:function(){return new mt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new mt(this.getNorth(),this.getWest())},getSouthEast:function(){return new mt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof mt||"lat"in t?t=wt(t):t=gt(t);var o=this._southWest,u=this._northEast,f,m;return t instanceof St?(f=t.getSouthWest(),m=t.getNorthEast()):f=m=t,f.lat>=o.lat&&m.lat<=u.lat&&f.lng>=o.lng&&m.lng<=u.lng},intersects:function(t){t=gt(t);var o=this._southWest,u=this._northEast,f=t.getSouthWest(),m=t.getNorthEast(),y=m.lat>=o.lat&&f.lat<=u.lat,C=m.lng>=o.lng&&f.lng<=u.lng;return y&&C},overlaps:function(t){t=gt(t);var o=this._southWest,u=this._northEast,f=t.getSouthWest(),m=t.getNorthEast(),y=m.lat>o.lat&&f.lat<u.lat,C=m.lng>o.lng&&f.lng<u.lng;return y&&C},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,o){return t?(t=gt(t),this._southWest.equals(t.getSouthWest(),o)&&this._northEast.equals(t.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function gt(t,o){return t instanceof St?t:new St(t,o)}function mt(t,o,u){if(isNaN(t)||isNaN(o))throw new Error("Invalid LatLng object: ("+t+", "+o+")");this.lat=+t,this.lng=+o,u!==void 0&&(this.alt=+u)}mt.prototype={equals:function(t,o){if(!t)return!1;t=wt(t);var u=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return u<=(o===void 0?1e-9:o)},toString:function(t){return"LatLng("+v(this.lat,t)+", "+v(this.lng,t)+")"},distanceTo:function(t){return jt.distance(this,wt(t))},wrap:function(){return jt.wrapLatLng(this)},toBounds:function(t){var o=180*t/40075017,u=o/Math.cos(Math.PI/180*this.lat);return gt([this.lat-o,this.lng-u],[this.lat+o,this.lng+u])},clone:function(){return new mt(this.lat,this.lng,this.alt)}};function wt(t,o,u){return t instanceof mt?t:I(t)&&typeof t[0]!="object"?t.length===3?new mt(t[0],t[1],t[2]):t.length===2?new mt(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new mt(t.lat,"lng"in t?t.lng:t.lon,t.alt):o===void 0?null:new mt(t,o,u)}var it={latLngToPoint:function(t,o){var u=this.projection.project(t),f=this.scale(o);return this.transformation._transform(u,f)},pointToLatLng:function(t,o){var u=this.scale(o),f=this.transformation.untransform(t,u);return this.projection.unproject(f)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var o=this.projection.bounds,u=this.scale(t),f=this.transformation.transform(o.min,u),m=this.transformation.transform(o.max,u);return new bt(f,m)},infinite:!1,wrapLatLng:function(t){var o=this.wrapLng?_(t.lng,this.wrapLng,!0):t.lng,u=this.wrapLat?_(t.lat,this.wrapLat,!0):t.lat,f=t.alt;return new mt(u,o,f)},wrapLatLngBounds:function(t){var o=t.getCenter(),u=this.wrapLatLng(o),f=o.lat-u.lat,m=o.lng-u.lng;if(f===0&&m===0)return t;var y=t.getSouthWest(),C=t.getNorthEast(),x=new mt(y.lat-f,y.lng-m),z=new mt(C.lat-f,C.lng-m);return new St(x,z)}},jt=a({},it,{wrapLng:[-180,180],R:6371e3,distance:function(t,o){var u=Math.PI/180,f=t.lat*u,m=o.lat*u,y=Math.sin((o.lat-t.lat)*u/2),C=Math.sin((o.lng-t.lng)*u/2),x=y*y+Math.cos(f)*Math.cos(m)*C*C,z=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return this.R*z}}),Pt=6378137,Ft={R:Pt,MAX_LATITUDE:85.0511287798,project:function(t){var o=Math.PI/180,u=this.MAX_LATITUDE,f=Math.max(Math.min(u,t.lat),-u),m=Math.sin(f*o);return new lt(this.R*t.lng*o,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(t){var o=180/Math.PI;return new mt((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*o,t.x*o/this.R)},bounds:function(){var t=Pt*Math.PI;return new bt([-t,-t],[t,t])}()};function ut(t,o,u,f){if(I(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=o,this._c=u,this._d=f}ut.prototype={transform:function(t,o){return this._transform(t.clone(),o)},_transform:function(t,o){return o=o||1,t.x=o*(this._a*t.x+this._b),t.y=o*(this._c*t.y+this._d),t},untransform:function(t,o){return o=o||1,new lt((t.x/o-this._b)/this._a,(t.y/o-this._d)/this._c)}};function vt(t,o,u,f){return new ut(t,o,u,f)}var Bt=a({},jt,{code:"EPSG:3857",projection:Ft,transformation:function(){var t=.5/(Math.PI*Ft.R);return vt(t,.5,-t,.5)}()}),te=a({},Bt,{code:"EPSG:900913"});function Vt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function fe(t,o){var u="",f,m,y,C,x,z;for(f=0,y=t.length;f<y;f++){for(x=t[f],m=0,C=x.length;m<C;m++)z=x[m],u+=(m?"L":"M")+z.x+" "+z.y;u+=o?j.svg?"z":"x":""}return u||"M0 0"}var R=document.documentElement.style,de="ActiveXObject"in window,Le=de&&!document.addEventListener,st="msLaunchUri"in navigator&&!("documentMode"in document),Rt=_t("webkit"),xt=_t("android"),yt=_t("android 2")||_t("android 3"),Lt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ne=xt&&_t("Google")&&Lt<537&&!("AudioNode"in window),_e=!!window.opera,qe=!st&&_t("chrome"),me=_t("gecko")&&!Rt&&!_e&&!de,We=!qe&&_t("safari"),ke=_t("phantom"),Ee="OTransition"in R,Ce=navigator.platform.indexOf("Win")===0,Ge=de&&"transition"in R,we="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!yt,De="MozPerspective"in R,Ve=!window.L_DISABLE_3D&&(Ge||we||De)&&!Ee&&!ke,Ke=typeof orientation<"u"||_t("mobile"),Ue=Ke&&Rt,li=Ke&&we,ei=!window.PointerEvent&&window.MSPointerEvent,ui=!!(window.PointerEvent||ei),ze="ontouchstart"in window||!!window.TouchEvent,Xe=!window.L_NO_TOUCH&&(ze||ui),Kt=Ke&&_e,Xt=Ke&&me,hi=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ii=function(){var t=!1;try{var o=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",p,o),window.removeEventListener("testPassiveEventSupport",p,o)}catch{}return t}(),ni=function(){return!!document.createElement("canvas").getContext}(),Je=!!(document.createElementNS&&Vt("svg").createSVGRect),N=!!Je&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ut=!Je&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var o=t.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),pe=navigator.platform.indexOf("Mac")===0,T=navigator.platform.indexOf("Linux")===0;function _t(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var j={ie:de,ielt9:Le,edge:st,webkit:Rt,android:xt,android23:yt,androidStock:Ne,opera:_e,chrome:qe,gecko:me,safari:We,phantom:ke,opera12:Ee,win:Ce,ie3d:Ge,webkit3d:we,gecko3d:De,any3d:Ve,mobile:Ke,mobileWebkit:Ue,mobileWebkit3d:li,msPointer:ei,pointer:ui,touch:Xe,touchNative:ze,mobileOpera:Kt,mobileGecko:Xt,retina:hi,passiveEvents:ii,canvas:ni,svg:Je,vml:Ut,inlineSvg:N,mac:pe,linux:T},zt=j.msPointer?"MSPointerDown":"pointerdown",ge=j.msPointer?"MSPointerMove":"pointermove",Ae=j.msPointer?"MSPointerUp":"pointerup",Jt=j.msPointer?"MSPointerCancel":"pointercancel",ye={touchstart:zt,touchmove:ge,touchend:Ae,touchcancel:Jt},Yt={touchstart:pn,touchmove:Ii,touchend:Ii,touchcancel:Ii},ee={},Me=!1;function ci(t,o,u){return o==="touchstart"&&Xi(),Yt[o]?(u=Yt[o].bind(this,u),t.addEventListener(ye[o],u,!1),u):(console.warn("wrong event specified:",o),p)}function oi(t,o,u){if(!ye[o]){console.warn("wrong event specified:",o);return}t.removeEventListener(ye[o],u,!1)}function wi(t){ee[t.pointerId]=t}function _i(t){ee[t.pointerId]&&(ee[t.pointerId]=t)}function Ye(t){delete ee[t.pointerId]}function Xi(){Me||(document.addEventListener(zt,wi,!0),document.addEventListener(ge,_i,!0),document.addEventListener(Ae,Ye,!0),document.addEventListener(Jt,Ye,!0),Me=!0)}function Ii(t,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var u in ee)o.touches.push(ee[u]);o.changedTouches=[o],t(o)}}function pn(t,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&Fe(o),Ii(t,o)}function Yi(t){var o={},u,f;for(f in t)u=t[f],o[f]=u&&u.bind?u.bind(t):u;return t=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var Ji=200;function P(t,o){t.addEventListener("dblclick",o);var u=0,f;function m(y){if(y.detail!==1){f=y.detail;return}if(!(y.pointerType==="mouse"||y.sourceCapabilities&&!y.sourceCapabilities.firesTouchEvents)){var C=ms(y);if(!(C.some(function(z){return z instanceof HTMLLabelElement&&z.attributes.for})&&!C.some(function(z){return z instanceof HTMLInputElement||z instanceof HTMLSelectElement}))){var x=Date.now();x-u<=Ji?(f++,f===2&&o(Yi(y))):f=1,u=x}}}return t.addEventListener("click",m),{dblclick:o,simDblclick:m}}function he(t,o){t.removeEventListener("dblclick",o.dblclick),t.removeEventListener("click",o.simDblclick)}var je=Bi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Se=Bi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),si=Se==="webkitTransition"||Se==="OTransition"?Se+"End":"transitionend";function Qe(t){return typeof t=="string"?document.getElementById(t):t}function Qt(t,o){var u=t.style[o]||t.currentStyle&&t.currentStyle[o];if((!u||u==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(t,null);u=f?f[o]:null}return u==="auto"?null:u}function Ht(t,o,u){var f=document.createElement(t);return f.className=o||"",u&&u.appendChild(f),f}function ie(t){var o=t.parentNode;o&&o.removeChild(t)}function Qi(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Mi(t){var o=t.parentNode;o&&o.lastChild!==t&&o.appendChild(t)}function Si(t){var o=t.parentNode;o&&o.firstChild!==t&&o.insertBefore(t,o.firstChild)}function $i(t,o){if(t.classList!==void 0)return t.classList.contains(o);var u=tn(t);return u.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(u)}function Tt(t,o){if(t.classList!==void 0)for(var u=b(o),f=0,m=u.length;f<m;f++)t.classList.add(u[f]);else if(!$i(t,o)){var y=tn(t);gn(t,(y?y+" ":"")+o)}}function ve(t,o){t.classList!==void 0?t.classList.remove(o):gn(t,g((" "+tn(t)+" ").replace(" "+o+" "," ")))}function gn(t,o){t.className.baseVal===void 0?t.className=o:t.className.baseVal=o}function tn(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function $e(t,o){"opacity"in t.style?t.style.opacity=o:"filter"in t.style&&go(t,o)}function go(t,o){var u=!1,f="DXImageTransform.Microsoft.Alpha";try{u=t.filters.item(f)}catch{if(o===1)return}o=Math.round(o*100),u?(u.Enabled=o!==100,u.Opacity=o):t.style.filter+=" progid:"+f+"(opacity="+o+")"}function Bi(t){for(var o=document.documentElement.style,u=0;u<t.length;u++)if(t[u]in o)return t[u];return!1}function mi(t,o,u){var f=o||new lt(0,0);t.style[je]=(j.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(u?" scale("+u+")":"")}function xe(t,o){t._leaflet_pos=o,j.any3d?mi(t,o):(t.style.left=o.x+"px",t.style.top=o.y+"px")}function Ri(t){return t._leaflet_pos||new lt(0,0)}var yn,vn,yo;if("onselectstart"in document)yn=function(){At(window,"selectstart",Fe)},vn=function(){oe(window,"selectstart",Fe)};else{var bn=Bi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);yn=function(){if(bn){var t=document.documentElement.style;yo=t[bn],t[bn]="none"}},vn=function(){bn&&(document.documentElement.style[bn]=yo,yo=void 0)}}function vo(){At(window,"dragstart",Fe)}function bo(){oe(window,"dragstart",Fe)}var Dn,wo;function Lo(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Zn(),Dn=t,wo=t.style.outline,t.style.outline="none",At(window,"keydown",Zn))}function Zn(){Dn&&(Dn.style.outline=wo,Dn=void 0,wo=void 0,oe(window,"keydown",Zn))}function ds(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Co(t){var o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}var Ua={__proto__:null,TRANSFORM:je,TRANSITION:Se,TRANSITION_END:si,get:Qe,getStyle:Qt,create:Ht,remove:ie,empty:Qi,toFront:Mi,toBack:Si,hasClass:$i,addClass:Tt,removeClass:ve,setClass:gn,getClass:tn,setOpacity:$e,testProp:Bi,setTransform:mi,setPosition:xe,getPosition:Ri,get disableTextSelection(){return yn},get enableTextSelection(){return vn},disableImageDrag:vo,enableImageDrag:bo,preventOutline:Lo,restoreOutline:Zn,getSizedParentNode:ds,getScale:Co};function At(t,o,u,f){if(o&&typeof o=="object")for(var m in o)ko(t,m,o[m],u);else{o=b(o);for(var y=0,C=o.length;y<C;y++)ko(t,o[y],u,f)}return this}var Li="_leaflet_events";function oe(t,o,u,f){if(arguments.length===1)_s(t),delete t[Li];else if(o&&typeof o=="object")for(var m in o)Mo(t,m,o[m],u);else if(o=b(o),arguments.length===2)_s(t,function(x){return Z(o,x)!==-1});else for(var y=0,C=o.length;y<C;y++)Mo(t,o[y],u,f);return this}function _s(t,o){for(var u in t[Li]){var f=u.split(/\d/)[0];(!o||o(f))&&Mo(t,f,null,null,u)}}var Po={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ko(t,o,u,f){var m=o+c(u)+(f?"_"+c(f):"");if(t[Li]&&t[Li][m])return this;var y=function(x){return u.call(f||t,x||window.event)},C=y;!j.touchNative&&j.pointer&&o.indexOf("touch")===0?y=ci(t,o,y):j.touch&&o==="dblclick"?y=P(t,y):"addEventListener"in t?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?t.addEventListener(Po[o]||o,y,j.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(y=function(x){x=x||window.event,xo(t,x)&&C(x)},t.addEventListener(Po[o],y,!1)):t.addEventListener(o,C,!1):t.attachEvent("on"+o,y),t[Li]=t[Li]||{},t[Li][m]=y}function Mo(t,o,u,f,m){m=m||o+c(u)+(f?"_"+c(f):"");var y=t[Li]&&t[Li][m];if(!y)return this;!j.touchNative&&j.pointer&&o.indexOf("touch")===0?oi(t,o,y):j.touch&&o==="dblclick"?he(t,y):"removeEventListener"in t?t.removeEventListener(Po[o]||o,y,!1):t.detachEvent("on"+o,y),t[Li][m]=null}function Hi(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function So(t){return ko(t,"wheel",Hi),this}function wn(t){return At(t,"mousedown touchstart dblclick contextmenu",Hi),t._leaflet_disable_click=!0,this}function Fe(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Gi(t){return Fe(t),Hi(t),this}function ms(t){if(t.composedPath)return t.composedPath();for(var o=[],u=t.target;u;)o.push(u),u=u.parentNode;return o}function ps(t,o){if(!o)return new lt(t.clientX,t.clientY);var u=Co(o),f=u.boundingClientRect;return new lt((t.clientX-f.left)/u.x-o.clientLeft,(t.clientY-f.top)/u.y-o.clientTop)}var ja=j.linux&&j.chrome?window.devicePixelRatio:j.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function gs(t){return j.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/ja:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function xo(t,o){var u=o.relatedTarget;if(!u)return!0;try{for(;u&&u!==t;)u=u.parentNode}catch{return!1}return u!==t}var qa={__proto__:null,on:At,off:oe,stopPropagation:Hi,disableScrollPropagation:So,disableClickPropagation:wn,preventDefault:Fe,stop:Gi,getPropagationPath:ms,getMousePosition:ps,getWheelDelta:gs,isExternalTarget:xo,addListener:At,removeListener:oe},ys=Zt.extend({run:function(t,o,u,f){this.stop(),this._el=t,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=Ri(t),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=nt(this._animate,this),this._step()},_step:function(t){var o=+new Date-this._startTime,u=this._duration*1e3;o<u?this._runFrame(this._easeOut(o/u),t):(this._runFrame(1),this._complete())},_runFrame:function(t,o){var u=this._startPos.add(this._offset.multiplyBy(t));o&&u._round(),xe(this._el,u),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),qt=Zt.extend({options:{crs:Bt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,o){o=w(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(wt(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Se&&j.any3d&&!j.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),At(this._proxy,si,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,o,u){if(o=o===void 0?this._zoom:this._limitZoom(o),t=this._limitCenter(wt(t),o,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=a({animate:u.animate},u.zoom),u.pan=a({animate:u.animate,duration:u.duration},u.pan));var f=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,o,u.zoom):this._tryAnimatedPan(t,u.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(t,o,u.pan&&u.pan.noMoveStart),this},setZoom:function(t,o){return this._loaded?this.setView(this.getCenter(),t,{zoom:o}):(this._zoom=t,this)},zoomIn:function(t,o){return t=t||(j.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,o)},zoomOut:function(t,o){return t=t||(j.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,o)},setZoomAround:function(t,o,u){var f=this.getZoomScale(o),m=this.getSize().divideBy(2),y=t instanceof lt?t:this.latLngToContainerPoint(t),C=y.subtract(m).multiplyBy(1-1/f),x=this.containerPointToLatLng(m.add(C));return this.setView(x,o,{zoom:u})},_getBoundsCenterZoom:function(t,o){o=o||{},t=t.getBounds?t.getBounds():gt(t);var u=et(o.paddingTopLeft||o.padding||[0,0]),f=et(o.paddingBottomRight||o.padding||[0,0]),m=this.getBoundsZoom(t,!1,u.add(f));if(m=typeof o.maxZoom=="number"?Math.min(o.maxZoom,m):m,m===1/0)return{center:t.getCenter(),zoom:m};var y=f.subtract(u).divideBy(2),C=this.project(t.getSouthWest(),m),x=this.project(t.getNorthEast(),m),z=this.unproject(C.add(x).divideBy(2).add(y),m);return{center:z,zoom:m}},fitBounds:function(t,o){if(t=gt(t),!t.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(t,o);return this.setView(u.center,u.zoom,o)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,o){return this.setView(t,this._zoom,{pan:o})},panBy:function(t,o){if(t=et(t).round(),o=o||{},!t.x&&!t.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ys,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){Tt(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,u,o.duration||.25,o.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,o,u){if(u=u||{},u.animate===!1||!j.any3d)return this.setView(t,o,u);this._stop();var f=this.project(this.getCenter()),m=this.project(t),y=this.getSize(),C=this._zoom;t=wt(t),o=o===void 0?C:o;var x=Math.max(y.x,y.y),z=x*this.getZoomScale(C,o),U=m.distanceTo(f)||1,ct=1.42,kt=ct*ct;function Wt(Te){var Yn=Te?-1:1,Il=Te?z:x,Nl=z*z-x*x+Yn*kt*kt*U*U,Dl=2*Il*kt*U,Ro=Nl/Dl,Qs=Math.sqrt(Ro*Ro+1)-Ro,Zl=Qs<1e-9?-18:Math.log(Qs);return Zl}function di(Te){return(Math.exp(Te)-Math.exp(-Te))/2}function Wi(Te){return(Math.exp(Te)+Math.exp(-Te))/2}function Xn(Te){return di(Te)/Wi(Te)}var Zi=Wt(0);function Bo(Te){return x*(Wi(Zi)/Wi(Zi+ct*Te))}function El(Te){return x*(Wi(Zi)*Xn(Zi+ct*Te)-di(Zi))/kt}function zl(Te){return 1-Math.pow(1-Te,1.5)}var Al=Date.now(),Ys=(Wt(1)-Zi)/ct,Ol=u.duration?1e3*u.duration:1e3*Ys*.8;function Js(){var Te=(Date.now()-Al)/Ol,Yn=zl(Te)*Ys;Te<=1?(this._flyToFrame=nt(Js,this),this._move(this.unproject(f.add(m.subtract(f).multiplyBy(El(Yn)/U)),C),this.getScaleZoom(x/Bo(Yn),C),{flyTo:!0})):this._move(t,o)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),Js.call(this),this},flyToBounds:function(t,o){var u=this._getBoundsCenterZoom(t,o);return this.flyTo(u.center,u.zoom,o)},setMaxBounds:function(t){return t=gt(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var o=this.options.minZoom;return this.options.minZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var o=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,o){this._enforcingBounds=!0;var u=this.getCenter(),f=this._limitCenter(u,this._zoom,gt(t));return u.equals(f)||this.panTo(f,o),this._enforcingBounds=!1,this},panInside:function(t,o){o=o||{};var u=et(o.paddingTopLeft||o.padding||[0,0]),f=et(o.paddingBottomRight||o.padding||[0,0]),m=this.project(this.getCenter()),y=this.project(t),C=this.getPixelBounds(),x=Mt([C.min.add(u),C.max.subtract(f)]),z=x.getSize();if(!x.contains(y)){this._enforcingBounds=!0;var U=y.subtract(x.getCenter()),ct=x.extend(y).getSize().subtract(z);m.x+=U.x<0?-ct.x:ct.x,m.y+=U.y<0?-ct.y:ct.y,this.panTo(this.unproject(m),o),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=a({animate:!1,pan:!0},t===!0?{animate:!0}:t);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),f=o.divideBy(2).round(),m=u.divideBy(2).round(),y=f.subtract(m);return!y.x&&!y.y?this:(t.animate&&t.pan?this.panBy(y):(t.pan&&this._rawPanBy(y),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=a({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=l(this._handleGeolocationResponse,this),u=l(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,u,t):navigator.geolocation.getCurrentPosition(o,u,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var o=t.code,u=t.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var o=t.coords.latitude,u=t.coords.longitude,f=new mt(o,u),m=f.toBounds(t.coords.accuracy*2),y=this._locateOptions;if(y.setView){var C=this.getBoundsZoom(m);this.setView(f,y.maxZoom?Math.min(C,y.maxZoom):C)}var x={latlng:f,bounds:m,timestamp:t.timestamp};for(var z in t.coords)typeof t.coords[z]=="number"&&(x[z]=t.coords[z]);this.fire("locationfound",x)}},addHandler:function(t,o){if(!o)return this;var u=this[t]=new o(this);return this._handlers.push(u),this.options[t]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ie(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)ie(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,o){var u="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),f=Ht("div",u,o||this._mapPane);return t&&(this._panes[t]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),o=this.unproject(t.getBottomLeft()),u=this.unproject(t.getTopRight());return new St(o,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,o,u){t=gt(t),u=et(u||[0,0]);var f=this.getZoom()||0,m=this.getMinZoom(),y=this.getMaxZoom(),C=t.getNorthWest(),x=t.getSouthEast(),z=this.getSize().subtract(u),U=Mt(this.project(x,f),this.project(C,f)).getSize(),ct=j.any3d?this.options.zoomSnap:1,kt=z.x/U.x,Wt=z.y/U.y,di=o?Math.max(kt,Wt):Math.min(kt,Wt);return f=this.getScaleZoom(di,f),ct&&(f=Math.round(f/(ct/100))*(ct/100),f=o?Math.ceil(f/ct)*ct:Math.floor(f/ct)*ct),Math.max(m,Math.min(y,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new lt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,o){var u=this._getTopLeftPoint(t,o);return new bt(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,o){var u=this.options.crs;return o=o===void 0?this._zoom:o,u.scale(t)/u.scale(o)},getScaleZoom:function(t,o){var u=this.options.crs;o=o===void 0?this._zoom:o;var f=u.zoom(t*u.scale(o));return isNaN(f)?1/0:f},project:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(wt(t),o)},unproject:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(et(t),o)},layerPointToLatLng:function(t){var o=et(t).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(t){var o=this.project(wt(t))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(wt(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(gt(t))},distance:function(t,o){return this.options.crs.distance(wt(t),wt(o))},containerPointToLayerPoint:function(t){return et(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return et(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var o=this.containerPointToLayerPoint(et(t));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(wt(t)))},mouseEventToContainerPoint:function(t){return ps(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var o=this._container=Qe(t);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");At(o,"scroll",this._onScroll,this),this._containerId=c(o)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&j.any3d,Tt(t,"leaflet-container"+(j.touch?" leaflet-touch":"")+(j.retina?" leaflet-retina":"")+(j.ielt9?" leaflet-oldie":"")+(j.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=Qt(t,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),xe(this._mapPane,new lt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Tt(t.markerPane,"leaflet-zoom-hide"),Tt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,o,u){xe(this._mapPane,new lt(0,0));var f=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var m=this._zoom!==o;this._moveStart(m,u)._move(t,o)._moveEnd(m),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(t,o){return t&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(t,o,u,f){o===void 0&&(o=this._zoom);var m=this._zoom!==o;return this._zoom=o,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),f?u&&u.pinch&&this.fire("zoom",u):((m||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){xe(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[c(this._container)]=this;var o=t?oe:At;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),j.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=nt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,o){for(var u=[],f,m=o==="mouseout"||o==="mouseover",y=t.target||t.srcElement,C=!1;y;){if(f=this._targets[c(y)],f&&(o==="click"||o==="preclick")&&this._draggableMoved(f)){C=!0;break}if(f&&f.listens(o,!0)&&(m&&!xo(y,t)||(u.push(f),m))||y===this._container)break;y=y.parentNode}return!u.length&&!C&&!m&&this.listens(o,!0)&&(u=[this]),u},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var o=t.target||t.srcElement;if(!(!this._loaded||o._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(o))){var u=t.type;u==="mousedown"&&Lo(o),this._fireDOMEvent(t,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,o,u){if(t.type==="click"){var f=a({},t);f.type="preclick",this._fireDOMEvent(f,f.type,u)}var m=this._findEventTargets(t,o);if(u){for(var y=[],C=0;C<u.length;C++)u[C].listens(o,!0)&&y.push(u[C]);m=y.concat(m)}if(m.length){o==="contextmenu"&&Fe(t);var x=m[0],z={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var U=x.getLatLng&&(!x._radius||x._radius<=10);z.containerPoint=U?this.latLngToContainerPoint(x.getLatLng()):this.mouseEventToContainerPoint(t),z.layerPoint=this.containerPointToLayerPoint(z.containerPoint),z.latlng=U?x.getLatLng():this.layerPointToLatLng(z.layerPoint)}for(C=0;C<m.length;C++)if(m[C].fire(o,z,!0),z.originalEvent._stopped||m[C].options.bubblingMouseEvents===!1&&Z(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,o=this._handlers.length;t<o;t++)this._handlers[t].disable()},whenReady:function(t,o){return this._loaded?t.call(o||this,{target:this}):this.on("load",t,o),this},_getMapPanePos:function(){return Ri(this._mapPane)||new lt(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,o){var u=t&&o!==void 0?this._getNewPixelOrigin(t,o):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,o){var u=this.getSize()._divideBy(2);return this.project(t,o)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,o,u){var f=this._getNewPixelOrigin(u,o);return this.project(t,o)._subtract(f)},_latLngBoundsToNewLayerBounds:function(t,o,u){var f=this._getNewPixelOrigin(u,o);return Mt([this.project(t.getSouthWest(),o)._subtract(f),this.project(t.getNorthWest(),o)._subtract(f),this.project(t.getSouthEast(),o)._subtract(f),this.project(t.getNorthEast(),o)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,o,u){if(!u)return t;var f=this.project(t,o),m=this.getSize().divideBy(2),y=new bt(f.subtract(m),f.add(m)),C=this._getBoundsOffset(y,u,o);return Math.abs(C.x)<=1&&Math.abs(C.y)<=1?t:this.unproject(f.add(C),o)},_limitOffset:function(t,o){if(!o)return t;var u=this.getPixelBounds(),f=new bt(u.min.add(t),u.max.add(t));return t.add(this._getBoundsOffset(f,o))},_getBoundsOffset:function(t,o,u){var f=Mt(this.project(o.getNorthEast(),u),this.project(o.getSouthWest(),u)),m=f.min.subtract(t.min),y=f.max.subtract(t.max),C=this._rebound(m.x,-y.x),x=this._rebound(m.y,-y.y);return new lt(C,x)},_rebound:function(t,o){return t+o>0?Math.round(t-o)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(o))},_limitZoom:function(t){var o=this.getMinZoom(),u=this.getMaxZoom(),f=j.any3d?this.options.zoomSnap:1;return f&&(t=Math.round(t/f)*f),Math.max(o,Math.min(u,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ve(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,o){var u=this._getCenterOffset(t)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,o),!0)},_createAnimProxy:function(){var t=this._proxy=Ht("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(o){var u=je,f=this._proxy.style[u];mi(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),f===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ie(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),o=this.getZoom();mi(this._proxy,this.project(t,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,o,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(o),m=this._getCenterOffset(t)._divideBy(1-1/f);return u.animate!==!0&&!this.getSize().contains(m)?!1:(nt(function(){this._moveStart(!0,!1)._animateZoom(t,o,!0)},this),!0)},_animateZoom:function(t,o,u,f){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=o,Tt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:o,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ve(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Va(t,o){return new qt(t,o)}var pi=E.extend({options:{position:"topright"},initialize:function(t){w(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var o=this._map;return o&&o.removeControl(this),this.options.position=t,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var o=this._container=this.onAdd(t),u=this.getPosition(),f=t._controlCorners[u];return Tt(o,"leaflet-control"),u.indexOf("bottom")!==-1?f.insertBefore(o,f.firstChild):f.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ie(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ln=function(t){return new pi(t)};qt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},o="leaflet-",u=this._controlContainer=Ht("div",o+"control-container",this._container);function f(m,y){var C=o+m+" "+o+y;t[m+y]=Ht("div",C,u)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ie(this._controlCorners[t]);ie(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var vs=pi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,o,u,f){return u<f?-1:f<u?1:0}},initialize:function(t,o,u){w(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var f in t)this._addLayer(t[f],f);for(f in o)this._addLayer(o[f],f,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return pi.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,o){return this._addLayer(t,o),this._map?this._update():this},addOverlay:function(t,o){return this._addLayer(t,o,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var o=this._getLayer(c(t));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){Tt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Tt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ve(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ve(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",o=this._container=Ht("div",t),u=this.options.collapsed;o.setAttribute("aria-haspopup",!0),wn(o),So(o);var f=this._section=Ht("section",t+"-list");u&&(this._map.on("click",this.collapse,this),At(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=Ht("a",t+"-toggle",o);m.href="#",m.title="Layers",m.setAttribute("role","button"),At(m,{keydown:function(y){y.keyCode===13&&this._expandSafely()},click:function(y){Fe(y),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=Ht("div",t+"-base",f),this._separator=Ht("div",t+"-separator",f),this._overlaysList=Ht("div",t+"-overlays",f),o.appendChild(f)},_getLayer:function(t){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&c(this._layers[o].layer)===t)return this._layers[o]},_addLayer:function(t,o,u){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:o,overlay:u}),this.options.sortLayers&&this._layers.sort(l(function(f,m){return this.options.sortFunction(f.layer,m.layer,f.name,m.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Qi(this._baseLayersList),Qi(this._overlaysList),this._layerControlInputs=[];var t,o,u,f,m=0;for(u=0;u<this._layers.length;u++)f=this._layers[u],this._addItem(f),o=o||f.overlay,t=t||!f.overlay,m+=f.overlay?0:1;return this.options.hideSingleBase&&(t=t&&m>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=o&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var o=this._getLayer(c(t.target)),u=o.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;u&&this._map.fire(u,o)},_createRadioElement:function(t,o){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(o?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=u,f.firstChild},_addItem:function(t){var o=document.createElement("label"),u=this._map.hasLayer(t.layer),f;t.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=u):f=this._createRadioElement("leaflet-base-layers_"+c(this),u),this._layerControlInputs.push(f),f.layerId=c(t.layer),At(f,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+t.name;var y=document.createElement("span");o.appendChild(y),y.appendChild(f),y.appendChild(m);var C=t.overlay?this._overlaysList:this._baseLayersList;return C.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){var t=this._layerControlInputs,o,u,f=[],m=[];this._handlingClick=!0;for(var y=t.length-1;y>=0;y--)o=t[y],u=this._getLayer(o.layerId).layer,o.checked?f.push(u):o.checked||m.push(u);for(y=0;y<m.length;y++)this._map.hasLayer(m[y])&&this._map.removeLayer(m[y]);for(y=0;y<f.length;y++)this._map.hasLayer(f[y])||this._map.addLayer(f[y]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,o,u,f=this._map.getZoom(),m=t.length-1;m>=0;m--)o=t[m],u=this._getLayer(o.layerId).layer,o.disabled=u.options.minZoom!==void 0&&f<u.options.minZoom||u.options.maxZoom!==void 0&&f>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;At(t,"click",Fe),this.expand(),setTimeout(function(){oe(t,"click",Fe)})}}),Ka=function(t,o,u){return new vs(t,o,u)},To=pi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var o="leaflet-control-zoom",u=Ht("div",o+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,o+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,o+"-out",u,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,o,u,f,m){var y=Ht("a",u,f);return y.innerHTML=t,y.href="#",y.title=o,y.setAttribute("role","button"),y.setAttribute("aria-label",o),wn(y),At(y,"click",Gi),At(y,"click",m,this),At(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var t=this._map,o="leaflet-disabled";ve(this._zoomInButton,o),ve(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Tt(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Tt(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});qt.mergeOptions({zoomControl:!0}),qt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new To,this.addControl(this.zoomControl))});var Xa=function(t){return new To(t)},bs=pi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var o="leaflet-control-scale",u=Ht("div",o),f=this.options;return this._addScales(f,o+"-line",u),t.on(f.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),u},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,o,u){t.metric&&(this._mScale=Ht("div",o,u)),t.imperial&&(this._iScale=Ht("div",o,u))},_update:function(){var t=this._map,o=t.getSize().y/2,u=t.distance(t.containerPointToLatLng([0,o]),t.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(u)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var o=this._getRoundNum(t),u=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,u,o/t)},_updateImperial:function(t){var o=t*3.2808399,u,f,m;o>5280?(u=o/5280,f=this._getRoundNum(u),this._updateScale(this._iScale,f+" mi",f/u)):(m=this._getRoundNum(o),this._updateScale(this._iScale,m+" ft",m/o))},_updateScale:function(t,o,u){t.style.width=Math.round(this.options.maxWidth*u)+"px",t.innerHTML=o},_getRoundNum:function(t){var o=Math.pow(10,(Math.floor(t)+"").length-1),u=t/o;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,o*u}}),Ya=function(t){return new bs(t)},Ja='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Eo=pi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(j.inlineSvg?Ja+" ":"")+"Leaflet</a>"},initialize:function(t){w(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Ht("div","leaflet-control-attribution"),wn(this._container);for(var o in t._layers)t._layers[o].getAttribution&&this.addAttribution(t._layers[o].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var o in this._attributions)this._attributions[o]&&t.push(o);var u=[];this.options.prefix&&u.push(this.options.prefix),t.length&&u.push(t.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});qt.mergeOptions({attributionControl:!0}),qt.addInitHook(function(){this.options.attributionControl&&new Eo().addTo(this)});var Qa=function(t){return new Eo(t)};pi.Layers=vs,pi.Zoom=To,pi.Scale=bs,pi.Attribution=Eo,Ln.layers=Ka,Ln.zoom=Xa,Ln.scale=Ya,Ln.attribution=Qa;var Ci=E.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ci.addTo=function(t,o){return t.addHandler(o,this),this};var $a={Events:F},ws=j.touch?"touchstart mousedown":"mousedown",Ni=Zt.extend({options:{clickTolerance:3},initialize:function(t,o,u,f){w(this,f),this._element=t,this._dragStartTarget=o||t,this._preventOutline=u},enable:function(){this._enabled||(At(this._dragStartTarget,ws,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ni._dragging===this&&this.finishDrag(!0),oe(this._dragStartTarget,ws,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!$i(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Ni._dragging===this&&this.finishDrag();return}if(!(Ni._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Ni._dragging=this,this._preventOutline&&Lo(this._element),vo(),yn(),!this._moving)){this.fire("down");var o=t.touches?t.touches[0]:t,u=ds(this._element);this._startPoint=new lt(o.clientX,o.clientY),this._startPos=Ri(this._element),this._parentScale=Co(u);var f=t.type==="mousedown";At(document,f?"mousemove":"touchmove",this._onMove,this),At(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var o=t.touches&&t.touches.length===1?t.touches[0]:t,u=new lt(o.clientX,o.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,Fe(t),this._moved||(this.fire("dragstart"),this._moved=!0,Tt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Tt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),xe(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){ve(document.body,"leaflet-dragging"),this._lastTarget&&(ve(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),oe(document,"mousemove touchmove",this._onMove,this),oe(document,"mouseup touchend touchcancel",this._onUp,this),bo(),vn(),this._moved&&this._moving&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,Ni._dragging=!1}});function Ls(t,o){if(!o||!t.length)return t.slice();var u=o*o;return t=il(t,u),t=el(t,u),t}function Cs(t,o,u){return Math.sqrt(Cn(t,o,u,!0))}function tl(t,o,u){return Cn(t,o,u)}function el(t,o){var u=t.length,f=typeof Uint8Array!=void 0+""?Uint8Array:Array,m=new f(u);m[0]=m[u-1]=1,zo(t,m,o,0,u-1);var y,C=[];for(y=0;y<u;y++)m[y]&&C.push(t[y]);return C}function zo(t,o,u,f,m){var y=0,C,x,z;for(x=f+1;x<=m-1;x++)z=Cn(t[x],t[f],t[m],!0),z>y&&(C=x,y=z);y>u&&(o[C]=1,zo(t,o,u,f,C),zo(t,o,u,C,m))}function il(t,o){for(var u=[t[0]],f=1,m=0,y=t.length;f<y;f++)nl(t[f],t[m])>o&&(u.push(t[f]),m=f);return m<y-1&&u.push(t[y-1]),u}var Ps;function ks(t,o,u,f,m){var y=f?Ps:Fi(t,u),C=Fi(o,u),x,z,U;for(Ps=C;;){if(!(y|C))return[t,o];if(y&C)return!1;x=y||C,z=Bn(t,o,x,u,m),U=Fi(z,u),x===y?(t=z,y=U):(o=z,C=U)}}function Bn(t,o,u,f,m){var y=o.x-t.x,C=o.y-t.y,x=f.min,z=f.max,U,ct;return u&8?(U=t.x+y*(z.y-t.y)/C,ct=z.y):u&4?(U=t.x+y*(x.y-t.y)/C,ct=x.y):u&2?(U=z.x,ct=t.y+C*(z.x-t.x)/y):u&1&&(U=x.x,ct=t.y+C*(x.x-t.x)/y),new lt(U,ct,m)}function Fi(t,o){var u=0;return t.x<o.min.x?u|=1:t.x>o.max.x&&(u|=2),t.y<o.min.y?u|=4:t.y>o.max.y&&(u|=8),u}function nl(t,o){var u=o.x-t.x,f=o.y-t.y;return u*u+f*f}function Cn(t,o,u,f){var m=o.x,y=o.y,C=u.x-m,x=u.y-y,z=C*C+x*x,U;return z>0&&(U=((t.x-m)*C+(t.y-y)*x)/z,U>1?(m=u.x,y=u.y):U>0&&(m+=C*U,y+=x*U)),C=t.x-m,x=t.y-y,f?C*C+x*x:new lt(m,y)}function fi(t){return!I(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Ms(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),fi(t)}function Ss(t,o){var u,f,m,y,C,x,z,U;if(!t||t.length===0)throw new Error("latlngs not passed");fi(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var ct=[];for(var kt in t)ct.push(o.project(wt(t[kt])));var Wt=ct.length;for(u=0,f=0;u<Wt-1;u++)f+=ct[u].distanceTo(ct[u+1])/2;if(f===0)U=ct[0];else for(u=0,y=0;u<Wt-1;u++)if(C=ct[u],x=ct[u+1],m=C.distanceTo(x),y+=m,y>f){z=(y-f)/m,U=[x.x-z*(x.x-C.x),x.y-z*(x.y-C.y)];break}return o.unproject(et(U))}var ol={__proto__:null,simplify:Ls,pointToSegmentDistance:Cs,closestPointOnSegment:tl,clipSegment:ks,_getEdgeIntersection:Bn,_getBitCode:Fi,_sqClosestPointOnSegment:Cn,isFlat:fi,_flat:Ms,polylineCenter:Ss};function xs(t,o,u){var f,m=[1,4,2,8],y,C,x,z,U,ct,kt,Wt;for(y=0,ct=t.length;y<ct;y++)t[y]._code=Fi(t[y],o);for(x=0;x<4;x++){for(kt=m[x],f=[],y=0,ct=t.length,C=ct-1;y<ct;C=y++)z=t[y],U=t[C],z._code&kt?U._code&kt||(Wt=Bn(U,z,kt,o,u),Wt._code=Fi(Wt,o),f.push(Wt)):(U._code&kt&&(Wt=Bn(U,z,kt,o,u),Wt._code=Fi(Wt,o),f.push(Wt)),f.push(z));t=f}return t}function Ts(t,o){var u,f,m,y,C,x,z,U,ct;if(!t||t.length===0)throw new Error("latlngs not passed");fi(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var kt=[];for(var Wt in t)kt.push(o.project(wt(t[Wt])));var di=kt.length;for(x=z=U=0,u=0,f=di-1;u<di;f=u++)m=kt[u],y=kt[f],C=m.y*y.x-y.y*m.x,z+=(m.x+y.x)*C,U+=(m.y+y.y)*C,x+=C*3;return x===0?ct=kt[0]:ct=[z/x,U/x],o.unproject(et(ct))}var sl={__proto__:null,clipPolygon:xs,polygonCenter:Ts},Ao={project:function(t){return new lt(t.lng,t.lat)},unproject:function(t){return new mt(t.y,t.x)},bounds:new bt([-180,-90],[180,90])},Oo={R:6378137,R_MINOR:6356752314245179e-9,bounds:new bt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var o=Math.PI/180,u=this.R,f=t.lat*o,m=this.R_MINOR/u,y=Math.sqrt(1-m*m),C=y*Math.sin(f),x=Math.tan(Math.PI/4-f/2)/Math.pow((1-C)/(1+C),y/2);return f=-u*Math.log(Math.max(x,1e-10)),new lt(t.lng*o*u,f)},unproject:function(t){for(var o=180/Math.PI,u=this.R,f=this.R_MINOR/u,m=Math.sqrt(1-f*f),y=Math.exp(-t.y/u),C=Math.PI/2-2*Math.atan(y),x=0,z=.1,U;x<15&&Math.abs(z)>1e-7;x++)U=m*Math.sin(C),U=Math.pow((1-U)/(1+U),m/2),z=Math.PI/2-2*Math.atan(y*U)-C,C+=z;return new mt(C*o,t.x*o/u)}},rl={__proto__:null,LonLat:Ao,Mercator:Oo,SphericalMercator:Ft},al=a({},jt,{code:"EPSG:3395",projection:Oo,transformation:function(){var t=.5/(Math.PI*Oo.R);return vt(t,.5,-t,.5)}()}),Es=a({},jt,{code:"EPSG:4326",projection:Ao,transformation:vt(1/180,1,-1/180,.5)}),ll=a({},it,{projection:Ao,transformation:vt(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,o){var u=o.lng-t.lng,f=o.lat-t.lat;return Math.sqrt(u*u+f*f)},infinite:!0});it.Earth=jt,it.EPSG3395=al,it.EPSG3857=Bt,it.EPSG900913=te,it.EPSG4326=Es,it.Simple=ll;var gi=Zt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[c(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[c(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var o=t.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var u=this.getEvents();o.on(u,this),this.once("remove",function(){o.off(u,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});qt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var o=c(t);return this._layers[o]?this:(this._layers[o]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var o=c(t);return this._layers[o]?(this._loaded&&t.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return c(t)in this._layers},eachLayer:function(t,o){for(var u in this._layers)t.call(o,this._layers[u]);return this},_addLayers:function(t){t=t?I(t)?t:[t]:[];for(var o=0,u=t.length;o<u;o++)this.addLayer(t[o])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[c(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var o=c(t);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,o=-1/0,u=this._getZoomSpan();for(var f in this._zoomBoundLayers){var m=this._zoomBoundLayers[f].options;t=m.minZoom===void 0?t:Math.min(t,m.minZoom),o=m.maxZoom===void 0?o:Math.max(o,m.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=t===1/0?void 0:t,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var en=gi.extend({initialize:function(t,o){w(this,o),this._layers={};var u,f;if(t)for(u=0,f=t.length;u<f;u++)this.addLayer(t[u])},addLayer:function(t){var o=this.getLayerId(t);return this._layers[o]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var o=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(t){var o=typeof t=="number"?t:this.getLayerId(t);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var o=Array.prototype.slice.call(arguments,1),u,f;for(u in this._layers)f=this._layers[u],f[t]&&f[t].apply(f,o);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,o){for(var u in this._layers)t.call(o,this._layers[u]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return c(t)}}),ul=function(t,o){return new en(t,o)},xi=en.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),en.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),en.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new St;for(var o in this._layers){var u=this._layers[o];t.extend(u.getBounds?u.getBounds():u.getLatLng())}return t}}),hl=function(t,o){return new xi(t,o)},nn=E.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){w(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,o){var u=this._getIconUrl(t);if(!u){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(u,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(f,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(t,o){var u=this.options,f=u[o+"Size"];typeof f=="number"&&(f=[f,f]);var m=et(f),y=et(o==="shadow"&&u.shadowAnchor||u.iconAnchor||m&&m.divideBy(2,!0));t.className="leaflet-marker-"+o+" "+(u.className||""),y&&(t.style.marginLeft=-y.x+"px",t.style.marginTop=-y.y+"px"),m&&(t.style.width=m.x+"px",t.style.height=m.y+"px")},_createImg:function(t,o){return o=o||document.createElement("img"),o.src=t,o},_getIconUrl:function(t){return j.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function cl(t){return new nn(t)}var Pn=nn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Pn.imagePath!="string"&&(Pn.imagePath=this._detectIconPath()),(this.options.imagePath||Pn.imagePath)+nn.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var o=function(u,f,m){var y=f.exec(u);return y&&y[m]};return t=o(t,/^url\((['"])?(.+)\1\)$/,2),t&&o(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Ht("div","leaflet-default-icon-path",document.body),o=Qt(t,"background-image")||Qt(t,"backgroundImage");if(document.body.removeChild(t),o=this._stripUrl(o),o)return o;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),zs=Ci.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Ni(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Tt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ve(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var o=this._marker,u=o._map,f=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,y=Ri(o._icon),C=u.getPixelBounds(),x=u.getPixelOrigin(),z=Mt(C.min._subtract(x).add(m),C.max._subtract(x).subtract(m));if(!z.contains(y)){var U=et((Math.max(z.max.x,y.x)-z.max.x)/(C.max.x-z.max.x)-(Math.min(z.min.x,y.x)-z.min.x)/(C.min.x-z.min.x),(Math.max(z.max.y,y.y)-z.max.y)/(C.max.y-z.max.y)-(Math.min(z.min.y,y.y)-z.min.y)/(C.min.y-z.min.y)).multiplyBy(f);u.panBy(U,{animate:!1}),this._draggable._newPos._add(U),this._draggable._startPos._add(U),xe(o._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=nt(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=nt(this._adjustPan.bind(this,t)))},_onDrag:function(t){var o=this._marker,u=o._shadow,f=Ri(o._icon),m=o._map.layerPointToLatLng(f);u&&xe(u,f),o._latlng=m,t.latlng=m,t.oldLatLng=this._oldLatLng,o.fire("move",t).fire("drag",t)},_onDragEnd:function(t){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Rn=gi.extend({options:{icon:new Pn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,o){w(this,o),this._latlng=wt(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var o=this._latlng;return this._latlng=wt(t),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=t.icon.createIcon(this._icon),f=!1;u!==this._icon&&(this._icon&&this._removeIcon(),f=!0,t.title&&(u.title=t.title),u.tagName==="IMG"&&(u.alt=t.alt||"")),Tt(u,o),t.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&At(u,"focus",this._panOnFocus,this);var m=t.icon.createShadow(this._shadow),y=!1;m!==this._shadow&&(this._removeShadow(),y=!0),m&&(Tt(m,o),m.alt=""),this._shadow=m,t.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&y&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&oe(this._icon,"focus",this._panOnFocus,this),ie(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ie(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&xe(this._icon,t),this._shadow&&xe(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(Tt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),zs)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new zs(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&$e(this._icon,t),this._shadow&&$e(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var o=this.options.icon.options,u=o.iconSize?et(o.iconSize):et(0,0),f=o.iconAnchor?et(o.iconAnchor):et(0,0);t.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:u.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function fl(t,o){return new Rn(t,o)}var Di=gi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return w(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Hn=Di.extend({options:{fill:!0,radius:10},initialize:function(t,o){w(this,o),this._latlng=wt(t),this._radius=this.options.radius},setLatLng:function(t){var o=this._latlng;return this._latlng=wt(t),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var o=t&&t.radius||this._radius;return Di.prototype.setStyle.call(this,t),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,o=this._radiusY||t,u=this._clickTolerance(),f=[t+u,o+u];this._pxBounds=new bt(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function dl(t,o){return new Hn(t,o)}var Io=Hn.extend({initialize:function(t,o,u){if(typeof o=="number"&&(o=a({},u,{radius:o})),w(this,o),this._latlng=wt(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new St(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Di.prototype.setStyle,_project:function(){var t=this._latlng.lng,o=this._latlng.lat,u=this._map,f=u.options.crs;if(f.distance===jt.distance){var m=Math.PI/180,y=this._mRadius/jt.R/m,C=u.project([o+y,t]),x=u.project([o-y,t]),z=C.add(x).divideBy(2),U=u.unproject(z).lat,ct=Math.acos((Math.cos(y*m)-Math.sin(o*m)*Math.sin(U*m))/(Math.cos(o*m)*Math.cos(U*m)))/m;(isNaN(ct)||ct===0)&&(ct=y/Math.cos(Math.PI/180*o)),this._point=z.subtract(u.getPixelOrigin()),this._radius=isNaN(ct)?0:z.x-u.project([U,t-ct]).x,this._radiusY=z.y-C.y}else{var kt=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(kt).x}this._updateBounds()}});function _l(t,o,u){return new Io(t,o,u)}var Ti=Di.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,o){w(this,o),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var o=1/0,u=null,f=Cn,m,y,C=0,x=this._parts.length;C<x;C++)for(var z=this._parts[C],U=1,ct=z.length;U<ct;U++){m=z[U-1],y=z[U];var kt=f(t,m,y,!0);kt<o&&(o=kt,u=f(t,m,y))}return u&&(u.distance=Math.sqrt(o)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ss(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,o){return o=o||this._defaultShape(),t=wt(t),o.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new St,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return fi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var o=[],u=fi(t),f=0,m=t.length;f<m;f++)u?(o[f]=wt(t[f]),this._bounds.extend(o[f])):o[f]=this._convertLatLngs(t[f]);return o},_project:function(){var t=new bt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),o=new lt(t,t);this._rawPxBounds&&(this._pxBounds=new bt([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(t,o,u){var f=t[0]instanceof mt,m=t.length,y,C;if(f){for(C=[],y=0;y<m;y++)C[y]=this._map.latLngToLayerPoint(t[y]),u.extend(C[y]);o.push(C)}else for(y=0;y<m;y++)this._projectLatlngs(t[y],o,u)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,u,f,m,y,C,x,z;for(u=0,m=0,y=this._rings.length;u<y;u++)for(z=this._rings[u],f=0,C=z.length;f<C-1;f++)x=ks(z[f],z[f+1],t,f,!0),x&&(o[m]=o[m]||[],o[m].push(x[0]),(x[1]!==z[f+1]||f===C-2)&&(o[m].push(x[1]),m++))}},_simplifyPoints:function(){for(var t=this._parts,o=this.options.smoothFactor,u=0,f=t.length;u<f;u++)t[u]=Ls(t[u],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,o){var u,f,m,y,C,x,z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(u=0,y=this._parts.length;u<y;u++)for(x=this._parts[u],f=0,C=x.length,m=C-1;f<C;m=f++)if(!(!o&&f===0)&&Cs(t,x[m],x[f])<=z)return!0;return!1}});function ml(t,o){return new Ti(t,o)}Ti._flat=Ms;var on=Ti.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ts(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var o=Ti.prototype._convertLatLngs.call(this,t),u=o.length;return u>=2&&o[0]instanceof mt&&o[0].equals(o[u-1])&&o.pop(),o},_setLatLngs:function(t){Ti.prototype._setLatLngs.call(this,t),fi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return fi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,o=this.options.weight,u=new lt(o,o);if(t=new bt(t.min.subtract(u),t.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,m=this._rings.length,y;f<m;f++)y=xs(this._rings[f],t,!0),y.length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var o=!1,u,f,m,y,C,x,z,U;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(y=0,z=this._parts.length;y<z;y++)for(u=this._parts[y],C=0,U=u.length,x=U-1;C<U;x=C++)f=u[C],m=u[x],f.y>t.y!=m.y>t.y&&t.x<(m.x-f.x)*(t.y-f.y)/(m.y-f.y)+f.x&&(o=!o);return o||Ti.prototype._containsPoint.call(this,t,!0)}});function pl(t,o){return new on(t,o)}var Ei=xi.extend({initialize:function(t,o){w(this,o),this._layers={},t&&this.addData(t)},addData:function(t){var o=I(t)?t:t.features,u,f,m;if(o){for(u=0,f=o.length;u<f;u++)m=o[u],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var y=this.options;if(y.filter&&!y.filter(t))return this;var C=Gn(t,y);return C?(C.feature=Un(t),C.defaultOptions=C.options,this.resetStyle(C),y.onEachFeature&&y.onEachFeature(t,C),this.addLayer(C)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=a({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(o){this._setLayerStyle(o,t)},this)},_setLayerStyle:function(t,o){t.setStyle&&(typeof o=="function"&&(o=o(t.feature)),t.setStyle(o))}});function Gn(t,o){var u=t.type==="Feature"?t.geometry:t,f=u?u.coordinates:null,m=[],y=o&&o.pointToLayer,C=o&&o.coordsToLatLng||No,x,z,U,ct;if(!f&&!u)return null;switch(u.type){case"Point":return x=C(f),As(y,t,x,o);case"MultiPoint":for(U=0,ct=f.length;U<ct;U++)x=C(f[U]),m.push(As(y,t,x,o));return new xi(m);case"LineString":case"MultiLineString":return z=Fn(f,u.type==="LineString"?0:1,C),new Ti(z,o);case"Polygon":case"MultiPolygon":return z=Fn(f,u.type==="Polygon"?1:2,C),new on(z,o);case"GeometryCollection":for(U=0,ct=u.geometries.length;U<ct;U++){var kt=Gn({geometry:u.geometries[U],type:"Feature",properties:t.properties},o);kt&&m.push(kt)}return new xi(m);case"FeatureCollection":for(U=0,ct=u.features.length;U<ct;U++){var Wt=Gn(u.features[U],o);Wt&&m.push(Wt)}return new xi(m);default:throw new Error("Invalid GeoJSON object.")}}function As(t,o,u,f){return t?t(o,u):new Rn(u,f&&f.markersInheritOptions&&f)}function No(t){return new mt(t[1],t[0],t[2])}function Fn(t,o,u){for(var f=[],m=0,y=t.length,C;m<y;m++)C=o?Fn(t[m],o-1,u):(u||No)(t[m]),f.push(C);return f}function Do(t,o){return t=wt(t),t.alt!==void 0?[v(t.lng,o),v(t.lat,o),v(t.alt,o)]:[v(t.lng,o),v(t.lat,o)]}function Wn(t,o,u,f){for(var m=[],y=0,C=t.length;y<C;y++)m.push(o?Wn(t[y],fi(t[y])?0:o-1,u,f):Do(t[y],f));return!o&&u&&m.push(m[0].slice()),m}function sn(t,o){return t.feature?a({},t.feature,{geometry:o}):Un(o)}function Un(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Zo={toGeoJSON:function(t){return sn(this,{type:"Point",coordinates:Do(this.getLatLng(),t)})}};Rn.include(Zo),Io.include(Zo),Hn.include(Zo),Ti.include({toGeoJSON:function(t){var o=!fi(this._latlngs),u=Wn(this._latlngs,o?1:0,!1,t);return sn(this,{type:(o?"Multi":"")+"LineString",coordinates:u})}}),on.include({toGeoJSON:function(t){var o=!fi(this._latlngs),u=o&&!fi(this._latlngs[0]),f=Wn(this._latlngs,u?2:o?1:0,!0,t);return o||(f=[f]),sn(this,{type:(u?"Multi":"")+"Polygon",coordinates:f})}}),en.include({toMultiPoint:function(t){var o=[];return this.eachLayer(function(u){o.push(u.toGeoJSON(t).geometry.coordinates)}),sn(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(t){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(t);var u=o==="GeometryCollection",f=[];return this.eachLayer(function(m){if(m.toGeoJSON){var y=m.toGeoJSON(t);if(u)f.push(y.geometry);else{var C=Un(y);C.type==="FeatureCollection"?f.push.apply(f,C.features):f.push(C)}}}),u?sn(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Os(t,o){return new Ei(t,o)}var gl=Os,jn=gi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,o,u){this._url=t,this._bounds=gt(o),w(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Tt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ie(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Mi(this._image),this},bringToBack:function(){return this._map&&Si(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=gt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",o=this._image=t?this._url:Ht("img");if(Tt(o,"leaflet-image-layer"),this._zoomAnimated&&Tt(o,"leaflet-zoom-animated"),this.options.className&&Tt(o,this.options.className),o.onselectstart=p,o.onmousemove=p,o.onload=l(this.fire,this,"load"),o.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(t){var o=this._map.getZoomScale(t.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;mi(this._image,u,o)},_reset:function(){var t=this._image,o=new bt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=o.getSize();xe(t,o.min),t.style.width=u.x+"px",t.style.height=u.y+"px"},_updateOpacity:function(){$e(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),yl=function(t,o,u){return new jn(t,o,u)},Is=jn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",o=this._image=t?this._url:Ht("video");if(Tt(o,"leaflet-image-layer"),this._zoomAnimated&&Tt(o,"leaflet-zoom-animated"),this.options.className&&Tt(o,this.options.className),o.onselectstart=p,o.onmousemove=p,o.onloadeddata=l(this.fire,this,"load"),t){for(var u=o.getElementsByTagName("source"),f=[],m=0;m<u.length;m++)f.push(u[m].src);this._url=u.length>0?f:[o.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var y=0;y<this._url.length;y++){var C=Ht("source");C.src=this._url[y],o.appendChild(C)}}});function vl(t,o,u){return new Is(t,o,u)}var Ns=jn.extend({_initImage:function(){var t=this._image=this._url;Tt(t,"leaflet-image-layer"),this._zoomAnimated&&Tt(t,"leaflet-zoom-animated"),this.options.className&&Tt(t,this.options.className),t.onselectstart=p,t.onmousemove=p}});function bl(t,o,u){return new Ns(t,o,u)}var Pi=gi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,o){t&&(t instanceof mt||I(t))?(this._latlng=wt(t),w(this,o)):(w(this,t),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&$e(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&$e(this._container,1),this.bringToFront(),this.options.interactive&&(Tt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?($e(this._container,0),this._removeTimeout=setTimeout(l(ie,void 0,this._container),200)):ie(this._container),this.options.interactive&&(ve(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=wt(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Mi(this._container),this},bringToBack:function(){return this._map&&Si(this._container),this},_prepareOpen:function(t){var o=this._source;if(!o._map)return!1;if(o instanceof xi){o=null;var u=this._source._layers;for(var f in u)if(u[f]._map){o=u[f];break}if(!o)return!1;this._source=o}if(!t)if(o.getCenter)t=o.getCenter();else if(o.getLatLng)t=o.getLatLng();else if(o.getBounds)t=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")t.innerHTML=o;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),o=et(this.options.offset),u=this._getAnchor();this._zoomAnimated?xe(this._container,t.add(u)):o=o.add(t).add(u);var f=this._containerBottom=-o.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=f+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});qt.include({_initOverlay:function(t,o,u,f){var m=o;return m instanceof t||(m=new t(f).setContent(o)),u&&m.setLatLng(u),m}}),gi.include({_initOverlay:function(t,o,u,f){var m=u;return m instanceof t?(w(m,f),m._source=this):(m=o&&!f?o:new t(f,this),m.setContent(u)),m}});var qn=Pi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Pi.prototype.openOn.call(this,t)},onAdd:function(t){Pi.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Di||this._source.on("preclick",Hi))},onRemove:function(t){Pi.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Di||this._source.off("preclick",Hi))},getEvents:function(){var t=Pi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",o=this._container=Ht("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=Ht("div",t+"-content-wrapper",o);if(this._contentNode=Ht("div",t+"-content",u),wn(o),So(this._contentNode),At(o,"contextmenu",Hi),this._tipContainer=Ht("div",t+"-tip-container",o),this._tip=Ht("div",t+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Ht("a",t+"-close-button",o);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',At(f,"click",function(m){Fe(m),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,o=t.style;o.width="",o.whiteSpace="nowrap";var u=t.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),o.width=u+1+"px",o.whiteSpace="",o.height="";var f=t.offsetHeight,m=this.options.maxHeight,y="leaflet-popup-scrolled";m&&f>m?(o.height=m+"px",Tt(t,y)):ve(t,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),u=this._getAnchor();xe(this._container,o.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,o=parseInt(Qt(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+o,f=this._containerWidth,m=new lt(this._containerLeft,-u-this._containerBottom);m._add(Ri(this._container));var y=t.layerPointToContainerPoint(m),C=et(this.options.autoPanPadding),x=et(this.options.autoPanPaddingTopLeft||C),z=et(this.options.autoPanPaddingBottomRight||C),U=t.getSize(),ct=0,kt=0;y.x+f+z.x>U.x&&(ct=y.x+f-U.x+z.x),y.x-ct-x.x<0&&(ct=y.x-x.x),y.y+u+z.y>U.y&&(kt=y.y+u-U.y+z.y),y.y-kt-x.y<0&&(kt=y.y-x.y),(ct||kt)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([ct,kt]))}},_getAnchor:function(){return et(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),wl=function(t,o){return new qn(t,o)};qt.mergeOptions({closePopupOnClick:!0}),qt.include({openPopup:function(t,o,u){return this._initOverlay(qn,t,o,u).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),gi.include({bindPopup:function(t,o){return this._popup=this._initOverlay(qn,this._popup,t,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof xi||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Gi(t);var o=t.layer||t.target;if(this._popup._source===o&&!(o instanceof Di)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=o,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Vn=Pi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Pi.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Pi.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Pi.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",o=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ht("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var o,u,f=this._map,m=this._container,y=f.latLngToContainerPoint(f.getCenter()),C=f.layerPointToContainerPoint(t),x=this.options.direction,z=m.offsetWidth,U=m.offsetHeight,ct=et(this.options.offset),kt=this._getAnchor();x==="top"?(o=z/2,u=U):x==="bottom"?(o=z/2,u=0):x==="center"?(o=z/2,u=U/2):x==="right"?(o=0,u=U/2):x==="left"?(o=z,u=U/2):C.x<y.x?(x="right",o=0,u=U/2):(x="left",o=z+(ct.x+kt.x)*2,u=U/2),t=t.subtract(et(o,u,!0)).add(ct).add(kt),ve(m,"leaflet-tooltip-right"),ve(m,"leaflet-tooltip-left"),ve(m,"leaflet-tooltip-top"),ve(m,"leaflet-tooltip-bottom"),Tt(m,"leaflet-tooltip-"+x),xe(m,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&$e(this._container,t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(o)},_getAnchor:function(){return et(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ll=function(t,o){return new Vn(t,o)};qt.include({openTooltip:function(t,o,u){return this._initOverlay(Vn,t,o,u).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),gi.include({bindTooltip:function(t,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Vn,this._tooltip,t,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var o=t?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[o](u),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof xi||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var o=t.getElement();o&&(At(o,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),At(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var o=t.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0))},_moveTooltip:function(t){var o=t.latlng,u,f;this._tooltip.options.sticky&&t.originalEvent&&(u=this._map.mouseEventToContainerPoint(t.originalEvent),f=this._map.containerPointToLayerPoint(u),o=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(o)}});var Ds=nn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var o=t&&t.tagName==="DIV"?t:document.createElement("div"),u=this.options;if(u.html instanceof Element?(Qi(o),o.appendChild(u.html)):o.innerHTML=u.html!==!1?u.html:"",u.bgPos){var f=et(u.bgPos);o.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Cl(t){return new Ds(t)}nn.Default=Pn;var kn=gi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:j.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){w(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ie(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Mi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Si(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof lt?t:new lt(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var o=this.getPane().children,u=-t(-1/0,1/0),f=0,m=o.length,y;f<m;f++)y=o[f].style.zIndex,o[f]!==this._container&&y&&(u=t(u,+y));isFinite(u)&&(this.options.zIndex=u+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!j.ielt9){$e(this._container,this.options.opacity);var t=+new Date,o=!1,u=!1;for(var f in this._tiles){var m=this._tiles[f];if(!(!m.current||!m.loaded)){var y=Math.min(1,(t-m.loaded)/200);$e(m.el,y),y<1?o=!0:(m.active?u=!0:this._onOpaqueTile(m),m.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),o&&(A(this._fadeFrame),this._fadeFrame=nt(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=Ht("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,o=this.options.maxZoom;if(t!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===t?(this._levels[u].el.style.zIndex=o-Math.abs(t-u),this._onUpdateLevel(u)):(ie(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var f=this._levels[t],m=this._map;return f||(f=this._levels[t]={},f.el=Ht("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=o,f.origin=m.project(m.unproject(m.getPixelOrigin()),t).round(),f.zoom=t,this._setZoomTransform(f,m.getCenter(),m.getZoom()),p(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var t,o,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)o=this._tiles[t],o.retain=o.current;for(t in this._tiles)if(o=this._tiles[t],o.current&&!o.active){var f=o.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var o in this._tiles)this._tiles[o].coords.z===t&&this._removeTile(o)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ie(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,o,u,f){var m=Math.floor(t/2),y=Math.floor(o/2),C=u-1,x=new lt(+m,+y);x.z=+C;var z=this._tileCoordsToKey(x),U=this._tiles[z];return U&&U.active?(U.retain=!0,!0):(U&&U.loaded&&(U.retain=!0),C>f?this._retainParent(m,y,C,f):!1)},_retainChildren:function(t,o,u,f){for(var m=2*t;m<2*t+2;m++)for(var y=2*o;y<2*o+2;y++){var C=new lt(m,y);C.z=u+1;var x=this._tileCoordsToKey(C),z=this._tiles[x];if(z&&z.active){z.retain=!0;continue}else z&&z.loaded&&(z.retain=!0);u+1<f&&this._retainChildren(m,y,u+1,f)}},_resetView:function(t){var o=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var o=this.options;return o.minNativeZoom!==void 0&&t<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<t?o.maxNativeZoom:t},_setView:function(t,o,u,f){var m=Math.round(o);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var y=this.options.updateWhenZooming&&m!==this._tileZoom;(!f||y)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(t),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(t,o)},_setZoomTransforms:function(t,o){for(var u in this._levels)this._setZoomTransform(this._levels[u],t,o)},_setZoomTransform:function(t,o,u){var f=this._map.getZoomScale(u,t.zoom),m=t.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(o,u)).round();j.any3d?mi(t.el,m,f):xe(t.el,m)},_resetGrid:function(){var t=this._map,o=t.options.crs,u=this._tileSize=this.getTileSize(),f=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,o.wrapLng[0]],f).x/u.x),Math.ceil(t.project([0,o.wrapLng[1]],f).x/u.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([o.wrapLat[0],0],f).y/u.x),Math.ceil(t.project([o.wrapLat[1],0],f).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var o=this._map,u=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),f=o.getZoomScale(u,this._tileZoom),m=o.project(t,this._tileZoom).floor(),y=o.getSize().divideBy(f*2);return new bt(m.subtract(y),m.add(y))},_update:function(t){var o=this._map;if(o){var u=this._clampZoom(o.getZoom());if(t===void 0&&(t=o.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(t),m=this._pxBoundsToTileRange(f),y=m.getCenter(),C=[],x=this.options.keepBuffer,z=new bt(m.getBottomLeft().subtract([x,-x]),m.getTopRight().add([x,-x]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var U in this._tiles){var ct=this._tiles[U].coords;(ct.z!==this._tileZoom||!z.contains(new lt(ct.x,ct.y)))&&(this._tiles[U].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(t,u);return}for(var kt=m.min.y;kt<=m.max.y;kt++)for(var Wt=m.min.x;Wt<=m.max.x;Wt++){var di=new lt(Wt,kt);if(di.z=this._tileZoom,!!this._isValidTile(di)){var Wi=this._tiles[this._tileCoordsToKey(di)];Wi?Wi.current=!0:C.push(di)}}if(C.sort(function(Zi,Bo){return Zi.distanceTo(y)-Bo.distanceTo(y)}),C.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Xn=document.createDocumentFragment();for(Wt=0;Wt<C.length;Wt++)this._addTile(C[Wt],Xn);this._level.el.appendChild(Xn)}}}},_isValidTile:function(t){var o=this._map.options.crs;if(!o.infinite){var u=this._globalTileRange;if(!o.wrapLng&&(t.x<u.min.x||t.x>u.max.x)||!o.wrapLat&&(t.y<u.min.y||t.y>u.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(t);return gt(this.options.bounds).overlaps(f)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var o=this._map,u=this.getTileSize(),f=t.scaleBy(u),m=f.add(u),y=o.unproject(f,t.z),C=o.unproject(m,t.z);return[y,C]},_tileCoordsToBounds:function(t){var o=this._tileCoordsToNwSe(t),u=new St(o[0],o[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var o=t.split(":"),u=new lt(+o[0],+o[1]);return u.z=+o[2],u},_removeTile:function(t){var o=this._tiles[t];o&&(ie(o.el),delete this._tiles[t],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Tt(t,"leaflet-tile");var o=this.getTileSize();t.style.width=o.x+"px",t.style.height=o.y+"px",t.onselectstart=p,t.onmousemove=p,j.ielt9&&this.options.opacity<1&&$e(t,this.options.opacity)},_addTile:function(t,o){var u=this._getTilePos(t),f=this._tileCoordsToKey(t),m=this.createTile(this._wrapCoords(t),l(this._tileReady,this,t));this._initTile(m),this.createTile.length<2&&nt(l(this._tileReady,this,t,null,m)),xe(m,u),this._tiles[f]={el:m,coords:t,current:!0},o.appendChild(m),this.fire("tileloadstart",{tile:m,coords:t})},_tileReady:function(t,o,u){o&&this.fire("tileerror",{error:o,tile:u,coords:t});var f=this._tileCoordsToKey(t);u=this._tiles[f],u&&(u.loaded=+new Date,this._map._fadeAnimated?($e(u.el,0),A(this._fadeFrame),this._fadeFrame=nt(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),o||(Tt(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),j.ielt9||!this._map._fadeAnimated?nt(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var o=new lt(this._wrapX?_(t.x,this._wrapX):t.x,this._wrapY?_(t.y,this._wrapY):t.y);return o.z=t.z,o},_pxBoundsToTileRange:function(t){var o=this.getTileSize();return new bt(t.min.unscaleBy(o).floor(),t.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Pl(t){return new kn(t)}var rn=kn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,o){this._url=t,o=w(this,o),o.detectRetina&&j.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,o){return this._url===t&&o===void 0&&(o=!0),this._url=t,o||this.redraw(),this},createTile:function(t,o){var u=document.createElement("img");return At(u,"load",l(this._tileOnLoad,this,o,u)),At(u,"error",l(this._tileOnError,this,o,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(t),u},getTileUrl:function(t){var o={r:j.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-t.y;this.options.tms&&(o.y=u),o["-y"]=u}return O(this._url,a(o,this.options))},_tileOnLoad:function(t,o){j.ielt9?setTimeout(l(t,this,null,o),0):t(null,o)},_tileOnError:function(t,o,u){var f=this.options.errorTileUrl;f&&o.getAttribute("src")!==f&&(o.src=f),t(u,o)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,o=this.options.maxZoom,u=this.options.zoomReverse,f=this.options.zoomOffset;return u&&(t=o-t),t+f},_getSubdomain:function(t){var o=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var t,o;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(o=this._tiles[t].el,o.onload=p,o.onerror=p,!o.complete)){o.src=D;var u=this._tiles[t].coords;ie(o),delete this._tiles[t],this.fire("tileabort",{tile:o,coords:u})}},_removeTile:function(t){var o=this._tiles[t];if(o)return o.el.setAttribute("src",D),kn.prototype._removeTile.call(this,t)},_tileReady:function(t,o,u){if(!(!this._map||u&&u.getAttribute("src")===D))return kn.prototype._tileReady.call(this,t,o,u)}});function Zs(t,o){return new rn(t,o)}var Bs=rn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,o){this._url=t;var u=a({},this.defaultWmsParams);for(var f in o)f in this.options||(u[f]=o[f]);o=w(this,o);var m=o.detectRetina&&j.retina?2:1,y=this.getTileSize();u.width=y.x*m,u.height=y.y*m,this.wmsParams=u},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,rn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var o=this._tileCoordsToNwSe(t),u=this._crs,f=Mt(u.project(o[0]),u.project(o[1])),m=f.min,y=f.max,C=(this._wmsVersion>=1.3&&this._crs===Es?[m.y,m.x,y.y,y.x]:[m.x,m.y,y.x,y.y]).join(","),x=rn.prototype.getTileUrl.call(this,t);return x+k(this.wmsParams,x,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+C},setParams:function(t,o){return a(this.wmsParams,t),o||this.redraw(),this}});function kl(t,o){return new Bs(t,o)}rn.WMS=Bs,Zs.wms=kl;var zi=gi.extend({options:{padding:.1},initialize:function(t){w(this,t),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Tt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,o){var u=this._map.getZoomScale(o,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,o),y=f.multiplyBy(-u).add(m).subtract(this._map._getNewPixelOrigin(t,o));j.any3d?mi(this._container,y,u):xe(this._container,y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,o=this._map.getSize(),u=this._map.containerPointToLayerPoint(o.multiplyBy(-t)).round();this._bounds=new bt(u,u.add(o.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Rs=zi.extend({options:{tolerance:0},getEvents:function(){var t=zi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){zi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");At(t,"mousemove",this._onMouseMove,this),At(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),At(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,ie(this._container),oe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var o in this._layers)t=this._layers[o],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zi.prototype._update.call(this);var t=this._bounds,o=this._container,u=t.getSize(),f=j.retina?2:1;xe(o,t.min),o.width=f*u.x,o.height=f*u.y,o.style.width=u.x+"px",o.style.height=u.y+"px",j.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){zi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[c(t)]=t;var o=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var o=t._order,u=o.next,f=o.prev;u?u.prev=f:this._drawLast=f,f?f.next=u:this._drawFirst=u,delete t._order,delete this._layers[c(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var o=t.options.dashArray.split(/[, ]+/),u=[],f,m;for(m=0;m<o.length;m++){if(f=Number(o[m]),isNaN(f))return;u.push(f)}t.options._dashArray=u}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||nt(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var o=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new bt,this._redrawBounds.extend(t._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(t._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var o=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,o=this._redrawBounds;if(this._ctx.save(),o){var u=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)t=f.layer,(!o||t._pxBounds&&t._pxBounds.intersects(o))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,o){if(this._drawing){var u,f,m,y,C=t._parts,x=C.length,z=this._ctx;if(x){for(z.beginPath(),u=0;u<x;u++){for(f=0,m=C[u].length;f<m;f++)y=C[u][f],z[f?"lineTo":"moveTo"](y.x,y.y);o&&z.closePath()}this._fillStroke(z,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var o=t._point,u=this._ctx,f=Math.max(Math.round(t._radius),1),m=(Math.max(Math.round(t._radiusY),1)||f)/f;m!==1&&(u.save(),u.scale(1,m)),u.beginPath(),u.arc(o.x,o.y/m,f,0,Math.PI*2,!1),m!==1&&u.restore(),this._fillStroke(u,t)}},_fillStroke:function(t,o){var u=o.options;u.fill&&(t.globalAlpha=u.fillOpacity,t.fillStyle=u.fillColor||u.color,t.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(t.setLineDash&&t.setLineDash(o.options&&o.options._dashArray||[]),t.globalAlpha=u.opacity,t.lineWidth=u.weight,t.strokeStyle=u.color,t.lineCap=u.lineCap,t.lineJoin=u.lineJoin,t.stroke())},_onClick:function(t){for(var o=this._map.mouseEventToLayerPoint(t),u,f,m=this._drawFirst;m;m=m.next)u=m.layer,u.options.interactive&&u._containsPoint(o)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(u))&&(f=u);this._fireEvent(f?[f]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,o)}},_handleMouseOut:function(t){var o=this._hoveredLayer;o&&(ve(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,o){if(!this._mouseHoverThrottled){for(var u,f,m=this._drawFirst;m;m=m.next)u=m.layer,u.options.interactive&&u._containsPoint(o)&&(f=u);f!==this._hoveredLayer&&(this._handleMouseOut(t),f&&(Tt(this._container,"leaflet-interactive"),this._fireEvent([f],t,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,o,u){this._map._fireDOMEvent(o,u||o.type,t)},_bringToFront:function(t){var o=t._order;if(o){var u=o.next,f=o.prev;if(u)u.prev=f;else return;f?f.next=u:u&&(this._drawFirst=u),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(t)}},_bringToBack:function(t){var o=t._order;if(o){var u=o.next,f=o.prev;if(f)f.next=u;else return;u?u.prev=f:f&&(this._drawLast=f),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(t)}}});function Hs(t){return j.canvas?new Rs(t):null}var Mn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ml={_initContainer:function(){this._container=Ht("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(zi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var o=t._container=Mn("shape");Tt(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",t._path=Mn("path"),o.appendChild(t._path),this._updateStyle(t),this._layers[c(t)]=t},_addPath:function(t){var o=t._container;this._container.appendChild(o),t.options.interactive&&t.addInteractiveTarget(o)},_removePath:function(t){var o=t._container;ie(o),t.removeInteractiveTarget(o),delete this._layers[c(t)]},_updateStyle:function(t){var o=t._stroke,u=t._fill,f=t.options,m=t._container;m.stroked=!!f.stroke,m.filled=!!f.fill,f.stroke?(o||(o=t._stroke=Mn("stroke")),m.appendChild(o),o.weight=f.weight+"px",o.color=f.color,o.opacity=f.opacity,f.dashArray?o.dashStyle=I(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=f.lineCap.replace("butt","flat"),o.joinstyle=f.lineJoin):o&&(m.removeChild(o),t._stroke=null),f.fill?(u||(u=t._fill=Mn("fill")),m.appendChild(u),u.color=f.fillColor||f.color,u.opacity=f.fillOpacity):u&&(m.removeChild(u),t._fill=null)},_updateCircle:function(t){var o=t._point.round(),u=Math.round(t._radius),f=Math.round(t._radiusY||u);this._setPath(t,t._empty()?"M0 0":"AL "+o.x+","+o.y+" "+u+","+f+" 0,"+65535*360)},_setPath:function(t,o){t._path.v=o},_bringToFront:function(t){Mi(t._container)},_bringToBack:function(t){Si(t._container)}},Kn=j.vml?Mn:Vt,Sn=zi.extend({_initContainer:function(){this._container=Kn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Kn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ie(this._container),oe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zi.prototype._update.call(this);var t=this._bounds,o=t.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,u.setAttribute("width",o.x),u.setAttribute("height",o.y)),xe(u,t.min),u.setAttribute("viewBox",[t.min.x,t.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(t){var o=t._path=Kn("path");t.options.className&&Tt(o,t.options.className),t.options.interactive&&Tt(o,"leaflet-interactive"),this._updateStyle(t),this._layers[c(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ie(t._path),t.removeInteractiveTarget(t._path),delete this._layers[c(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var o=t._path,u=t.options;o&&(u.stroke?(o.setAttribute("stroke",u.color),o.setAttribute("stroke-opacity",u.opacity),o.setAttribute("stroke-width",u.weight),o.setAttribute("stroke-linecap",u.lineCap),o.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?o.setAttribute("stroke-dasharray",u.dashArray):o.removeAttribute("stroke-dasharray"),u.dashOffset?o.setAttribute("stroke-dashoffset",u.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),u.fill?(o.setAttribute("fill",u.fillColor||u.color),o.setAttribute("fill-opacity",u.fillOpacity),o.setAttribute("fill-rule",u.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(t,o){this._setPath(t,fe(t._parts,o))},_updateCircle:function(t){var o=t._point,u=Math.max(Math.round(t._radius),1),f=Math.max(Math.round(t._radiusY),1)||u,m="a"+u+","+f+" 0 1,0 ",y=t._empty()?"M0 0":"M"+(o.x-u)+","+o.y+m+u*2+",0 "+m+-u*2+",0 ";this._setPath(t,y)},_setPath:function(t,o){t._path.setAttribute("d",o)},_bringToFront:function(t){Mi(t._path)},_bringToBack:function(t){Si(t._path)}});j.vml&&Sn.include(Ml);function Gs(t){return j.svg||j.vml?new Sn(t):null}qt.include({getRenderer:function(t){var o=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var o=this._paneRenderers[t];return o===void 0&&(o=this._createRenderer({pane:t}),this._paneRenderers[t]=o),o},_createRenderer:function(t){return this.options.preferCanvas&&Hs(t)||Gs(t)}});var Fs=on.extend({initialize:function(t,o){on.prototype.initialize.call(this,this._boundsToLatLngs(t),o)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=gt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Sl(t,o){return new Fs(t,o)}Sn.create=Kn,Sn.pointsToPath=fe,Ei.geometryToLayer=Gn,Ei.coordsToLatLng=No,Ei.coordsToLatLngs=Fn,Ei.latLngToCoords=Do,Ei.latLngsToCoords=Wn,Ei.getFeature=sn,Ei.asFeature=Un,qt.mergeOptions({boxZoom:!0});var Ws=Ci.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){At(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){oe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ie(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),yn(),vo(),this._startPoint=this._map.mouseEventToContainerPoint(t),At(document,{contextmenu:Gi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Ht("div","leaflet-zoom-box",this._container),Tt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var o=new bt(this._point,this._startPoint),u=o.getSize();xe(this._box,o.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(ie(this._box),ve(this._container,"leaflet-crosshair")),vn(),bo(),oe(document,{contextmenu:Gi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var o=new St(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});qt.addInitHook("addHandler","boxZoom",Ws),qt.mergeOptions({doubleClickZoom:!0});var Us=Ci.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var o=this._map,u=o.getZoom(),f=o.options.zoomDelta,m=t.originalEvent.shiftKey?u-f:u+f;o.options.doubleClickZoom==="center"?o.setZoom(m):o.setZoomAround(t.containerPoint,m)}});qt.addInitHook("addHandler","doubleClickZoom",Us),qt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var js=Ci.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Ni(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Tt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ve(this._map._container,"leaflet-grab"),ve(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=gt(this._map.options.maxBounds);this._offsetLimit=Mt(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var o=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(o),this._prunePositions(o)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,o){return t-(t-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;t.x<o.min.x&&(t.x=this._viscousLimit(t.x,o.min.x)),t.y<o.min.y&&(t.y=this._viscousLimit(t.y,o.min.y)),t.x>o.max.x&&(t.x=this._viscousLimit(t.x,o.max.x)),t.y>o.max.y&&(t.y=this._viscousLimit(t.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,o=Math.round(t/2),u=this._initialWorldOffset,f=this._draggable._newPos.x,m=(f-o+u)%t+o-u,y=(f+o+u)%t-o-u,C=Math.abs(m+u)<Math.abs(y+u)?m:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=C},_onDragEnd:function(t){var o=this._map,u=o.options,f=!u.inertia||t.noInertia||this._times.length<2;if(o.fire("dragend",t),f)o.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),y=(this._lastTime-this._times[0])/1e3,C=u.easeLinearity,x=m.multiplyBy(C/y),z=x.distanceTo([0,0]),U=Math.min(u.inertiaMaxSpeed,z),ct=x.multiplyBy(U/z),kt=U/(u.inertiaDeceleration*C),Wt=ct.multiplyBy(-kt/2).round();!Wt.x&&!Wt.y?o.fire("moveend"):(Wt=o._limitOffset(Wt,o.options.maxBounds),nt(function(){o.panBy(Wt,{duration:kt,easeLinearity:C,noMoveStart:!0,animate:!0})}))}}});qt.addInitHook("addHandler","dragging",js),qt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var qs=Ci.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),At(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),oe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,o=document.documentElement,u=t.scrollTop||o.scrollTop,f=t.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(f,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var o=this._panKeys={},u=this.keyCodes,f,m;for(f=0,m=u.left.length;f<m;f++)o[u.left[f]]=[-1*t,0];for(f=0,m=u.right.length;f<m;f++)o[u.right[f]]=[t,0];for(f=0,m=u.down.length;f<m;f++)o[u.down[f]]=[0,t];for(f=0,m=u.up.length;f<m;f++)o[u.up[f]]=[0,-1*t]},_setZoomDelta:function(t){var o=this._zoomKeys={},u=this.keyCodes,f,m;for(f=0,m=u.zoomIn.length;f<m;f++)o[u.zoomIn[f]]=t;for(f=0,m=u.zoomOut.length;f<m;f++)o[u.zoomOut[f]]=-t},_addHooks:function(){At(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){oe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var o=t.keyCode,u=this._map,f;if(o in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(f=this._panKeys[o],t.shiftKey&&(f=et(f).multiplyBy(3)),u.options.maxBounds&&(f=u._limitOffset(et(f),u.options.maxBounds)),u.options.worldCopyJump){var m=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(f)));u.panTo(m)}else u.panBy(f)}else if(o in this._zoomKeys)u.setZoom(u.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;Gi(t)}}});qt.addInitHook("addHandler","keyboard",qs),qt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Vs=Ci.extend({addHooks:function(){At(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){oe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var o=gs(t),u=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var f=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),Gi(t)},_performZoom:function(){var t=this._map,o=t.getZoom(),u=this._map.options.zoomSnap||0;t._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,y=u?Math.ceil(m/u)*u:m,C=t._limitZoom(o+(this._delta>0?y:-y))-o;this._delta=0,this._startTime=null,C&&(t.options.scrollWheelZoom==="center"?t.setZoom(o+C):t.setZoomAround(this._lastMousePos,o+C))}});qt.addInitHook("addHandler","scrollWheelZoom",Vs);var xl=600;qt.mergeOptions({tapHold:j.touchNative&&j.safari&&j.mobile,tapTolerance:15});var Ks=Ci.extend({addHooks:function(){At(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){oe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var o=t.touches[0];this._startPos=this._newPos=new lt(o.clientX,o.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(At(document,"touchend",Fe),At(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),xl),At(document,"touchend touchcancel contextmenu",this._cancel,this),At(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){oe(document,"touchend",Fe),oe(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),oe(document,"touchend touchcancel contextmenu",this._cancel,this),oe(document,"touchmove",this._onMove,this)},_onMove:function(t){var o=t.touches[0];this._newPos=new lt(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,o){var u=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});u._simulated=!0,o.target.dispatchEvent(u)}});qt.addInitHook("addHandler","tapHold",Ks),qt.mergeOptions({touchZoom:j.touch,bounceAtZoomLimits:!0});var Xs=Ci.extend({addHooks:function(){Tt(this._map._container,"leaflet-touch-zoom"),At(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ve(this._map._container,"leaflet-touch-zoom"),oe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var o=this._map;if(!(!t.touches||t.touches.length!==2||o._animatingZoom||this._zooming)){var u=o.mouseEventToContainerPoint(t.touches[0]),f=o.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(u.add(f)._divideBy(2))),this._startDist=u.distanceTo(f),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),At(document,"touchmove",this._onTouchMove,this),At(document,"touchend touchcancel",this._onTouchEnd,this),Fe(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var o=this._map,u=o.mouseEventToContainerPoint(t.touches[0]),f=o.mouseEventToContainerPoint(t.touches[1]),m=u.distanceTo(f)/this._startDist;if(this._zoom=o.getScaleZoom(m,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&m<1||this._zoom>o.getMaxZoom()&&m>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var y=u._add(f)._divideBy(2)._subtract(this._centerPoint);if(m===1&&y.x===0&&y.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var C=l(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=nt(C,this,!0),Fe(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,A(this._animRequest),oe(document,"touchmove",this._onTouchMove,this),oe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});qt.addInitHook("addHandler","touchZoom",Xs),qt.BoxZoom=Ws,qt.DoubleClickZoom=Us,qt.Drag=js,qt.Keyboard=qs,qt.ScrollWheelZoom=Vs,qt.TapHold=Ks,qt.TouchZoom=Xs,i.Bounds=bt,i.Browser=j,i.CRS=it,i.Canvas=Rs,i.Circle=Io,i.CircleMarker=Hn,i.Class=E,i.Control=pi,i.DivIcon=Ds,i.DivOverlay=Pi,i.DomEvent=qa,i.DomUtil=Ua,i.Draggable=Ni,i.Evented=Zt,i.FeatureGroup=xi,i.GeoJSON=Ei,i.GridLayer=kn,i.Handler=Ci,i.Icon=nn,i.ImageOverlay=jn,i.LatLng=mt,i.LatLngBounds=St,i.Layer=gi,i.LayerGroup=en,i.LineUtil=ol,i.Map=qt,i.Marker=Rn,i.Mixin=$a,i.Path=Di,i.Point=lt,i.PolyUtil=sl,i.Polygon=on,i.Polyline=Ti,i.Popup=qn,i.PosAnimation=ys,i.Projection=rl,i.Rectangle=Fs,i.Renderer=zi,i.SVG=Sn,i.SVGOverlay=Ns,i.TileLayer=rn,i.Tooltip=Vn,i.Transformation=ut,i.Util=ot,i.VideoOverlay=Is,i.bind=l,i.bounds=Mt,i.canvas=Hs,i.circle=_l,i.circleMarker=dl,i.control=Ln,i.divIcon=Cl,i.extend=a,i.featureGroup=hl,i.geoJSON=Os,i.geoJson=gl,i.gridLayer=Pl,i.icon=cl,i.imageOverlay=yl,i.latLng=wt,i.latLngBounds=gt,i.layerGroup=ul,i.map=Va,i.marker=fl,i.point=et,i.polygon=pl,i.polyline=ml,i.popup=wl,i.rectangle=Sl,i.setOptions=w,i.stamp=c,i.svg=Gs,i.svgOverlay=bl,i.tileLayer=Zs,i.tooltip=Ll,i.transformation=vt,i.version=r,i.videoOverlay=vl;var Tl=window.L;i.noConflict=function(){return window.L=Tl,this},window.L=i})})(ql,ro);var $o={},Vl={get exports(){return $o},set exports(n){$o=n}};(function(n,e){(function(i,r){r(e)})(Ma,function(i){var r=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(s){L.Util.setOptions(this,s),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var l=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,l?this._withAnimation:this._noAnimation),this._markerCluster=l?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(s){if(s instanceof L.LayerGroup)return this.addLayers([s]);if(!s.getLatLng)return this._nonPointGroup.addLayer(s),this.fire("layeradd",{layer:s}),this;if(!this._map)return this._needsClustering.push(s),this.fire("layeradd",{layer:s}),this;if(this.hasLayer(s))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(s,this._maxZoom),this.fire("layeradd",{layer:s}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var l=s,h=this._zoom;if(s.__parent)for(;l.__parent._zoom>=h;)l=l.__parent;return this._currentShownBounds.contains(l.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(s,l):this._animationAddLayerNonAnimated(s,l)),this},removeLayer:function(s){return s instanceof L.LayerGroup?this.removeLayers([s]):s.getLatLng?this._map?s.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(s)),this._removeLayer(s,!0),this.fire("layerremove",{layer:s}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),s.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(s)&&(this._featureGroup.removeLayer(s),s.clusterShow&&s.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,s)&&this.hasLayer(s)&&this._needsRemoving.push({layer:s,latlng:s._latlng}),this.fire("layerremove",{layer:s}),this):(this._nonPointGroup.removeLayer(s),this.fire("layerremove",{layer:s}),this)},addLayers:function(s,l){if(!L.Util.isArray(s))return this.addLayer(s);var h=this._featureGroup,c=this._nonPointGroup,d=this.options.chunkedLoading,_=this.options.chunkInterval,p=this.options.chunkProgress,v=s.length,g=0,b=!0,w;if(this._map){var k=new Date().getTime(),M=L.bind(function(){var I=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();g<v;g++){if(d&&g%200===0){var Z=new Date().getTime()-I;if(Z>_)break}if(w=s[g],w instanceof L.LayerGroup){b&&(s=s.slice(),b=!1),this._extractNonGroupLayers(w,s),v=s.length;continue}if(!w.getLatLng){c.addLayer(w),l||this.fire("layeradd",{layer:w});continue}if(!this.hasLayer(w)&&(this._addLayer(w,this._maxZoom),l||this.fire("layeradd",{layer:w}),w.__parent&&w.__parent.getChildCount()===2)){var D=w.__parent.getAllChildMarkers(),H=D[0]===w?D[1]:D[0];h.removeLayer(H)}}p&&p(g,v,new Date().getTime()-k),g===v?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(M,this.options.chunkDelay)},this);M()}else for(var O=this._needsClustering;g<v;g++){if(w=s[g],w instanceof L.LayerGroup){b&&(s=s.slice(),b=!1),this._extractNonGroupLayers(w,s),v=s.length;continue}if(!w.getLatLng){c.addLayer(w);continue}this.hasLayer(w)||O.push(w)}return this},removeLayers:function(s){var l,h,c=s.length,d=this._featureGroup,_=this._nonPointGroup,p=!0;if(!this._map){for(l=0;l<c;l++){if(h=s[l],h instanceof L.LayerGroup){p&&(s=s.slice(),p=!1),this._extractNonGroupLayers(h,s),c=s.length;continue}this._arraySplice(this._needsClustering,h),_.removeLayer(h),this.hasLayer(h)&&this._needsRemoving.push({layer:h,latlng:h._latlng}),this.fire("layerremove",{layer:h})}return this}if(this._unspiderfy){this._unspiderfy();var v=s.slice(),g=c;for(l=0;l<g;l++){if(h=v[l],h instanceof L.LayerGroup){this._extractNonGroupLayers(h,v),g=v.length;continue}this._unspiderfyLayer(h)}}for(l=0;l<c;l++){if(h=s[l],h instanceof L.LayerGroup){p&&(s=s.slice(),p=!1),this._extractNonGroupLayers(h,s),c=s.length;continue}if(!h.__parent){_.removeLayer(h),this.fire("layerremove",{layer:h});continue}this._removeLayer(h,!0,!0),this.fire("layerremove",{layer:h}),d.hasLayer(h)&&(d.removeLayer(h),h.clusterShow&&h.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(s){s.off(this._childMarkerEventHandlers,this),delete s.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var s=new L.LatLngBounds;this._topClusterLevel&&s.extend(this._topClusterLevel._bounds);for(var l=this._needsClustering.length-1;l>=0;l--)s.extend(this._needsClustering[l].getLatLng());return s.extend(this._nonPointGroup.getBounds()),s},eachLayer:function(s,l){var h=this._needsClustering.slice(),c=this._needsRemoving,d,_,p;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(h),_=h.length-1;_>=0;_--){for(d=!0,p=c.length-1;p>=0;p--)if(c[p].layer===h[_]){d=!1;break}d&&s.call(l,h[_])}this._nonPointGroup.eachLayer(s,l)},getLayers:function(){var s=[];return this.eachLayer(function(l){s.push(l)}),s},getLayer:function(s){var l=null;return s=parseInt(s,10),this.eachLayer(function(h){L.stamp(h)===s&&(l=h)}),l},hasLayer:function(s){if(!s)return!1;var l,h=this._needsClustering;for(l=h.length-1;l>=0;l--)if(h[l]===s)return!0;for(h=this._needsRemoving,l=h.length-1;l>=0;l--)if(h[l].layer===s)return!1;return!!(s.__parent&&s.__parent._group===this)||this._nonPointGroup.hasLayer(s)},zoomToShowLayer:function(s,l){var h=this._map;typeof l!="function"&&(l=function(){});var c=function(){(h.hasLayer(s)||h.hasLayer(s.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",c,this),this.off("animationend",c,this),h.hasLayer(s)?l():s.__parent._icon&&(this.once("spiderfied",l,this),s.__parent.spiderfy()))};s._icon&&this._map.getBounds().contains(s.getLatLng())?l():s.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",c,this),this._map.panTo(s.getLatLng())):(this._map.on("moveend",c,this),this.on("animationend",c,this),s.__parent.zoomToBounds())},onAdd:function(s){this._map=s;var l,h,c;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(s),this._nonPointGroup.addTo(s),this._gridClusters||this._generateInitialClusters(),this._maxLat=s.options.crs.projection.MAX_LATITUDE,l=0,h=this._needsRemoving.length;l<h;l++)c=this._needsRemoving[l],c.newlatlng=c.layer._latlng,c.layer._latlng=c.latlng;for(l=0,h=this._needsRemoving.length;l<h;l++)c=this._needsRemoving[l],this._removeLayer(c.layer,!0),c.layer._latlng=c.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),h=this._needsClustering,this._needsClustering=[],this.addLayers(h,!0)},onRemove:function(s){s.off("zoomend",this._zoomEnd,this),s.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(s){for(var l=s;l&&!l._icon;)l=l.__parent;return l||null},_arraySplice:function(s,l){for(var h=s.length-1;h>=0;h--)if(s[h]===l)return s.splice(h,1),!0},_removeFromGridUnclustered:function(s,l){for(var h=this._map,c=this._gridUnclustered,d=Math.floor(this._map.getMinZoom());l>=d&&c[l].removeObject(s,h.project(s.getLatLng(),l));l--);},_childMarkerDragStart:function(s){s.target.__dragStart=s.target._latlng},_childMarkerMoved:function(s){if(!this._ignoreMove&&!s.target.__dragStart){var l=s.target._popup&&s.target._popup.isOpen();this._moveChild(s.target,s.oldLatLng,s.latlng),l&&s.target.openPopup()}},_moveChild:function(s,l,h){s._latlng=l,this.removeLayer(s),s._latlng=h,this.addLayer(s)},_childMarkerDragEnd:function(s){var l=s.target.__dragStart;delete s.target.__dragStart,l&&this._moveChild(s.target,l,s.target._latlng)},_removeLayer:function(s,l,h){var c=this._gridClusters,d=this._gridUnclustered,_=this._featureGroup,p=this._map,v=Math.floor(this._map.getMinZoom());l&&this._removeFromGridUnclustered(s,this._maxZoom);var g=s.__parent,b=g._markers,w;for(this._arraySplice(b,s);g&&(g._childCount--,g._boundsNeedUpdate=!0,!(g._zoom<v));)l&&g._childCount<=1?(w=g._markers[0]===s?g._markers[1]:g._markers[0],c[g._zoom].removeObject(g,p.project(g._cLatLng,g._zoom)),d[g._zoom].addObject(w,p.project(w.getLatLng(),g._zoom)),this._arraySplice(g.__parent._childClusters,g),g.__parent._markers.push(w),w.__parent=g.__parent,g._icon&&(_.removeLayer(g),h||_.addLayer(w))):g._iconNeedsUpdate=!0,g=g.__parent;delete s.__parent},_isOrIsParent:function(s,l){for(;l;){if(s===l)return!0;l=l.parentNode}return!1},fire:function(s,l,h){if(l&&l.layer instanceof L.MarkerCluster){if(l.originalEvent&&this._isOrIsParent(l.layer._icon,l.originalEvent.relatedTarget))return;s="cluster"+s}L.FeatureGroup.prototype.fire.call(this,s,l,h)},listens:function(s,l){return L.FeatureGroup.prototype.listens.call(this,s,l)||L.FeatureGroup.prototype.listens.call(this,"cluster"+s,l)},_defaultIconCreateFunction:function(s){var l=s.getChildCount(),h=" marker-cluster-";return l<10?h+="small":l<100?h+="medium":h+="large",new L.DivIcon({html:"<div><span>"+l+"</span></div>",className:"marker-cluster"+h,iconSize:new L.Point(40,40)})},_bindEvents:function(){var s=this._map,l=this.options.spiderfyOnMaxZoom,h=this.options.showCoverageOnHover,c=this.options.zoomToBoundsOnClick,d=this.options.spiderfyOnEveryZoom;(l||c||d)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),h&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),s.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(s){var l=s.layer,h=l;if(!(s.type==="clusterkeypress"&&s.originalEvent&&s.originalEvent.keyCode!==13)){for(;h._childClusters.length===1;)h=h._childClusters[0];h._zoom===this._maxZoom&&h._childCount===l._childCount&&this.options.spiderfyOnMaxZoom?l.spiderfy():this.options.zoomToBoundsOnClick&&l.zoomToBounds(),this.options.spiderfyOnEveryZoom&&l.spiderfy(),s.originalEvent&&s.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(s){var l=this._map;this._inZoomAnimation||(this._shownPolygon&&l.removeLayer(this._shownPolygon),s.layer.getChildCount()>2&&s.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(s.layer.getConvexHull(),this.options.polygonOptions),l.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var s=this.options.spiderfyOnMaxZoom,l=this.options.showCoverageOnHover,h=this.options.zoomToBoundsOnClick,c=this.options.spiderfyOnEveryZoom,d=this._map;(s||h||c)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),l&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),d.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var s=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,s),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),s),this._currentShownBounds=s}},_generateInitialClusters:function(){var s=Math.ceil(this._map.getMaxZoom()),l=Math.floor(this._map.getMinZoom()),h=this.options.maxClusterRadius,c=h;typeof h!="function"&&(c=function(){return h}),this.options.disableClusteringAtZoom!==null&&(s=this.options.disableClusteringAtZoom-1),this._maxZoom=s,this._gridClusters={},this._gridUnclustered={};for(var d=s;d>=l;d--)this._gridClusters[d]=new L.DistanceGrid(c(d)),this._gridUnclustered[d]=new L.DistanceGrid(c(d));this._topClusterLevel=new this._markerCluster(this,l-1)},_addLayer:function(s,l){var h=this._gridClusters,c=this._gridUnclustered,d=Math.floor(this._map.getMinZoom()),_,p;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(s),s.on(this._childMarkerEventHandlers,this);l>=d;l--){_=this._map.project(s.getLatLng(),l);var v=h[l].getNearObject(_);if(v){v._addChild(s),s.__parent=v;return}if(v=c[l].getNearObject(_),v){var g=v.__parent;g&&this._removeLayer(v,!1);var b=new this._markerCluster(this,l,v,s);h[l].addObject(b,this._map.project(b._cLatLng,l)),v.__parent=b,s.__parent=b;var w=b;for(p=l-1;p>g._zoom;p--)w=new this._markerCluster(this,p,w),h[p].addObject(w,this._map.project(v.getLatLng(),p));g._addChild(w),this._removeFromGridUnclustered(v,l);return}c[l].addObject(s,_)}this._topClusterLevel._addChild(s),s.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(s){s instanceof L.MarkerCluster&&s._iconNeedsUpdate&&s._updateIcon()})},_enqueue:function(s){this._queue.push(s),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var s=0;s<this._queue.length;s++)this._queue[s].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var s=Math.round(this._map._zoom);this._processQueue(),this._zoom<s&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,s)):this._zoom>s?(this._animationStart(),this._animationZoomOut(this._zoom,s)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(s){var l=this._maxLat;return l!==void 0&&(s.getNorth()>=l&&(s._northEast.lat=1/0),s.getSouth()<=-l&&(s._southWest.lat=-1/0)),s},_animationAddLayerNonAnimated:function(s,l){if(l===s)this._featureGroup.addLayer(s);else if(l._childCount===2){l._addToMap();var h=l.getAllChildMarkers();this._featureGroup.removeLayer(h[0]),this._featureGroup.removeLayer(h[1])}else l._updateIcon()},_extractNonGroupLayers:function(s,l){var h=s.getLayers(),c=0,d;for(l=l||[];c<h.length;c++){if(d=h[c],d instanceof L.LayerGroup){this._extractNonGroupLayers(d,l);continue}l.push(d)}return l},_overrideMarkerIcon:function(s){var l=s.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[s]}});return l}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(s,l){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),s),this._topClusterLevel._recursivelyAddChildrenToMap(null,l,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(s,l){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),s),this._topClusterLevel._recursivelyAddChildrenToMap(null,l,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(s,l){this._animationAddLayerNonAnimated(s,l)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(s,l){var h=this._getExpandedVisibleBounds(),c=this._featureGroup,d=Math.floor(this._map.getMinZoom()),_;this._ignoreMove=!0,this._topClusterLevel._recursively(h,s,d,function(p){var v=p._latlng,g=p._markers,b;for(h.contains(v)||(v=null),p._isSingleParent()&&s+1===l?(c.removeLayer(p),p._recursivelyAddChildrenToMap(null,l,h)):(p.clusterHide(),p._recursivelyAddChildrenToMap(v,l,h)),_=g.length-1;_>=0;_--)b=g[_],h.contains(b._latlng)||c.removeLayer(b)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(h,l),c.eachLayer(function(p){!(p instanceof L.MarkerCluster)&&p._icon&&p.clusterShow()}),this._topClusterLevel._recursively(h,s,l,function(p){p._recursivelyRestoreChildPositions(l)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(h,s,d,function(p){c.removeLayer(p),p.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(s,l){this._animationZoomOutSingle(this._topClusterLevel,s-1,l),this._topClusterLevel._recursivelyAddChildrenToMap(null,l,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),s,this._getExpandedVisibleBounds())},_animationAddLayer:function(s,l){var h=this,c=this._featureGroup;c.addLayer(s),l!==s&&(l._childCount>2?(l._updateIcon(),this._forceLayout(),this._animationStart(),s._setPos(this._map.latLngToLayerPoint(l.getLatLng())),s.clusterHide(),this._enqueue(function(){c.removeLayer(s),s.clusterShow(),h._animationEnd()})):(this._forceLayout(),h._animationStart(),h._animationZoomOutSingle(l,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(s,l,h){var c=this._getExpandedVisibleBounds(),d=Math.floor(this._map.getMinZoom());s._recursivelyAnimateChildrenInAndAddSelfToMap(c,d,l+1,h);var _=this;this._forceLayout(),s._recursivelyBecomeVisible(c,h),this._enqueue(function(){if(s._childCount===1){var p=s._markers[0];this._ignoreMove=!0,p.setLatLng(p.getLatLng()),this._ignoreMove=!1,p.clusterShow&&p.clusterShow()}else s._recursively(c,h,d,function(v){v._recursivelyRemoveChildrenFromMap(c,d,l+1)});_._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(s){return new L.MarkerClusterGroup(s)};var a=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(s,l,h,c){L.Marker.prototype.initialize.call(this,h?h._cLatLng||h.getLatLng():new L.LatLng(0,0),{icon:this,pane:s.options.clusterPane}),this._group=s,this._zoom=l,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,h&&this._addChild(h),c&&this._addChild(c)},getAllChildMarkers:function(s,l){s=s||[];for(var h=this._childClusters.length-1;h>=0;h--)this._childClusters[h].getAllChildMarkers(s,l);for(var c=this._markers.length-1;c>=0;c--)l&&this._markers[c].__dragStart||s.push(this._markers[c]);return s},getChildCount:function(){return this._childCount},zoomToBounds:function(s){for(var l=this._childClusters.slice(),h=this._group._map,c=h.getBoundsZoom(this._bounds),d=this._zoom+1,_=h.getZoom(),p;l.length>0&&c>d;){d++;var v=[];for(p=0;p<l.length;p++)v=v.concat(l[p]._childClusters);l=v}c>d?this._group._map.setView(this._latlng,d):c<=_?this._group._map.setView(this._latlng,_+1):this._group._map.fitBounds(this._bounds,s)},getBounds:function(){var s=new L.LatLngBounds;return s.extend(this._bounds),s},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(s,l){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(s),s instanceof L.MarkerCluster?(l||(this._childClusters.push(s),s.__parent=this),this._childCount+=s._childCount):(l||this._markers.push(s),this._childCount++),this.__parent&&this.__parent._addChild(s,!0)},_setClusterCenter:function(s){this._cLatLng||(this._cLatLng=s._cLatLng||s._latlng)},_resetBounds:function(){var s=this._bounds;s._southWest&&(s._southWest.lat=1/0,s._southWest.lng=1/0),s._northEast&&(s._northEast.lat=-1/0,s._northEast.lng=-1/0)},_recalculateBounds:function(){var s=this._markers,l=this._childClusters,h=0,c=0,d=this._childCount,_,p,v,g;if(d!==0){for(this._resetBounds(),_=0;_<s.length;_++)v=s[_]._latlng,this._bounds.extend(v),h+=v.lat,c+=v.lng;for(_=0;_<l.length;_++)p=l[_],p._boundsNeedUpdate&&p._recalculateBounds(),this._bounds.extend(p._bounds),v=p._wLatLng,g=p._childCount,h+=v.lat*g,c+=v.lng*g;this._latlng=this._wLatLng=new L.LatLng(h/d,c/d),this._boundsNeedUpdate=!1}},_addToMap:function(s){s&&(this._backupLatlng=this._latlng,this.setLatLng(s)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(s,l,h){this._recursively(s,this._group._map.getMinZoom(),h-1,function(c){var d=c._markers,_,p;for(_=d.length-1;_>=0;_--)p=d[_],p._icon&&(p._setPos(l),p.clusterHide())},function(c){var d=c._childClusters,_,p;for(_=d.length-1;_>=0;_--)p=d[_],p._icon&&(p._setPos(l),p.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(s,l,h,c){this._recursively(s,c,l,function(d){d._recursivelyAnimateChildrenIn(s,d._group._map.latLngToLayerPoint(d.getLatLng()).round(),h),d._isSingleParent()&&h-1===c?(d.clusterShow(),d._recursivelyRemoveChildrenFromMap(s,l,h)):d.clusterHide(),d._addToMap()})},_recursivelyBecomeVisible:function(s,l){this._recursively(s,this._group._map.getMinZoom(),l,null,function(h){h.clusterShow()})},_recursivelyAddChildrenToMap:function(s,l,h){this._recursively(h,this._group._map.getMinZoom()-1,l,function(c){if(l!==c._zoom)for(var d=c._markers.length-1;d>=0;d--){var _=c._markers[d];h.contains(_._latlng)&&(s&&(_._backupLatlng=_.getLatLng(),_.setLatLng(s),_.clusterHide&&_.clusterHide()),c._group._featureGroup.addLayer(_))}},function(c){c._addToMap(s)})},_recursivelyRestoreChildPositions:function(s){for(var l=this._markers.length-1;l>=0;l--){var h=this._markers[l];h._backupLatlng&&(h.setLatLng(h._backupLatlng),delete h._backupLatlng)}if(s-1===this._zoom)for(var c=this._childClusters.length-1;c>=0;c--)this._childClusters[c]._restorePosition();else for(var d=this._childClusters.length-1;d>=0;d--)this._childClusters[d]._recursivelyRestoreChildPositions(s)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(s,l,h,c){var d,_;this._recursively(s,l-1,h-1,function(p){for(_=p._markers.length-1;_>=0;_--)d=p._markers[_],(!c||!c.contains(d._latlng))&&(p._group._featureGroup.removeLayer(d),d.clusterShow&&d.clusterShow())},function(p){for(_=p._childClusters.length-1;_>=0;_--)d=p._childClusters[_],(!c||!c.contains(d._latlng))&&(p._group._featureGroup.removeLayer(d),d.clusterShow&&d.clusterShow())})},_recursively:function(s,l,h,c,d){var _=this._childClusters,p=this._zoom,v,g;if(l<=p&&(c&&c(this),d&&p===h&&d(this)),p<l||p<h)for(v=_.length-1;v>=0;v--)g=_[v],g._boundsNeedUpdate&&g._recalculateBounds(),s.intersects(g._bounds)&&g._recursively(s,l,h,c,d)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var s=this.options.opacity;return this.setOpacity(0),this.options.opacity=s,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(s){this._cellSize=s,this._sqCellSize=s*s,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(s,l){var h=this._getCoord(l.x),c=this._getCoord(l.y),d=this._grid,_=d[c]=d[c]||{},p=_[h]=_[h]||[],v=L.Util.stamp(s);this._objectPoint[v]=l,p.push(s)},updateObject:function(s,l){this.removeObject(s),this.addObject(s,l)},removeObject:function(s,l){var h=this._getCoord(l.x),c=this._getCoord(l.y),d=this._grid,_=d[c]=d[c]||{},p=_[h]=_[h]||[],v,g;for(delete this._objectPoint[L.Util.stamp(s)],v=0,g=p.length;v<g;v++)if(p[v]===s)return p.splice(v,1),g===1&&delete _[h],!0},eachObject:function(s,l){var h,c,d,_,p,v,g,b=this._grid;for(h in b){p=b[h];for(c in p)for(v=p[c],d=0,_=v.length;d<_;d++)g=s.call(l,v[d]),g&&(d--,_--)}},getNearObject:function(s){var l=this._getCoord(s.x),h=this._getCoord(s.y),c,d,_,p,v,g,b,w,k=this._objectPoint,M=this._sqCellSize,O=null;for(c=h-1;c<=h+1;c++)if(p=this._grid[c],p){for(d=l-1;d<=l+1;d++)if(v=p[d],v)for(_=0,g=v.length;_<g;_++)b=v[_],w=this._sqDist(k[L.Util.stamp(b)],s),(w<M||w<=M&&O===null)&&(M=w,O=b)}return O},_getCoord:function(s){var l=Math.floor(s/this._cellSize);return isFinite(l)?l:s},_sqDist:function(s,l){var h=l.x-s.x,c=l.y-s.y;return h*h+c*c}},function(){L.QuickHull={getDistant:function(s,l){var h=l[1].lat-l[0].lat,c=l[0].lng-l[1].lng;return c*(s.lat-l[0].lat)+h*(s.lng-l[0].lng)},findMostDistantPointFromBaseLine:function(s,l){var h=0,c=null,d=[],_,p,v;for(_=l.length-1;_>=0;_--){if(p=l[_],v=this.getDistant(p,s),v>0)d.push(p);else continue;v>h&&(h=v,c=p)}return{maxPoint:c,newPoints:d}},buildConvexHull:function(s,l){var h=[],c=this.findMostDistantPointFromBaseLine(s,l);return c.maxPoint?(h=h.concat(this.buildConvexHull([s[0],c.maxPoint],c.newPoints)),h=h.concat(this.buildConvexHull([c.maxPoint,s[1]],c.newPoints)),h):[s[0]]},getConvexHull:function(s){var l=!1,h=!1,c=!1,d=!1,_=null,p=null,v=null,g=null,b=null,w=null,k;for(k=s.length-1;k>=0;k--){var M=s[k];(l===!1||M.lat>l)&&(_=M,l=M.lat),(h===!1||M.lat<h)&&(p=M,h=M.lat),(c===!1||M.lng>c)&&(v=M,c=M.lng),(d===!1||M.lng<d)&&(g=M,d=M.lng)}h!==l?(w=p,b=_):(w=g,b=v);var O=[].concat(this.buildConvexHull([w,b],s),this.buildConvexHull([b,w],s));return O}}}(),L.MarkerCluster.include({getConvexHull:function(){var s=this.getAllChildMarkers(),l=[],h,c;for(c=s.length-1;c>=0;c--)h=s[c].getLatLng(),l.push(h);return L.QuickHull.getConvexHull(l)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var s=this.getAllChildMarkers(null,!0),l=this._group,h=l._map,c=h.latLngToLayerPoint(this._latlng),d;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?d=this._group.options.spiderfyShapePositions(s.length,c):s.length>=this._circleSpiralSwitchover?d=this._generatePointsSpiral(s.length,c):(c.y+=10,d=this._generatePointsCircle(s.length,c)),this._animationSpiderfy(s,d)}},unspiderfy:function(s){this._group._inZoomAnimation||(this._animationUnspiderfy(s),this._group._spiderfied=null)},_generatePointsCircle:function(s,l){var h=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+s),c=h/this._2PI,d=this._2PI/s,_=[],p,v;for(c=Math.max(c,35),_.length=s,p=0;p<s;p++)v=this._circleStartAngle+p*d,_[p]=new L.Point(l.x+c*Math.cos(v),l.y+c*Math.sin(v))._round();return _},_generatePointsSpiral:function(s,l){var h=this._group.options.spiderfyDistanceMultiplier,c=h*this._spiralLengthStart,d=h*this._spiralFootSeparation,_=h*this._spiralLengthFactor*this._2PI,p=0,v=[],g;for(v.length=s,g=s;g>=0;g--)g<s&&(v[g]=new L.Point(l.x+c*Math.cos(p),l.y+c*Math.sin(p))._round()),p+=d/c+g*5e-4,c+=_/p;return v},_noanimationUnspiderfy:function(){var s=this._group,l=s._map,h=s._featureGroup,c=this.getAllChildMarkers(null,!0),d,_;for(s._ignoreMove=!0,this.setOpacity(1),_=c.length-1;_>=0;_--)d=c[_],h.removeLayer(d),d._preSpiderfyLatlng&&(d.setLatLng(d._preSpiderfyLatlng),delete d._preSpiderfyLatlng),d.setZIndexOffset&&d.setZIndexOffset(0),d._spiderLeg&&(l.removeLayer(d._spiderLeg),delete d._spiderLeg);s.fire("unspiderfied",{cluster:this,markers:c}),s._ignoreMove=!1,s._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(s,l){var h=this._group,c=h._map,d=h._featureGroup,_=this._group.options.spiderLegPolylineOptions,p,v,g,b;for(h._ignoreMove=!0,p=0;p<s.length;p++)b=c.layerPointToLatLng(l[p]),v=s[p],g=new L.Polyline([this._latlng,b],_),c.addLayer(g),v._spiderLeg=g,v._preSpiderfyLatlng=v._latlng,v.setLatLng(b),v.setZIndexOffset&&v.setZIndexOffset(1e6),d.addLayer(v);this.setOpacity(.3),h._ignoreMove=!1,h.fire("spiderfied",{cluster:this,markers:s})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(s,l){var h=this,c=this._group,d=c._map,_=c._featureGroup,p=this._latlng,v=d.latLngToLayerPoint(p),g=L.Path.SVG,b=L.extend({},this._group.options.spiderLegPolylineOptions),w=b.opacity,k,M,O,I,Z,D;for(w===void 0&&(w=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),g?(b.opacity=0,b.className=(b.className||"")+" leaflet-cluster-spider-leg"):b.opacity=w,c._ignoreMove=!0,k=0;k<s.length;k++)M=s[k],D=d.layerPointToLatLng(l[k]),O=new L.Polyline([p,D],b),d.addLayer(O),M._spiderLeg=O,g&&(I=O._path,Z=I.getTotalLength()+.1,I.style.strokeDasharray=Z,I.style.strokeDashoffset=Z),M.setZIndexOffset&&M.setZIndexOffset(1e6),M.clusterHide&&M.clusterHide(),_.addLayer(M),M._setPos&&M._setPos(v);for(c._forceLayout(),c._animationStart(),k=s.length-1;k>=0;k--)D=d.layerPointToLatLng(l[k]),M=s[k],M._preSpiderfyLatlng=M._latlng,M.setLatLng(D),M.clusterShow&&M.clusterShow(),g&&(O=M._spiderLeg,I=O._path,I.style.strokeDashoffset=0,O.setStyle({opacity:w}));this.setOpacity(.3),c._ignoreMove=!1,setTimeout(function(){c._animationEnd(),c.fire("spiderfied",{cluster:h,markers:s})},200)},_animationUnspiderfy:function(s){var l=this,h=this._group,c=h._map,d=h._featureGroup,_=s?c._latLngToNewLayerPoint(this._latlng,s.zoom,s.center):c.latLngToLayerPoint(this._latlng),p=this.getAllChildMarkers(null,!0),v=L.Path.SVG,g,b,w,k,M,O;for(h._ignoreMove=!0,h._animationStart(),this.setOpacity(1),b=p.length-1;b>=0;b--)g=p[b],g._preSpiderfyLatlng&&(g.closePopup(),g.setLatLng(g._preSpiderfyLatlng),delete g._preSpiderfyLatlng,O=!0,g._setPos&&(g._setPos(_),O=!1),g.clusterHide&&(g.clusterHide(),O=!1),O&&d.removeLayer(g),v&&(w=g._spiderLeg,k=w._path,M=k.getTotalLength()+.1,k.style.strokeDashoffset=M,w.setStyle({opacity:0})));h._ignoreMove=!1,setTimeout(function(){var I=0;for(b=p.length-1;b>=0;b--)g=p[b],g._spiderLeg&&I++;for(b=p.length-1;b>=0;b--)g=p[b],g._spiderLeg&&(g.clusterShow&&g.clusterShow(),g.setZIndexOffset&&g.setZIndexOffset(0),I>1&&d.removeLayer(g),c.removeLayer(g._spiderLeg),delete g._spiderLeg);h._animationEnd(),h.fire("unspiderfied",{cluster:l,markers:p})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(s){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(s))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(s){this._spiderfied&&this._spiderfied.unspiderfy(s)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(s){s._spiderLeg&&(this._featureGroup.removeLayer(s),s.clusterShow&&s.clusterShow(),s.setZIndexOffset&&s.setZIndexOffset(0),this._map.removeLayer(s._spiderLeg),delete s._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(s){return s?s instanceof L.MarkerClusterGroup?s=s._topClusterLevel.getAllChildMarkers():s instanceof L.LayerGroup?s=s._layers:s instanceof L.MarkerCluster?s=s.getAllChildMarkers():s instanceof L.Marker&&(s=[s]):s=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(s),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(s),this},_flagParentsIconsNeedUpdate:function(s){var l,h;for(l in s)for(h=s[l].__parent;h;)h._iconNeedsUpdate=!0,h=h.__parent},_refreshSingleMarkerModeMarkers:function(s){var l,h;for(l in s)h=s[l],this.hasLayer(h)&&h.setIcon(this._overrideMarkerIcon(h))}}),L.Marker.include({refreshIconOptions:function(s,l){var h=this.options.icon;return L.setOptions(h,s),this.setIcon(h),l&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),i.MarkerClusterGroup=r,i.MarkerCluster=a,Object.defineProperty(i,"__esModule",{value:!0})})})(Vl,$o);const ln=[];function ao(n,e){return{subscribe:q(n,e).subscribe}}function q(n,e=pt){let i;const r=new Set;function a(h){if(ne(n,h)&&(n=h,i)){const c=!ln.length;for(const d of r)d[1](),ln.push(d,n);if(c){for(let d=0;d<ln.length;d+=2)ln[d][0](ln[d+1]);ln.length=0}}}function s(h){a(h(n))}function l(h,c=pt){const d=[h,c];return r.add(d),r.size===1&&(i=e(a)||pt),h(n),()=>{r.delete(d),r.size===0&&i&&(i(),i=null)}}return{set:a,update:s,subscribe:l}}function An(n,e,i){const r=!Array.isArray(n),a=r?[n]:n,s=e.length<2;return ao(i,l=>{let h=!1;const c=[];let d=0,_=pt;const p=()=>{if(d)return;_();const g=e(r?c[0]:c,l);s?l(g):_=Nn(g)?g:pt},v=a.map((g,b)=>se(g,w=>{c[b]=w,d&=~(1<<b),h&&p()},()=>{d|=1<<b}));return h=!0,p(),function(){Ie(v),_(),h=!1}})}const Kl=localStorage.getItem("storedFeatures"),ir=JSON.parse(Kl),lo=q(ir===null?[]:ir);lo.subscribe(n=>{localStorage.setItem("storedFeatures",JSON.stringify(n))});function Xl(n){let e,i,r,a,s,l,h,c,d,_,p,v,g,b,w,k;return{c(){e=dt("div"),i=dt("h3"),r=Ct(),a=dt("p"),s=vi(n[1]),l=Ct(),h=dt("a"),c=vi("Link to article"),d=Ct(),_=dt("p"),p=Ct(),v=dt("br"),g=Ct(),b=dt("button"),b.textContent="Add to list",S(h,"href",n[2]),S(b,"class","bg-slate-700"),S(b,"id","addToList"),S(e,"class","popup")},m(M,O){tt(M,e,O),rt(e,i),i.innerHTML=n[0],rt(e,r),rt(e,a),rt(a,s),rt(e,l),rt(e,h),rt(h,c),rt(e,d),rt(e,_),_.innerHTML=n[3],rt(e,p),rt(e,v),rt(e,g),rt(e,b),w||(k=Et(b,"click",n[6]),w=!0)},p(M,[O]){O&1&&(i.innerHTML=M[0]),O&2&&Vi(s,M[1]),O&4&&S(h,"href",M[2]),O&8&&(_.innerHTML=M[3])},i:pt,o:pt,d(M){M&&Q(e),w=!1,k()}}}function Yl(n,e,i){let{title:r}=e,{date:a}=e,{link:s}=e,{excerpt:l}=e,{feature:h}=e;async function c(){const _={title:r,date:a,link:s,excerpt:l,feature:h};lo.update(p=>(p.push(_),console.log("pushing to selected features"),console.log(p),p))}const d=()=>c();return n.$$set=_=>{"title"in _&&i(0,r=_.title),"date"in _&&i(1,a=_.date),"link"in _&&i(2,s=_.link),"excerpt"in _&&i(3,l=_.excerpt),"feature"in _&&i(5,h=_.feature)},[r,a,s,l,c,h,d]}class Jl extends ue{constructor(e){super(),le(this,e,Yl,Xl,ne,{title:0,date:1,link:2,excerpt:3,feature:5})}}function Ql(n){let e;return{c(){e=dt("main"),e.innerHTML='<div id="map" class="svelte-1hq6thp"></div>'},m(i,r){tt(i,e,r)},p:pt,i:pt,o:pt,d(i){i&&Q(e)}}}let ji,ts;function $l(n,e,i){var r={mapIconUrl:'<?xml version="1.0" encoding="UTF-8"?><svg id="d" xmlns="http://www.w3.org/2000/svg" width="30" height="auto" viewBox="0 0 179.368 176.383"><path d="m179.02,106.984l-.667-6.639c-2.492-12.952-9.617-24.553-20.042-32.633-11.702-9.702-26.937-14.051-41.997-11.987-15.144,1.066-29.174,8.34-38.774,20.1-10.451,12.785-14.65,26.618-12.485,42.606l2.788,50.013c.667,6.639,3.711,9.127,9.741,7.963l54.603-7.161c13.775-1.942,25.39-8.697,34.846-20.264,9.953-12.176,13.543-26.507,11.987-41.997Z" fill="#303030"/><path d="m247.058,187.759l-3.985-4.352c-8.553-7.795-19.413-11.921-30.549-11.605-12.838-.098-25.125,5.691-33.869,15.957-9.332,9.602-6.996,20.498-6.987,34.502,0,15.232,8.038,25.845,18,36l17.543,38.298c3.985,4.352,7.305,4.352,10.626,0l16.831-38.298c7.969-9.429,27-31.219,27-45,0-14.507-5.313-15.347-14.61-25.502Z" fill="#2d84cb"/><path d="m125.895,21.883l-6-6C107.016,5.135,90.664-.552,73.895-.117c-19.331-.135-37.832,7.846-51,22C8.843,35.122.882,53.576.895,72.883c0,21,7,38,22,52l43,47c6,6,11,6,16,0l48-51c12-13,18-29,18-48,0-20-8-37-22-51Z" fill="#3184c6"/><circle cx="75.129" cy="69.872" r="37.619" fill="#fff"/><circle cx="73.895" cy="73.883" r="2" fill="#fff"/></svg>',mapIconColor:"#cc756b",mapIconColorInnerCircle:"#fff",pinInnerCircleRadius:28},a=L.divIcon({className:"leaflet-data-marker",html:L.Util.template(r.mapIconUrl,r),iconAnchor:[12,32],iconSize:[25,30],popupAnchor:[0,-28]});bi(()=>{ji=L.map("map",{renderer:L.canvas()}).setView([13.086066,77.609997],7);var l=L.tileLayer("https://api.mapbox.com/styles/v1/rungdung/clftq8tyw001r01nwuzgk0gic/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoicnVuZ2R1bmciLCJhIjoiY2tqeWh6cXF4MDgzMjJvbWVmbGQzYjAwMyJ9.U-aJyoqyKvTXlhVk43jV1A",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, Mapbox Imagery',maxZoom:20,minZoom:3,maxBounds:[[12.846638,77.125397],[13.283409,78.016663]],renderer:L.canvas()});l.addTo(ji),ts=L.markerClusterGroup().addTo(ji),s()});async function s(){var h=await(await fetch("HWdb_geocoded.geojson")).json();L.geoJSON(h,{onEachFeature:(c,d)=>{d.setIcon(a);let _=document.createElement("div");new Jl({target:_,props:{title:c.properties.title,date:c.properties.date,link:c.properties.link,excerpt:c.properties.excerpt,feature:c}}),d.bindPopup(_)}}).addTo(ts)}return[s]}let tu=class extends ue{constructor(e){super(),le(this,e,$l,Ql,ne,{loadSavedData:0})}get loadSavedData(){return this.$$.ctx[0]}};function uo(){const n=new Map,{subscribe:e,set:i,update:r}=q(n);return{subscribe:e,set:i,update:r,add:(s,l)=>(r(h=>(h.set(l,s),h)),n),get:s=>n.get(s)||null,getAll:()=>Array.from(n.values()),delete:s=>{let l=!1;return r(h=>(h.delete(s),l=!0,h)),l},count:()=>n.size}}function eu(){const n=new Map,{subscribe:e,set:i,update:r}=q(n),a={subscribe:e,set:i,update:r,add:(s,l)=>{if(typeof l!="string"){const h=Array.from(l),c=h[0],d=h[1];if(c.connected.update(_=>_.add(d)),d.connected.update(_=>_.add(c)),a.match(...Array.from(l)).length)return}r(h=>(h.set(l,s),h))},getAll:()=>Array.from(n.values()),get:s=>n.get(s)||null,match:(...s)=>Array.from(n.keys()).filter(l=>l==="cursor"?!1:s.every(h=>h?l.has(h):!0)),delete:s=>{if(typeof s!="string"){const h=Array.from(s),c=h[0],d=h[1];c.connected.update(_=>(_.delete(d),_)),d.connected.update(_=>(_.delete(c),_))}let l=!1;return r(h=>(h.delete(s),l=!0,h)),l},count:()=>n.size};return a}function Sa(n){const{id:e,inputs:i,outputs:r,resizable:a,dimensions:s,editable:l,hidden:h,direction:c,zIndex:d,position:_,selectionColor:p,borderWidth:v,edge:g}=n,{bgColor:b,borderColor:w,rotation:k,borderRadius:M,connections:O,textColor:I,locked:Z,group:D}=n,H=uo(),G=(ht="self")=>{$(H).forEach(nt=>{(ht==="self"||$(nt.direction)===ht)&&nt.recalculatePosition()})};return{id:typeof e=="string"&&e.slice(0,2)==="N-"?e:`N-${e}`,position:q({x:(_==null?void 0:_.x)||0,y:(_==null?void 0:_.y)||0}),dimensions:{width:q((s==null?void 0:s.width)||0),height:q((s==null?void 0:s.height)||(s==null?void 0:s.width))},group:q(D||null),locked:q(Z||!1),selectable:q(!0),inputs:q(i),outputs:q(r),connectable:q(!0),deletable:q(!0),recalculateAnchors:G,rotation:q(k||0),hideable:q(!0),moving:q(!1),resizingWidth:q(!1),resizingHeight:q(!1),rotating:q(!1),focusable:q(!0),editable:q(l||!1),resizable:q(a),anchors:H,zIndex:q(d||2),ariaLabel:`Node ${e}`,collapsed:q(!1),edge:g||null,hidden:q(h),collapsible:q(!0),borderRadius:q(M),bgColor:q(b||null),direction:q(c),label:q(n.label||""),borderColor:q(w||null),borderWidth:q(v),selectionColor:q(p||null),textColor:q(I||null),connections:q(O)}}const iu=10,nu=100,ou=50,su="#000",ru="#fff",au="12px",lu=22,uu=1.4,hu=40;function cu(n,e){const i=[n,e].sort();return`${i[0]}+${i[1]}`}function nr(n,e,i){var h,c,d,_,p;const{source:r,target:a}=n,l={id:r.id&&a.id?cu(r.id,a.id):"cursor",target:n.target,source:n.source,component:e,type:q((i==null?void 0:i.type)||null),color:(i==null?void 0:i.color)||q(null),width:q((i==null?void 0:i.width)||0),animated:q((i==null?void 0:i.animated)||!1)};if(i!=null&&i.disconnect&&(l.disconnect=!0),i!=null&&i.label){const v={text:q(i==null?void 0:i.label.text),color:q(((h=i==null?void 0:i.label)==null?void 0:h.color)||su),textColor:q(((c=i==null?void 0:i.label)==null?void 0:c.textColor)||ru),fontSize:q(((d=i==null?void 0:i.label)==null?void 0:d.fontSize)||au),dimensions:{width:q(((_=i==null?void 0:i.label.dimensions)==null?void 0:_.width)||nu),height:q(((p=i==null?void 0:i.label.dimensions)==null?void 0:p.height)||ou)},borderRadius:q((i==null?void 0:i.label.borderRadius)||iu)};l.label=v}return l}function fu(n,e){const i=n.clientX-e.clientX,r=n.clientY-e.clientY;return Math.sqrt(i*i+r*r)}function du(){const n=()=>Math.floor(Math.random()*256),e=n(),i=n(),r=n();return`rgb(${e},${i},${r})`}const _u={"(":"round","([":"stadium","[[":"subroutine","[(":"cylindrical","((":"circle","{":"rhombus","{{":"hexagon"},or={"-":"straight","~":"bezier"},xa={"(":")","[":"]","{":"}"},mu=/[-=~]*>(?:\s*\|(.+?)\|)?/g,pu=n=>{const e=n.split(`
`),i={parentNodes:[],nodeList:{}};for(const r of e){const{parentNodes:a,childNodes:s,edge:l}=gu(r);for(const h of a){i.nodeList[h.id]||i.parentNodes.push(h);for(const c of s){if(i.nodeList[h.id]){if(i.nodeList[c.id]&&i.nodeList[c.id].children.some(({node:d})=>d.id===h.id))throw new Error("Circular reference detected");i.nodeList[h.id].children.push({node:i.nodeList[c.id]||c,...l})}else h.children.push({node:i.nodeList[c.id]||c,...l}),i.nodeList[h.id]=h;i.nodeList[c.id]?i.nodeList[c.id].parents.push({node:i.nodeList[h.id]||h}):(c.parents.push({node:i.nodeList[h.id]||h}),i.nodeList[c.id]=c),i.parentNodes=i.parentNodes.filter(d=>d.id!==c.id)}}}return i},gu=n=>{const e=[],i=[],r=n.trim();let a="";const s=r.match(mu);if(s)a=s[0];else throw new Error("Invalid edge");const[l,h]=r.split(a);for(const d of l.split("&"))e.push(sr(d));for(const d of h.split("&"))i.push(sr(d));const c=yu(a);return{parentNodes:e,childNodes:i,edge:c}},sr=n=>{n=n.trim();let e="",i="";const r={shape:""},a=[],s=n.split("|"),l=s[0];let h=s[1];const c=s[2];for(let d=0;d<l.length;d++)if(vu(l[d]))a.push(l[d]);else if(xa[a[a.length-1]]===l[d]){i=_u[a.join("")];break}else e+=l[d];return i||(i="default"),r.shape=i,h||(h="Default"),c?r.props=c:r.content=e,{id:e,data:r,type:h,children:[],parents:[],depth:0,nesting:0}},yu=n=>{n=n.trim();let e="";const[i,r]=n.split("|"),a=i[0];if(a in or)e=or[a];else throw new Error("Not a valid edge type");return r?{shape:e,content:r.trim(),length:Math.floor((i.trim().length-1)/2)}:{shape:e,length:Math.floor((i.trim().length-1)/2)}};function vu(n){return n in xa}function bu(){return Math.random().toString(36).substring(7)}function rr(n,e=1){const i=Math.pow(10,e);return Math.round(n*i)/i}function wu(n,e){const i=Math.sign(n.x).toString(),r=Math.sign(n.y).toString(),a=Math.sign(e.x).toString(),s=Math.sign(e.y).toString();return`${i}${r}${a}${s}`}function Lu(n,e){return{1001:`a ${n} ${n} 0 0 1 ${n} ${n}`,"0110":`a ${n} ${n} 0 0 0 ${n} ${n}`,"100-1":`a ${n} ${n} 0 0 0 ${n} -${n}`,"0-110":`a ${n} ${n} 0 0 1 ${n} -${n}`,"-1001":`a ${n} ${n} 0 0 0 -${n} ${n}`,"01-10":`a ${n} ${n} 0 0 1 -${n} ${n}`,"-100-1":`a ${n} ${n} 0 0 1 -${n} -${n}`,"0-1-10":`a ${n} ${n} 0 0 0 -${n} -${n}`}[e]||""}function ar(n,e){const i=e*(Math.PI/180),r=n.x*Math.cos(i)-n.y*Math.sin(i),a=n.x*Math.sin(i)+n.y*Math.cos(i);return{x:r,y:a}}const Cu=(n,e,i,r)=>n+` l ${e} ${i} `+r,Oe=q({x:0,y:0}),es=q(0),ai=q(!1),Ta=ao({x:0,y:0},n=>{const e=s=>{n({x:s.clientX,y:s.clientY})},i=s=>{if(s.touches.length===2){const l=fu(s.touches[0],s.touches[1]);es.set(l);const h={x:s.touches[0].clientX,y:s.touches[0].clientY};n(h)}else if(s.touches.length===1){const l=s.touches[0].clientX,h=s.touches[0].clientY;n({x:l,y:h}),ai.set(!0)}},r=s=>{i(s),window.addEventListener("touchend",a),window.addEventListener("touchmove",i)},a=()=>{ai.set(!1),es.set(0),window.removeEventListener("touchmove",i)};return document.addEventListener("mousemove",e),window.addEventListener("touchstart",r,!0),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("touchstart",r),window.removeEventListener("touchmove",i),window.removeEventListener("touchend",a)}});function Go(n){const e=n.style.width,i=n.style.height;n.style.width="fit-content",n.style.height="fit-content";const r=n.offsetWidth,a=n.offsetHeight;return n.style.width=e,n.style.height=i,[r,a]}function Ea(n,e,i,r,a){const s={x:0,y:0},l=r.x-a.left-a.width/2,h=r.y-a.top-a.height/2,c=(l-i.x)/n,d=(h-i.y)/n;return s.x=l-c*e,s.y=h-d*e,s}const Pu=3,ku=.1,Tn={north:{x:0,y:-1},south:{x:0,y:1},east:{x:1,y:0},west:{x:-1,y:0},self:{x:0,y:0}};function za(n,e,i){const r=e*i,a=n-r;return Number(Math.max(ku,Math.min(Pu,a)).toFixed(9))}const po=(n,e,i,r,a,s,l)=>{const{clientX:h,clientY:c}=n,d=s,_=h-i,p=c-e,v=l.x,g=l.y,b=r*(1-s)/2,w=a*(1-s)/2,k=_-v-b,M=p-g-w,O=k/d,I=M/d;return{x:O,y:I}};function Mu(n,e,i){const{top:r,left:a,width:s,height:l}=$(n),h=$(e.scale),c=$(e.translation);return{scaled:po({clientX:i.x,clientY:i.y},r,a,s,l,h,c),scale:h}}function Su(n,e,i){const{scale:r,translation:a}=i,s=$(r),l=$(a),h=e.x-n.x,c=e.y-n.y,d=l.x+h*s,_=l.y+c*s;return{x:d,y:_}}function xu(n,e){return n.x*e.x+n.y*e.y}function Tu(n,e,i){const r=[],a=e.x-n.x,s=e.y-n.y,l=zu(n.direction,e.direction),h=xu(n.direction,e.direction)===0,c=Eu(n,e),d=ce(n.direction,-1,-1),_=ce(e.direction,-1,-1),p={x:Math.abs(n.direction.y),y:Math.abs(n.direction.x)},v=ce(n.direction,a-i*n.direction.x*(h?1:l?0:2),s-i*n.direction.y*(h?1:l?0:2)),g=ce(e.direction,a+i*e.direction.x*(h?1:l?0:2),s+i*e.direction.y*(h?1:l?0:2)),b=Math.sign(v.x)===-1||Math.sign(v.y)===-1,w=Math.sign(g.x)===1||Math.sign(g.y)===1,k=Math.abs(a),M=Math.abs(s),O=ce(n.direction,i,i),I=ce(_,i,i),Z=ce(e.direction,i,i),D=ce(n.direction,k,M),H=ce(_,k,M),G=ce(n.direction,k/2,M/2),X=ce(_,k/2,M/2),Y=ce(p,a,s),ht=!c&&!w&&!b,nt=n.x+O.x,A=n.y+O.y,ot=e.x+Z.x,E=e.y+Z.y;if(b&&r.push(O),c&&!w&&!b)r.push(D),r.push(H);else if(l)b||r.push(ce(n.direction,i+k,i+M)),r.push(Y),w||r.push(ce(_,i+k,i+M));else if(ht)r.push(G),r.push(Y),r.push(X);else if(b&&w)if(h){const at=Math.abs(nt-ot),F=Math.abs(A-E);r.push(ce(e.direction,k<i*2?e.direction.x*(a+e.direction.x*i):k+i,M<i*2?e.direction.y*(s+e.direction.y*i):M+i)),r.push(ce(d,at,F))}else{const at=Math.abs(nt-ot),F=Math.abs(A-E);r.push(ce(p,a/2,s/2)),r.push(ce(e.direction,at,F)),r.push(ce(p,a/2,s/2))}else if(b){const at=Math.abs(nt-e.x),F=Math.abs(A-e.y);r.push(ce(_,k<i*2?k-i:k/2,M<i*2?M-i:M/2)),r.push(ce(d,at,F)),r.push(ce(_,Math.max(i,k/2),Math.max(i,M/2)))}else if(w){const at=Math.abs(ot-n.x),F=Math.abs(E-n.y);r.push(ce(n.direction,Math.max(i,k/2),Math.max(i,M/2))),r.push(ce(e.direction,at,F)),r.push(ce(n.direction,k<i*2?k-i:k/2,M<i*2?M-i:M/2))}return w&&r.push(I),r}function Eu(n,e){const{x:i,y:r}=n.direction,{x:a,y:s}=e.direction,l=e.x-n.x,h=e.y-n.y;return i*s===a*r?!1:Math.sign(h)===Math.sign(r+s)!=(Math.sign(l)===Math.sign(i+a))}function ce(n,e,i){return{x:n.x*e,y:n.y*i}}function zu(n,e){return n.x===e.x&&n.y===e.y}function Au(n,e){const{width:i,height:r}=n,{top:a,left:s,right:l,bottom:h}=e,c=l-s,d=h-a;if(!c||!d)return{x:null,y:null,scale:null};const _=s+c/2,p=a+d/2,v=Math.min(i/c,r/d)*.8,g=i/2,b=r/2,w=g-_,k=b-p;return{x:w*v,y:k*v,scale:v}}const Qn=(n,e,i)=>Math.min(Math.abs(n||e)/2,i);function Fo(n){const i=n.getTotalLength()/2;return n.getPointAtLength(i)}function Ou(n,e,i,r){return An([n,e,i,r],([s,l,h,c])=>{const d={clientX:s.x,clientY:s.y};return po(d,l.top,l.left,l.width,l.height,c,h)})}function Iu(n,e,i,r){const a=q(1/0),s=q(1/0),l=q(-1/0),h=q(-1/0),c=q({top:1/0,left:1/0,right:-1/0,bottom:-1/0});let d,_=$(e),p=$(i),v=$(r),g=_.width/p,b=_.height/p;function w(){const{x:M,y:O}=po({clientX:_.left,clientY:_.top},_.top,_.left,_.width,_.height,p,v),I=$(c);a.set(Math.min(I.top,O)),s.set(Math.min(I.left,M)),l.set(Math.max(I.right,M+g)),h.set(Math.max(I.bottom,b+O))}function k(M=!1){let O=1/0,I=1/0,Z=-1/0,D=-1/0;for(const H of n.getAll()){const{x:G,y:X}=$(H.position),Y=$(H.dimensions.width),ht=$(H.dimensions.height);I=Math.min(I,G),O=Math.min(O,X),Z=Math.max(Z,G+Y),D=Math.max(D,X+ht)}c.set({top:O,left:I,right:Z,bottom:D}),w(),M&&(d=requestAnimationFrame(()=>k(M)))}return n.subscribe(M=>{k();for(const O of M.values())O.dimensions.width.subscribe(()=>{k()}),O.dimensions.height.subscribe(()=>{k()})}),ai.subscribe(M=>{M&&k(M),M||cancelAnimationFrame(d)}),e.subscribe(()=>{_=$(e),g=_.width/p,b=_.height/p,w()}),i.subscribe(()=>{p=$(i),g=_.width/p,b=_.height/p,w()}),r.subscribe(()=>{v=$(r),w()}),{top:a,left:s,right:l,bottom:h,nodeBounds:c}}function Nu(n,e,i){const{width:r,height:a,top:s,left:l}=n,h={clientX:r/2,clientY:a/2};return po(h,s,l,r,a,i,e)}function Aa(n,e){const{zoom:i,editable:r,translation:a,direction:s,locked:l,edge:h}=e,c=q({x:(a==null?void 0:a.x)||0,y:(a==null?void 0:a.y)||0}),d=q({top:0,left:0,width:0,height:0,bottom:0,right:0}),_=q(i),p=uo(),v=Iu(p,d,_,c),g=An([d,c,_],([w,k,M])=>Nu(w,k,M));return{id:n,nodes:p,edges:eu(),transforms:{translation:c,scale:_},maxZIndex:q(2),dimensions:d,bounds:v,center:g,direction:s||"LR",editable:r||!1,edge:h||null,editing:q(null),cursor:Ou(Ta,d,c,_),locked:q(l||!1),groups:q({selected:{parent:q(null),nodes:q(new Set)},hidden:{parent:q(null),nodes:q(new Set)}}),groupBoxes:uo(),activeGroup:q(null),initialNodePositions:q([])}}const Wo=uo(),$n=10;function Oa(n){const e=$(n);return Array.from(e).map(r=>$(r.position))}function Du(n,e){let i;const r=$(n.groups),a=$(n.activeGroup);if(!a)return;const s=r[a].nodes;if(!s)return;const l=$(n.initialNodePositions),{x:h,y:c}=$(Oe),d=Array.from($(s)),_=$(n.groupBoxes);d.forEach(v=>v.moving.set(!0)),p();function p(){const v=$(n.cursor);let g=v.x-h,b=v.y-c;e&&(g-=g%e,b-=b%e);const w={x:g,y:b};d.forEach((k,M)=>{const{group:O,position:I}=k,Z=l[M];let D;if(a==="selected"){const H=$(O);H&&(D=_.get(H))}if(!D)Ia(Z,w,I);else{const H=$(k.dimensions.width),G=$(k.dimensions.height),X=Da(D,H,G);Na(Z,w,I,X)}}),$(ai)?i=requestAnimationFrame(p):cancelAnimationFrame(i)}}function Ia(n,e,i){i.set({x:n.x+e.x,y:n.y+e.y})}function Na(n,e,i,r){i.set({x:Math.min(Math.max(r.left,n.x+e.x),r.right),y:Math.min(Math.max(r.top,n.y+e.y),r.bottom)})}function Da(n,e,i){const{x:r,y:a}=$(n.position);return{left:r+$n,right:r+$(n.dimensions.width)-e-$n,top:a+$n,bottom:a+$(n.dimensions.height)-i-$n}}function lr(n=1,e,i,r=.1){const a=$(e),{width:s,height:l,top:h,left:c}=a,d=i.scale,_=$(i.translation),p=$(d),v=za(p,n,r),g=Ea(p,v,_,{x:s/2+c,y:l/2+h},a);d.set(v),i.translation.set(g)}function Za(n,e,i,r,a,s,l,h,c,d,_,p){const{width:v,height:g}=a,{x:b,y:w}=r,k=$(e.position),M=q({x:b-k.x+v/2,y:w-k.y+g/2}),O=An([e.position,M],([Y,ht])=>({x:Y.x+ht.x,y:Y.y+ht.y})),I=n.transforms,Z=n.dimensions,D=q(c||"self"),H=()=>{const Y=document.getElementById(i),ht=$(D),nt=Tn[ht];if(!Y)return;const{x:A,y:ot,width:E,height:at}=Y.getBoundingClientRect(),F=$(M),Zt=$(O),{scaled:lt,scale:K}=Mu(Z,I,{x:A,y:ot}),et=lt.x-Zt.x,bt=lt.y-Zt.y;M.set({x:F.x+et+E/K/2+nt.x*E/K/2,y:F.y+bt+at/K/2+nt.y*at/K/2})},G=An([e.moving,e.resizingWidth,e.resizingHeight,e.rotating],([Y,ht,nt,A])=>Y||ht||nt||A),X=An([e.rotation],([Y])=>Y);return{id:i,position:O,offset:M,direction:D,dynamic:q(d||!1),type:h,edge:l,moving:G,mounted:q(!1),recalculatePosition:H,connected:q(new Set),store:s||null,inputKey:_||null,edgeColor:p||q(null),rotation:X,node:e}}function Zu(n){const e=JSON.parse(n),i=Aa(e.id,{...e,initialZoom:e.transforms.scale});return Object.entries(e.nodes).forEach(([r,a])=>{const l=Sa(a);Object.entries(a.anchors).forEach(([h,c])=>{const d=Za(l,h,c.position,{width:0,height:0},c.input,c.direction,c.dynamic);l.anchors.add(d,h)}),i.nodes.add(l,r)}),Object.entries(e.edges).forEach(([r,a])=>{i.edges.add(a,r)}),i}function Bu(n){let e;return{c(){e=dt("div"),S(e,"class","svelvet-anchor svelte-19t6skv"),Nt(e,"output",n[0]),Nt(e,"input",n[1]),Nt(e,"connected",n[3]),Nt(e,"connecting",n[2]),Nt(e,"hovering",n[4]),J(e,"--prop-anchor-color",n[5])},m(i,r){tt(i,e,r)},p(i,[r]){r&1&&Nt(e,"output",i[0]),r&2&&Nt(e,"input",i[1]),r&8&&Nt(e,"connected",i[3]),r&4&&Nt(e,"connecting",i[2]),r&16&&Nt(e,"hovering",i[4]),r&32&&J(e,"--prop-anchor-color",i[5])},i:pt,o:pt,d(i){i&&Q(e)}}}function Ru(n,e,i){let{output:r}=e,{input:a}=e,{connecting:s}=e,{connected:l}=e,{hovering:h}=e,{bgColor:c}=e;return n.$$set=d=>{"output"in d&&i(0,r=d.output),"input"in d&&i(1,a=d.input),"connecting"in d&&i(2,s=d.connecting),"connected"in d&&i(3,l=d.connected),"hovering"in d&&i(4,h=d.hovering),"bgColor"in d&&i(5,c=d.bgColor)},[r,a,s,l,h,c]}class Hu extends ue{constructor(e){super(),le(this,e,Ru,Bu,ne,{output:0,input:1,connecting:2,connected:3,hovering:4,bgColor:5})}}const Gu=n=>({linked:n[0]&512,hovering:n[0]&1024,connecting:n[0]&2048}),ur=n=>{var e;return{linked:((e=n[9])==null?void 0:e.size)>=1,hovering:n[10],connecting:n[11]}};function hr(n){var r;let e,i;return e=new Hu({props:{output:n[2],input:n[1],connecting:n[11],hovering:n[10],bgColor:n[0],connected:((r=n[9])==null?void 0:r.size)>=1}}),{c(){Dt(e.$$.fragment)},m(a,s){Ot(e,a,s),i=!0},p(a,s){var h;const l={};s[0]&4&&(l.output=a[2]),s[0]&2&&(l.input=a[1]),s[0]&2048&&(l.connecting=a[11]),s[0]&1024&&(l.hovering=a[10]),s[0]&1&&(l.bgColor=a[0]),s[0]&512&&(l.connected=((h=a[9])==null?void 0:h.size)>=1),e.$set(l)},i(a){i||(B(e.$$.fragment,a),i=!0)},o(a){W(e.$$.fragment,a),i=!1},d(a){It(e,a)}}}function Fu(n){let e,i,r=!n[5]&&hr(n);return{c(){r&&r.c(),e=Pe()},m(a,s){r&&r.m(a,s),tt(a,e,s),i=!0},p(a,s){a[5]?r&&(re(),W(r,1,1,()=>{r=null}),ae()):r?(r.p(a,s),s[0]&32&&B(r,1)):(r=hr(a),r.c(),B(r,1),r.m(e.parentNode,e))},i(a){i||(B(r),i=!0)},o(a){W(r),i=!1},d(a){r&&r.d(a),a&&Q(e)}}}function Wu(n){let e,i,r,a,s,l;const h=n[50].default,c=Ze(h,n,n[49],ur),d=c||Fu(n);return{c(){var _;e=dt("div"),d&&d.c(),S(e,"id",i=(_=n[8])==null?void 0:_.id),S(e,"class","anchor-wrapper svelte-scazbc"),S(e,"title",r=n[6]||""),Nt(e,"locked",n[4])},m(_,p){tt(_,e,p),d&&d.m(e,null),n[53](e),a=!0,s||(l=[Et(e,"mouseenter",n[51]),Et(e,"mouseleave",n[52]),Et(e,"mousedown",ti(ri(n[23]))),Et(e,"mouseup",ti(n[22]))],s=!0)},p(_,p){var v;c?c.p&&(!a||p[0]&3584|p[1]&262144)&&Re(c,h,_,_[49],a?Be(h,_[49],p,Gu):He(_[49]),ur):d&&d.p&&(!a||p[0]&3623)&&d.p(_,a?p:[-1,-1,-1]),(!a||p[0]&256&&i!==(i=(v=_[8])==null?void 0:v.id))&&S(e,"id",i),(!a||p[0]&64&&r!==(r=_[6]||""))&&S(e,"title",r),(!a||p[0]&16)&&Nt(e,"locked",_[4])},i(_){a||(B(d,_),a=!0)},o(_){W(d,_),a=!1},d(_){_&&Q(e),d&&d.d(_),n[53](null),s=!1,Ie(l)}}}let Uo;const ki=q(null);function Uu(n,e,i){if(e==="self")return;const r=n.parentNode;if(!r)return;r.removeChild(n);const a=document.querySelector(`#anchors-${e}-${i.id}`);a&&(a.appendChild(n),n&&i.recalculateAnchors())}function ju(n,e,i){let r,a,s,l,h=pt,c=()=>(h(),h=se(Pt,T=>i(54,l=T)),Pt),d,_=pt,p,v,g=pt,b=()=>(g(),g=se(a,T=>i(9,v=T)),a),w,k,M,O,I=pt,Z=()=>(I(),I=se(s,T=>i(44,O=T)),s),D,H,G,X;V(n,ki,T=>i(39,d=T)),n.$$.on_destroy.push(()=>h()),n.$$.on_destroy.push(()=>_()),n.$$.on_destroy.push(()=>g()),n.$$.on_destroy.push(()=>I());let{$$slots:Y={},$$scope:ht}=e;const nt=Gt("dynamic"),A=Gt("node"),ot=Gt("edgeStore"),E=Gt("cursorAnchor"),at=Gt("direction"),F=Gt("mounted");V(n,F,T=>i(46,H=T));const Zt=Gt("graph"),lt=Gt("nodeStore"),K=Gt("graphEdge"),et=Gt("nodeConnectEvent");V(n,et,T=>i(40,p=T));const bt=Gt("anchorsMounted");V(n,bt,T=>i(48,X=T));let{bgColor:Mt=null}=e,{id:St=0}=e,{input:gt=!1}=e,{output:mt=!1}=e,{multiple:wt=mt?!0:!gt}=e,{dynamic:it=nt||!1}=e,{edge:jt=null}=e,{inputsStore:Pt=null}=e;c();let{key:Ft=null}=e,{outputStore:ut=null}=e,{connections:vt=[]}=e,{edgeColor:Bt=q(null)}=e,{edgeLabel:te=""}=e,{locked:Vt=!1}=e,{nodeConnect:fe=!1}=e,{edgeStyle:R=null}=e,{invisible:de=!1}=e,{direction:Le=at==="TD"?gt?"north":"south":gt?"west":"east"}=e,{title:st=""}=e;const Rt=mo();let xt,yt,Lt=!1,Ne=!1,_e=0,qe=gt===mt?null:gt?"input":"output",me=[];const We=A.edge,ke=A.anchors;V(n,ke,T=>i(45,D=T));const Ee=A.resizingWidth;V(n,Ee,T=>i(43,M=T));const Ce=A.resizingHeight;V(n,Ce,T=>i(42,k=T));const Ge=A.rotating;V(n,Ge,T=>i(41,w=T));const we=A.connections;V(n,we,T=>i(47,G=T)),wa(()=>{const T=`A-${St||ke.count()+1}/${A.id}`;yt||(i(8,yt=Za(Zt,A,T,{x:0,y:0},{width:0,height:0},Pt||ut||null,jt||We||K||null,qe,Le,it,Ft,Bt)),ke.add(yt,yt.id)),yt.recalculatePosition()}),bi(()=>{xt&&yt.recalculatePosition();const T=Array.from($(A.anchors)).reduce((_t,[,j])=>(j.type==="output"&&_t++,_t),0);if(G!=null&&G.length&&!gt){const _t=[];let j=null;G.forEach((zt,ge)=>{zt&&(j===null&&(j=ge),(ge-j)%T===0?(me.push(zt),_t.push(null)):_t.push(zt))}),ft(we,G=_t,G)}ft(bt,X++,X)}),La(()=>{xt&&yt.recalculatePosition()}),_o(()=>{Xt(),cancelAnimationFrame(Uo)});function De(T){if(!r){if(v!=null&&v.size&&!wt){ot.delete("cursor"),T.shiftKey||Xe(!1);return}d&&li(T)}}function Ve(T){if(!Vt){if(v!=null&&v.size&&!wt&&!d)return hi();if(!d)return Ke();li(T)}}function Ke(){gt===mt?(ft(ki,d={anchor:yt,store:null,key:null},d),Ue(yt,E)):gt?(ft(ki,d={anchor:yt,store:Pt,key:Ft},d),Ue(E,yt)):mt&&(ft(ki,d={anchor:yt,store:ut,key:null},d),Ue(yt,E))}function Ue(T,_t,j=!1){const zt={color:Bt,label:{text:te}};j&&(zt.disconnect=!0),R&&(zt.type=R);const ge=nr({source:T,target:_t},(T==null?void 0:T.edge)||null,zt);ot.add(ge,"cursor")}function li(T){if(ot.delete("cursor"),!d)return;const _t=d.anchor.type;if(d.anchor===yt||_t===yt.type&&_t){Xe(!1);return}yt.recalculatePosition();let j,zt;gt===mt?_t==="input"?(j=yt,zt=d.anchor):(j=d.anchor,zt=yt):gt?(j=d.anchor,zt=yt):(j=yt,zt=d.anchor);const ge=ei(j,zt);ge&&ui(),T.shiftKey||Xe(ge)}function ei(T,_t){if(T===_t||$(T.connected).has(yt))return!1;const j={color:Bt,label:{text:te}};R&&(j.type=R);const zt=nr({source:T,target:_t},(T==null?void 0:T.edge)||null,j);return!T.node||!_t.node?!1:(ot.add(zt,new Set([T,_t,T.node,_t.node])),!0)}function ui(){if(gt&&d&&d.store)l&&Ft&&Pt&&typeof Pt.set=="function"&&typeof Pt.update=="function"&&ft(Pt,l[Ft]=d.store,l);else if(mt&&d&&d.store){const{store:T,key:_t}=d;T&&_t&&typeof T.update=="function"&&T.update(j=>(ut&&(j[_t]=ut),j))}}function ze(){l&&Ft&&l[Ft]&&ft(Pt,l[Ft]=q($(l[Ft])),l)}function Xe(T){(T||!p)&&(ft(ki,d=null,d),ft(et,p=null,p))}function Kt(){Lt&&(xt&&yt.recalculatePosition(),Uo=requestAnimationFrame(Kt))}function Xt(){ot.delete("cursor"),ot.match(yt).forEach(_t=>ot.delete(_t)),Xe(!1),ze()}function hi(){if($(yt.connected).size>1)return;const T=Array.from($(yt.connected))[0];if(T.type!=="input")if(Xt(),T.type==="output"){Ue(T,E,!0),ze();const _t=T.store;ft(ki,d={anchor:T,store:_t,key:null},d)}else Ue(T,E,!0),ft(ki,d={anchor:T,store:null,key:null},d)}function ii(){me.forEach((T,_t)=>{if(!T)return;Je(T)&&i(24,vt[_t]=null,vt)}),i(38,me=[]),i(38,me=me.filter(T=>T!==null))}function ni(){vt.forEach((T,_t)=>{if(!T)return;Je(T)&&i(24,vt[_t]=null,vt)}),i(24,vt=vt.filter(T=>T!==null))}const Je=T=>{let _t,j,zt=null;Array.isArray(T)?(_t=T[0].toString(),j=T[1].toString()):(_t=T.toString(),j=null);const ge=`N-${_t}`,Ae=lt.get(ge);if(!Ae)return!1;if(j){const Jt=`A-${j}/${ge}`;zt=Ae.anchors.get(Jt)||null}else{const Jt=$(Ae.anchors),ye=Array.from(Jt.values());if(!ye.length)return!1;zt=ye.reduce((Yt,ee)=>!Yt&&ee.type==="output"?null:ee.type==="output"?Yt:!Yt||$(ee.connected).size<$(Yt.connected).size?ee:Yt,null)}if(!zt)return!1;if(ei(yt,zt),zt.store&&(Pt||ut)){if(gt&&zt.type==="output")l&&Ft&&Pt&&typeof Pt.set=="function"&&typeof Pt.update=="function"&&ft(Pt,l[Ft]=zt.store,l);else if(mt&&zt.type==="input"){const{store:Jt,inputKey:ye}=zt;Jt&&ye&&typeof Jt.update=="function"&&Jt.update(Yt=>(ut&&(Yt[ye]=ut),Yt))}}return!0},N=()=>i(10,Ne=!0),Ut=()=>i(10,Ne=!1);function pe(T){Oi[T?"unshift":"push"](()=>{xt=T,i(7,xt)})}return n.$$set=T=>{"bgColor"in T&&i(0,Mt=T.bgColor),"id"in T&&i(25,St=T.id),"input"in T&&i(1,gt=T.input),"output"in T&&i(2,mt=T.output),"multiple"in T&&i(26,wt=T.multiple),"dynamic"in T&&i(27,it=T.dynamic),"edge"in T&&i(28,jt=T.edge),"inputsStore"in T&&c(i(3,Pt=T.inputsStore)),"key"in T&&i(29,Ft=T.key),"outputStore"in T&&i(30,ut=T.outputStore),"connections"in T&&i(24,vt=T.connections),"edgeColor"in T&&i(31,Bt=T.edgeColor),"edgeLabel"in T&&i(32,te=T.edgeLabel),"locked"in T&&i(4,Vt=T.locked),"nodeConnect"in T&&i(33,fe=T.nodeConnect),"edgeStyle"in T&&i(34,R=T.edgeStyle),"invisible"in T&&i(5,de=T.invisible),"direction"in T&&i(35,Le=T.direction),"title"in T&&i(6,st=T.title),"$$scope"in T&&i(49,ht=T.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&256|n.$$.dirty[1]&256&&i(11,r=(d==null?void 0:d.anchor)===yt),n.$$.dirty[0]&256&&b(i(13,a=yt&&yt.connected)),n.$$.dirty[0]&256&&Z(i(12,s=yt==null?void 0:yt.direction)),n.$$.dirty[0]&134217856|n.$$.dirty[1]&8192&&it&&xt&&Uu(xt,O,A),n.$$.dirty[0]&16777218|n.$$.dirty[1]&196608&&!gt&&X&&X===A.anchors.count()){const T=G==null?void 0:G.pop();T&&vt.push(T),i(24,vt),i(1,gt),i(48,X),i(47,G)}n.$$.dirty[0]&16777216|n.$$.dirty[1]&32768&&H===lt.count()&&vt.length&&ni(),n.$$.dirty[1]&516&&fe&&p&&De(p),n.$$.dirty[1]&32896&&H===lt.count()&&me.length&&ii(),n.$$.dirty[0]&896|n.$$.dirty[1]&24576&&xt&&yt.recalculatePosition(),n.$$.dirty[1]&7200&&(!Lt&&(M||k||w)?(i(36,Lt=!0),Kt()):!M&&!k&&Lt&&!w&&(i(36,Lt=!1),cancelAnimationFrame(Uo))),n.$$.dirty[0]&768|n.$$.dirty[1]&64&&v&&(v.size<_e?Rt("disconnection",{node:A,anchor:yt}):v.size>_e&&Rt("connection",{node:A,anchor:yt}),i(37,_e=v.size))},[Mt,gt,mt,Pt,Vt,de,st,xt,yt,v,Ne,r,s,a,F,et,bt,ke,Ee,Ce,Ge,we,De,Ve,vt,St,wt,it,jt,Ft,ut,Bt,te,fe,R,Le,Lt,_e,me,d,p,w,k,M,O,D,H,G,X,ht,Y,N,Ut,pe]}class mn extends ue{constructor(e){super(),le(this,e,ju,Wu,ne,{bgColor:0,id:25,input:1,output:2,multiple:26,dynamic:27,edge:28,inputsStore:3,key:29,outputStore:30,connections:24,edgeColor:31,edgeLabel:32,locked:4,nodeConnect:33,edgeStyle:34,invisible:5,direction:35,title:6},null,[-1,-1,-1])}}function cr(n){let e,i,r,a,s;return{c(){e=dt("div"),i=Ct(),r=dt("div"),S(e,"class","left svelte-1ryxg7v"),Nt(e,"width",n[0]),S(r,"class","right svelte-1ryxg7v"),Nt(r,"width",n[0])},m(l,h){tt(l,e,h),tt(l,i,h),tt(l,r,h),a||(s=[Ai(n[17].call(null,e,{left:n[4]})),Ai(n[17].call(null,r,{right:n[5]}))],a=!0)},p(l,h){h[0]&1&&Nt(e,"width",l[0]),h[0]&1&&Nt(r,"width",l[0])},d(l){l&&Q(e),l&&Q(i),l&&Q(r),a=!1,Ie(s)}}}function fr(n){let e,i,r,a,s;return{c(){e=dt("div"),i=Ct(),r=dt("div"),S(e,"class","top svelte-1ryxg7v"),Nt(e,"height",n[1]),S(r,"class","bottom svelte-1ryxg7v"),Nt(r,"height",n[1])},m(l,h){tt(l,e,h),tt(l,i,h),tt(l,r,h),a||(s=[Ai(n[17].call(null,e,{top:n[6]})),Ai(n[17].call(null,r,{bottom:n[7]}))],a=!0)},p(l,h){h[0]&2&&Nt(e,"height",l[1]),h[0]&2&&Nt(r,"height",l[1])},d(l){l&&Q(e),l&&Q(i),l&&Q(r),a=!1,Ie(s)}}}function qu(n){let e,i,r;return{c(){e=dt("div"),S(e,"class","svelte-1ryxg7v"),Nt(e,"both",n[8])},m(a,s){tt(a,e,s),i||(r=Ai(n[17].call(null,e,{both:n[8]})),i=!0)},p:pt,d(a){a&&Q(e),i=!1,r()}}}function dr(n){let e,i,r;return{c(){e=dt("div"),S(e,"class","svelte-1ryxg7v"),Nt(e,"rotation",n[2])},m(a,s){tt(a,e,s),i||(r=Ai(n[18].call(null,e)),i=!0)},p(a,s){s[0]&4&&Nt(e,"rotation",a[2])},d(a){a&&Q(e),i=!1,r()}}}function Vu(n){let e,i,r,a,s=n[0]&&cr(n),l=n[1]&&fr(n),h=n[8]&&qu(n),c=n[2]&&dr(n);return{c(){s&&s.c(),e=Ct(),l&&l.c(),i=Ct(),h&&h.c(),r=Ct(),c&&c.c(),a=Pe()},m(d,_){s&&s.m(d,_),tt(d,e,_),l&&l.m(d,_),tt(d,i,_),h&&h.m(d,_),tt(d,r,_),c&&c.m(d,_),tt(d,a,_)},p(d,_){d[0]?s?s.p(d,_):(s=cr(d),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),d[1]?l?l.p(d,_):(l=fr(d),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null),d[8]&&h.p(d,_),d[2]?c?c.p(d,_):(c=dr(d),c.c(),c.m(a.parentNode,a)):c&&(c.d(1),c=null)},i:pt,o:pt,d(d){s&&s.d(d),d&&Q(e),l&&l.d(d),d&&Q(i),h&&h.d(d),d&&Q(r),c&&c.d(d),d&&Q(a)}}}function Ku(n){return n*(180/Math.PI)}function Xu(n,e,i){let r,a,s,l,h,c,d,_,p,v,g,b,w;V(n,Oe,ut=>i(38,_=ut));const k=Gt("graph"),M=Gt("node"),O=Gt("DOMnode");V(n,O,ut=>i(37,c=ut));const I=Gt("resized");let{width:Z=!1}=e,{height:D=!1}=e,{rotation:H=!1}=e,{minHeight:G=0}=e,{minWidth:X=0}=e,Y=Z,ht=Z,nt=D,A=D,ot=Z&&D,E=0,at=0,F=$(M.position);const Zt=M.position;V(n,Zt,ut=>i(32,b=ut));const lt=M.resizingWidth;V(n,lt,ut=>i(31,g=ut));const K=M.resizingHeight;V(n,K,ut=>i(30,v=ut));const et=M.rotating;V(n,et,ut=>i(29,d=ut));const bt=M.rotation;V(n,bt,ut=>i(39,p=ut));const Mt=M.dimensions.height;V(n,Mt,ut=>i(27,l=ut));const St=M.dimensions.width;V(n,St,ut=>i(28,h=ut));const gt=k.cursor;V(n,gt,ut=>i(33,w=ut));let mt,wt,it=1;bi(()=>{c&&i(20,[X,G]=Go(c),X,i(19,G))});function jt(ut,vt){const Bt=Vt=>{Vt.stopPropagation(),Vt.preventDefault(),vt.left||vt.top?i(24,it=-1):i(24,it=1),ft(Oe,_=$(gt),_),i(22,mt=h),i(23,wt=l),i(21,F=b),vt.both?ft(lt,g=!0,g):ft(lt,g=!1,g),ft(lt,g=vt.left||vt.right||vt.both||!1,g),ft(K,v=vt.top||vt.bottom||vt.both||!1,v),c&&i(20,[X,G]=Go(c),X,i(19,G)),window.addEventListener("mouseup",te)},te=()=>{ft(lt,g=!1,g),ft(K,v=!1,v),window.removeEventListener("mouseup",te)};return ut.addEventListener("mousedown",Bt),{destroy(){ut.removeEventListener("mousedown",Bt)}}}function Pt(ut){const vt=te=>{te.stopPropagation(),te.preventDefault(),E=p,ft(Oe,_=$(gt),_);const Vt=_.x-s.x,fe=_.y-s.y;at=Math.atan2(fe,Vt),ft(et,d=!0,d),window.addEventListener("mouseup",Bt)},Bt=()=>{ft(et,d=!1,d),window.removeEventListener("mouseup",Bt)};return ut.addEventListener("mousedown",vt),{destroy(){ut.removeEventListener("mousedown",vt)}}}function Ft(){const ut=$(gt),vt=ut.x-s.x,Bt=ut.y-s.y,te=Math.atan2(Bt,vt),Vt=at-te;return E-Ku(Vt)}return wa(()=>{c&&i(20,[X,G]=Go(c),X,i(19,G)),h<X&&I.set(!1),l<G&&I.set(!1)}),n.$$set=ut=>{"width"in ut&&i(0,Z=ut.width),"height"in ut&&i(1,D=ut.height),"rotation"in ut&&i(2,H=ut.rotation),"minHeight"in ut&&i(19,G=ut.minHeight),"minWidth"in ut&&i(20,X=ut.minWidth)},n.$$.update=()=>{if(n.$$.dirty[0]&1101529088|n.$$.dirty[1]&4&&v){const ut=$(Oe),vt=w,Bt=Math.max(G,wt+(vt.y-ut.y)*it);Bt>G?(I.set(!0),ft(Mt,l=Bt,l)):I.set(!1),it===-1&&ft(Zt,b={x:F.x,y:F.y+vt.y-ut.y},b)}if(n.$$.dirty[0]&24117248|n.$$.dirty[1]&5&&g){const ut=$(Oe),vt=w,Bt=Math.max(X,mt+(vt.x-ut.x)*it);Bt>X?(I.set(!0),ft(St,h=Bt,h)):I.set(!1),it===-1&&ft(Zt,b={x:F.x+vt.x-ut.x,y:F.y},b)}n.$$.dirty[1]&2&&i(26,r=b.x),n.$$.dirty[1]&2&&i(25,a=b.y),n.$$.dirty[0]&503316480&&(s={x:r+h/2,y:a+l/2}),n.$$.dirty[0]&536870912|n.$$.dirty[1]&4&&d&&ft(bt,p=Ft(),p)},[Z,D,H,O,Y,ht,nt,A,ot,Zt,lt,K,et,bt,Mt,St,gt,jt,Pt,G,X,F,mt,wt,it,a,r,l,h,d,v,g,b,w]}class Ba extends ue{constructor(e){super(),le(this,e,Xu,Vu,ne,{width:0,height:1,rotation:2,minHeight:19,minWidth:20},null,[-1,-1])}}function _r(n,e,i){const r=n.slice();return r[30]=e[i],r[32]=i,r}function mr(n,e,i){const r=n.slice();return r[30]=e[i],r[32]=i,r}function pr(n,e,i){const r=n.slice();return r[30]=e[i],r[32]=i,r}function gr(n,e,i){const r=n.slice();return r[30]=e[i],r[32]=i,r}function Yu(n){let e,i=[],r=new Map,a,s,l=[],h=new Map,c,d={length:n[2]};const _=g=>g[32];for(let g=0;g<d.length;g+=1){let b=mr(n,d,g),w=_(b);r.set(w,i[g]=yr(w,b))}let p={length:n[3]};const v=g=>g[32];for(let g=0;g<p.length;g+=1){let b=_r(n,p,g),w=v(b);h.set(w,l[g]=vr(w,b))}return{c(){e=dt("div");for(let g=0;g<i.length;g+=1)i[g].c();a=Ct(),s=dt("div");for(let g=0;g<l.length;g+=1)l[g].c();S(e,"class","input-anchors svelte-j5bq7k"),Nt(e,"top",n[15]),Nt(e,"left",n[17]),S(s,"class","output-anchors svelte-j5bq7k"),Nt(s,"bottom",n[16]),Nt(s,"right",n[18])},m(g,b){tt(g,e,b);for(let w=0;w<i.length;w+=1)i[w]&&i[w].m(e,null);tt(g,a,b),tt(g,s,b);for(let w=0;w<l.length;w+=1)l[w]&&l[w].m(s,null);c=!0},p(g,b){b[0]&32772&&(d={length:g[2]},re(),i=so(i,b,_,1,g,d,r,e,oo,yr,null,mr),ae()),b[0]&32776&&(p={length:g[3]},re(),l=so(l,b,v,1,g,p,h,s,oo,vr,null,_r),ae())},i(g){if(!c){for(let b=0;b<d.length;b+=1)B(i[b]);for(let b=0;b<p.length;b+=1)B(l[b]);c=!0}},o(g){for(let b=0;b<i.length;b+=1)W(i[b]);for(let b=0;b<l.length;b+=1)W(l[b]);c=!1},d(g){g&&Q(e);for(let b=0;b<i.length;b+=1)i[b].d();g&&Q(a),g&&Q(s);for(let b=0;b<l.length;b+=1)l[b].d()}}}function Ju(n){let e,i,r,a={length:n[2]},s=[];for(let _=0;_<a.length;_+=1)s[_]=br(gr(n,a,_));const l=_=>W(s[_],1,1,()=>{s[_]=null});let h={length:n[3]},c=[];for(let _=0;_<h.length;_+=1)c[_]=wr(pr(n,h,_));const d=_=>W(c[_],1,1,()=>{c[_]=null});return{c(){for(let _=0;_<s.length;_+=1)s[_].c();e=Ct();for(let _=0;_<c.length;_+=1)c[_].c();i=Pe()},m(_,p){for(let v=0;v<s.length;v+=1)s[v]&&s[v].m(_,p);tt(_,e,p);for(let v=0;v<c.length;v+=1)c[v]&&c[v].m(_,p);tt(_,i,p),r=!0},p(_,p){if(p[0]&4){const v=a.length;a={length:_[2]};let g;for(g=v;g<a.length;g+=1){const b=gr(_,a,g);s[g]?B(s[g],1):(s[g]=br(b),s[g].c(),B(s[g],1),s[g].m(e.parentNode,e))}for(re(),g=a.length;g<s.length;g+=1)l(g);ae()}if(p[0]&8){const v=h.length;h={length:_[3]};let g;for(g=v;g<h.length;g+=1){const b=pr(_,h,g);c[g]?B(c[g],1):(c[g]=wr(b),c[g].c(),B(c[g],1),c[g].m(i.parentNode,i))}for(re(),g=h.length;g<c.length;g+=1)d(g);ae()}},i(_){if(!r){for(let p=0;p<a.length;p+=1)B(s[p]);for(let p=0;p<h.length;p+=1)B(c[p]);r=!0}},o(_){s=s.filter(Boolean);for(let p=0;p<s.length;p+=1)W(s[p]);c=c.filter(Boolean);for(let p=0;p<c.length;p+=1)W(c[p]);r=!1},d(_){fn(s,_),_&&Q(e),fn(c,_),_&&Q(i)}}}function yr(n,e){let i,r,a;return r=new mn({props:{input:!0,direction:e[15]?"north":"west"}}),r.$on("connection",e[24]),r.$on("disconnection",e[25]),{key:n,first:null,c(){i=Pe(),Dt(r.$$.fragment),this.first=i},m(s,l){tt(s,i,l),Ot(r,s,l),a=!0},p(s,l){e=s},i(s){a||(B(r.$$.fragment,s),a=!0)},o(s){W(r.$$.fragment,s),a=!1},d(s){s&&Q(i),It(r,s)}}}function vr(n,e){let i,r,a;return r=new mn({props:{output:!0,direction:e[15]?"south":"east"}}),r.$on("connection",e[26]),r.$on("disconnection",e[27]),{key:n,first:null,c(){i=Pe(),Dt(r.$$.fragment),this.first=i},m(s,l){tt(s,i,l),Ot(r,s,l),a=!0},p(s,l){e=s},i(s){a||(B(r.$$.fragment,s),a=!0)},o(s){W(r.$$.fragment,s),a=!1},d(s){s&&Q(i),It(r,s)}}}function br(n){let e,i;return e=new mn({}),e.$on("connection",n[20]),e.$on("disconnection",n[21]),{c(){Dt(e.$$.fragment)},m(r,a){Ot(e,r,a),i=!0},i(r){i||(B(e.$$.fragment,r),i=!0)},o(r){W(e.$$.fragment,r),i=!1},d(r){It(e,r)}}}function wr(n){let e,i;return e=new mn({}),e.$on("connection",n[22]),e.$on("disconnection",n[23]),{c(){Dt(e.$$.fragment)},m(r,a){Ot(e,r,a),i=!0},i(r){i||(B(e.$$.fragment,r),i=!0)},o(r){W(e.$$.fragment,r),i=!1},d(r){It(e,r)}}}function Lr(n){let e,i;return e=new Ba({props:{width:!0,height:!0,rotation:!0}}),{c(){Dt(e.$$.fragment)},m(r,a){Ot(e,r,a),i=!0},i(r){i||(B(e.$$.fragment,r),i=!0)},o(r){W(e.$$.fragment,r),i=!1},d(r){It(e,r)}}}function Qu(n){let e,i,r,a,s,l,h,c=`${n[1]}px`,d;const _=[Ju,Yu],p=[];function v(b,w){return b[7]?0:1}i=v(n),r=p[i]=_[i](n);let g=n[6]&&Lr();return{c(){e=dt("div"),r.c(),a=Ct(),s=dt("p"),l=vi(n[5]),h=Ct(),g&&g.c(),S(s,"class","svelte-j5bq7k"),J(s,"color",n[4]),S(e,"class","default-node svelte-j5bq7k"),Nt(e,"selected",n[0]),J(e,"border-radius",c)},m(b,w){tt(b,e,w),p[i].m(e,null),rt(e,a),rt(e,s),rt(s,l),rt(e,h),g&&g.m(e,null),d=!0},p(b,w){r.p(b,w),(!d||w[0]&32)&&Vi(l,b[5]),w[0]&16&&J(s,"color",b[4]),b[6]?g?w[0]&64&&B(g,1):(g=Lr(),g.c(),B(g,1),g.m(e,null)):g&&(re(),W(g,1,1,()=>{g=null}),ae()),(!d||w[0]&1)&&Nt(e,"selected",b[0]),w[0]&2&&c!==(c=`${b[1]}px`)&&J(e,"border-radius",c)},i(b){d||(B(r),B(g),d=!0)},o(b){W(r),W(g),d=!1},d(b){b&&Q(e),p[i].d(),g&&g.d()}}}function $u(n,e,i){let r,a,s,l,h,c,d;const _=Gt("dynamic"),p=Gt("node");let{selected:v}=e;const g=p.label;V(n,g,F=>i(5,c=F));const b=p.borderRadius;V(n,b,F=>i(1,a=F));const w=p.textColor;V(n,w,F=>i(4,h=F));const k=p.inputs;V(n,k,F=>i(2,s=F));const M=p.outputs;V(n,M,F=>i(3,l=F));const O=p.resizable;V(n,O,F=>i(6,d=F));const I=p.direction;V(n,I,F=>i(19,r=F));let Z=$(p.direction)==="TD",D=$(p.direction)==="TD",H=$(p.direction)!=="TD",G=$(p.direction)!=="TD";function X(F){be.call(this,n,F)}function Y(F){be.call(this,n,F)}function ht(F){be.call(this,n,F)}function nt(F){be.call(this,n,F)}function A(F){be.call(this,n,F)}function ot(F){be.call(this,n,F)}function E(F){be.call(this,n,F)}function at(F){be.call(this,n,F)}return n.$$set=F=>{"selected"in F&&i(0,v=F.selected)},n.$$.update=()=>{n.$$.dirty[0]&524288},[v,a,s,l,h,c,d,_,g,b,w,k,M,O,I,Z,D,H,G,r,X,Y,ht,nt,A,ot,E,at]}class th extends ue{constructor(e){super(),le(this,e,$u,Qu,ne,{selected:0},null,[-1,-1])}}const eh=n=>({selected:n[0]&8192}),Cr=n=>({grabHandle:n[57],selected:n[13],destroy:n[54]});function ih(n){let e,i,r,a,s,l,h,c,d,_,p,v,g;const b=n[65].default,w=Ze(b,n,n[64],Cr);return{c(){w&&w.c(),e=Ct(),i=dt("div"),a=Ct(),s=dt("div"),h=Ct(),c=dt("div"),_=Ct(),p=dt("div"),S(i,"id",r=`anchors-west-${n[0].id}`),S(i,"class","anchors left svelte-5e6y3v"),S(s,"id",l=`anchors-east-${n[0].id}`),S(s,"class","anchors right svelte-5e6y3v"),S(c,"id",d=`anchors-north-${n[0].id}`),S(c,"class","anchors top svelte-5e6y3v"),S(p,"id",v=`anchors-south-${n[0].id}`),S(p,"class","anchors bottom svelte-5e6y3v")},m(k,M){w&&w.m(k,M),tt(k,e,M),tt(k,i,M),tt(k,a,M),tt(k,s,M),tt(k,h,M),tt(k,c,M),tt(k,_,M),tt(k,p,M),g=!0},p(k,M){w&&w.p&&(!g||M[0]&8192|M[2]&4)&&Re(w,b,k,k[64],g?Be(b,k[64],M,eh):He(k[64]),Cr),(!g||M[0]&1&&r!==(r=`anchors-west-${k[0].id}`))&&S(i,"id",r),(!g||M[0]&1&&l!==(l=`anchors-east-${k[0].id}`))&&S(s,"id",l),(!g||M[0]&1&&d!==(d=`anchors-north-${k[0].id}`))&&S(c,"id",d),(!g||M[0]&1&&v!==(v=`anchors-south-${k[0].id}`))&&S(p,"id",v)},i(k){g||(B(w,k),g=!0)},o(k){W(w,k),g=!1},d(k){w&&w.d(k),k&&Q(e),k&&Q(i),k&&Q(a),k&&Q(s),k&&Q(h),k&&Q(c),k&&Q(_),k&&Q(p)}}}function nh(n){let e,i,r=`${n[14].y}px`,a=`${n[14].x}px`,s=`rotate(${n[22]}deg)`,l,h,c,d=ih(n);return{c(){e=dt("div"),d&&d.c(),S(e,"id",n[33]),S(e,"class","svelvet-node svelte-5e6y3v"),S(e,"title",n[12]),S(e,"tabindex",0),_n(()=>n[67].call(e)),Nt(e,"selected",n[13]),Nt(e,"locked",n[16]||n[15]),J(e,"top",r),J(e,"left",a),J(e,"z-index",n[17]),J(e,"display",n[20]?"none":"flex"),J(e,"width",n[11]||n[21]?n[19]+"px":"fit-content"),J(e,"height",n[11]||n[21]?n[18]+"px":"fit-content"),J(e,"transform",s),J(e,"--prop-background-color",n[23]||(n[1]||n[2]?null:"transparent")),J(e,"--prop-text-color",n[24]),J(e,"--prop-border-color",n[25]),J(e,"--prop-selection-color",n[26]),J(e,"--prop-border-radius",n[27]?`${n[27]}px`:n[1]||n[2]?null:"0px"),J(e,"--prop-border-width",n[28]||(n[1]||n[2]?null:"0px"))},m(_,p){tt(_,e,p),d&&d.m(e,null),i=ba(e,n[67].bind(e)),n[68](e),l=!0,h||(c=[Et(e,"contextmenu",ti(ri(n[66]))),Et(e,"keydown",hn(ri(n[53]))),Et(e,"mouseup",n[56]),Ai(n[57].call(null,e))],h=!0)},p(_,p){d.p(_,p),(!l||p[0]&4096)&&S(e,"title",_[12]),(!l||p[0]&8192)&&Nt(e,"selected",_[13]),(!l||p[0]&98304)&&Nt(e,"locked",_[16]||_[15]),p[0]&16384&&r!==(r=`${_[14].y}px`)&&J(e,"top",r),p[0]&16384&&a!==(a=`${_[14].x}px`)&&J(e,"left",a),p[0]&131072&&J(e,"z-index",_[17]),p[0]&1048576&&J(e,"display",_[20]?"none":"flex"),p[0]&2623488&&J(e,"width",_[11]||_[21]?_[19]+"px":"fit-content"),p[0]&2361344&&J(e,"height",_[11]||_[21]?_[18]+"px":"fit-content"),p[0]&4194304&&s!==(s=`rotate(${_[22]}deg)`)&&J(e,"transform",s),p[0]&8388614&&J(e,"--prop-background-color",_[23]||(_[1]||_[2]?null:"transparent")),p[0]&16777216&&J(e,"--prop-text-color",_[24]),p[0]&33554432&&J(e,"--prop-border-color",_[25]),p[0]&67108864&&J(e,"--prop-selection-color",_[26]),p[0]&134217734&&J(e,"--prop-border-radius",_[27]?`${_[27]}px`:_[1]||_[2]?null:"0px"),p[0]&268435462&&J(e,"--prop-border-width",_[28]||(_[1]||_[2]?null:"0px"))},i(_){l||(B(d),l=!0)},o(_){W(d),l=!1},d(_){_&&Q(e),d&&d.d(),i(),n[68](null),h=!1,Ie(c)}}}const Pr=new Set(["INPUT","SELECT","BUTTON","TEXTAREA"]);function oh(n,e,i){let r,a,s,l,h,c=pt,d=()=>(c(),c=se(ke,P=>i(71,h=P)),ke),_,p=pt,v=()=>(p(),p=se(we,P=>i(72,_=P)),we),g,b,w=pt,k=()=>(w(),w=se(De,P=>i(73,b=P)),De),M,O,I=pt,Z=()=>(I(),I=se(Ve,P=>i(75,O=P)),Ve),D,H,G,X,Y=pt,ht=()=>(Y(),Y=se(We,P=>i(16,X=P)),We),nt,A=pt,ot=()=>(A(),A=se(Ee,P=>i(78,nt=P)),Ee),E,at,F,Zt=pt,lt=()=>(Zt(),Zt=se(me,P=>i(80,F=P)),me),K,et,bt,Mt=pt,St=()=>(Mt(),Mt=se(Ce,P=>i(82,bt=P)),Ce),gt,mt,wt,it,jt,Pt,Ft,ut,vt,Bt,te,Vt,fe,R;V(n,Oe,P=>i(70,l=P)),V(n,ai,P=>i(77,H=P)),n.$$.on_destroy.push(()=>c()),n.$$.on_destroy.push(()=>p()),n.$$.on_destroy.push(()=>w()),n.$$.on_destroy.push(()=>I()),n.$$.on_destroy.push(()=>Y()),n.$$.on_destroy.push(()=>A()),n.$$.on_destroy.push(()=>Zt()),n.$$.on_destroy.push(()=>Mt());let{$$slots:de={},$$scope:Le}=e;const st=Gt("mounted");V(n,st,P=>i(81,K=P));const Rt=Gt("duplicate");V(n,Rt,P=>i(61,mt=P));const xt=Gt("graphDOMElement");V(n,xt,P=>i(79,at=P));const yt=mo();let{node:Lt}=e,{isDefault:Ne}=e,{useDefaults:_e}=e,{center:qe}=e,{nodeStore:me}=e;lt();let{locked:We}=e;ht();let{groups:ke}=e;d();let{maxZIndex:Ee}=e;ot();let{centerPoint:Ce}=e;St();let{cursor:Ge}=e,{initialNodePositions:we}=e;v();let{activeGroup:De}=e;k();let{editing:Ve}=e;Z();let{dimensionsProvided:Ke=!1}=e,{title:Ue}=e;const li=q(0),ei=Lt.id,ui=Lt.position;V(n,ui,P=>i(63,jt=P));const ze=Lt.dimensions.width;V(n,ze,P=>i(19,gt=P));const Xe=Lt.dimensions.height;V(n,Xe,P=>i(18,et=P));const Kt=Lt.selectionColor;V(n,Kt,P=>i(26,te=P));const Xt=Lt.editable;V(n,Xt,P=>i(76,D=P));const hi=Lt.locked;V(n,hi,P=>i(15,G=P));const ii=Lt.hidden;V(n,ii,P=>i(20,it=P));const ni=Lt.zIndex;V(n,ni,P=>i(17,E=P));const Je=Lt.bgColor;V(n,Je,P=>i(23,ut=P));const N=Lt.borderRadius;V(n,N,P=>i(27,Vt=P));const Ut=Lt.textColor;V(n,Ut,P=>i(24,vt=P));const pe=Lt.group;V(n,pe,P=>i(74,M=P));const T=Lt.borderColor;V(n,T,P=>i(25,Bt=P));const _t=Lt.borderWidth;V(n,_t,P=>i(28,fe=P));const j=Lt.rotation;V(n,j,P=>i(22,Ft=P));const{selected:zt,hidden:ge}=h,Ae=ge.nodes;V(n,Ae,P=>i(62,wt=P));const Jt=zt.nodes;V(n,Jt,P=>i(60,g=P));const ye=q(!1);V(n,ye,P=>i(21,Pt=P));const Yt=q(null);V(n,Yt,P=>i(29,R=P)),$t("node",Lt),$t("anchorsMounted",li),$t("DOMnode",Yt),$t("resized",ye),bi(()=>{if(qe){const P={x:bt.x-gt/2,y:bt.y-et/2};Lt.position.set(P),ai.set(!0),ai.set(!1)}ft(st,K++,K)}),_o(()=>{a&&(g.delete(Lt),Jt.set(g)),ft(st,K--,K)});function ee(){a?(Lt&&g.delete(Lt),Jt.set(g)):(Lt&&g.add(Lt),Jt.set(g))}function Me(P){P.key==="Enter"?ee():P.key==="Backspace"&&(F.delete(Lt.id),me.set(F))}function ci(P){at.focus();const he=P.target;P.touches.length>1||X||G||Pr.has(he.tagName)||(P.preventDefault(),E!==nt&&E!==1/0&&ft(ni,E=ft(Ee,++nt,nt),E),yt("nodeClicked",{node:Lt,e:P}),ft(Oe,l=$(Ge),l),wi(P))}function oi(P){ft(Oe,l=$(Ge),l),at.focus();const he=P.target;E!==nt&&E!==1/0&&ft(ni,E=ft(Ee,++nt,nt),E),!Pr.has(he.tagName)&&(P.preventDefault(),!(X||G)&&(ft(ai,H=!0,H),P.button===2&&D&&ft(Ve,O=Lt,O),wi(P)))}function wi(P){let he,je,Se=!1;const si=M;si&&(he=h[si],je=$(he.parent),Se=je===Lt),Se?ft(De,b=si,b):ft(De,b="selected",b),!P.shiftKey&&a?ft(De,b="selected",b):(!P.shiftKey&&!a&&!P.shiftKey&&(g.clear(),Jt.set(g)),ee()),ft(we,_=Oa(h.selected.nodes),_)}function _i(){me.delete(ei)}const Ye=q(null);V(n,Ye,P=>i(69,s=P)),$t("nodeConnectEvent",Ye);function Xi(P){const he=$(Ge),je=he.x-l.x,Se=he.y-l.y;Math.abs(je)+Math.abs(Se)<4&&yt("nodeReleased",{e:P}),ft(Ye,s=P,s)}function Ii(P){return P.addEventListener("mousedown",oi),P.addEventListener("touchstart",ci),{destroy(){P.removeEventListener("mousedown",oi),P.removeEventListener("touchstart",ci)}}}function pn(P){be.call(this,n,P)}function Yi(){et=this.clientHeight,Xe.set(et),gt=this.clientWidth,ze.set(gt)}function Ji(P){Oi[P?"unshift":"push"](()=>{R=P,Yt.set(R)})}return n.$$set=P=>{"node"in P&&i(0,Lt=P.node),"isDefault"in P&&i(1,Ne=P.isDefault),"useDefaults"in P&&i(2,_e=P.useDefaults),"center"in P&&i(58,qe=P.center),"nodeStore"in P&&lt(i(3,me=P.nodeStore)),"locked"in P&&ht(i(4,We=P.locked)),"groups"in P&&d(i(5,ke=P.groups)),"maxZIndex"in P&&ot(i(6,Ee=P.maxZIndex)),"centerPoint"in P&&St(i(7,Ce=P.centerPoint)),"cursor"in P&&i(59,Ge=P.cursor),"initialNodePositions"in P&&v(i(8,we=P.initialNodePositions)),"activeGroup"in P&&k(i(9,De=P.activeGroup)),"editing"in P&&Z(i(10,Ve=P.editing)),"dimensionsProvided"in P&&i(11,Ke=P.dimensionsProvided),"title"in P&&i(12,Ue=P.title),"$$scope"in P&&i(64,Le=P.$$scope)},n.$$.update=()=>{n.$$.dirty[2]&2&&i(14,r=jt),n.$$.dirty[0]&1|n.$$.dirty[1]&536870912&&i(13,a=g.has(Lt)),n.$$.dirty[0]&1|n.$$.dirty[2]&1&&ft(ii,it=wt.has(Lt),it),n.$$.dirty[0]&8193|n.$$.dirty[1]&1073741824&&a&&mt&&yt("duplicate",Lt)},[Lt,Ne,_e,me,We,ke,Ee,Ce,we,De,Ve,Ke,Ue,a,r,G,X,E,et,gt,it,Pt,Ft,ut,vt,Bt,te,Vt,fe,R,st,Rt,xt,ei,ui,ze,Xe,Kt,Xt,hi,ii,ni,Je,N,Ut,pe,T,_t,j,Ae,Jt,ye,Yt,Me,_i,Ye,Xi,Ii,qe,Ge,g,mt,wt,jt,Le,de,pn,Yi,Ji]}class sh extends ue{constructor(e){super(),le(this,e,oh,nh,ne,{node:0,isDefault:1,useDefaults:2,center:58,nodeStore:3,locked:4,groups:5,maxZIndex:6,centerPoint:7,cursor:59,initialNodePositions:8,activeGroup:9,editing:10,dimensionsProvided:11,title:12},null,[-1,-1,-1])}}const rh=n=>({selected:n[1]&262144,grabHandle:n[1]&524288,node:n[0]&128,destroy:n[1]&131072}),kr=n=>({selected:n[49],grabHandle:n[50],disconnect:n[14],connect:n[13],node:n[7],destroy:n[48]});function Mr(n){let e,i;return e=new sh({props:{node:n[7],center:n[5]||n[0]==="center",isDefault:n[8],useDefaults:n[4],dimensionsProvided:!!n[1]||!!n[2]||!!n[3]||n[8]||!1,nodeStore:n[11].nodes,locked:n[11].locked,groups:n[11].groups,title:n[6],maxZIndex:n[11].maxZIndex,centerPoint:n[11].center,cursor:n[11].cursor,activeGroup:n[11].activeGroup,editing:n[11].editing,initialNodePositions:n[11].initialNodePositions,$$slots:{default:[lh,({destroy:r,selected:a,grabHandle:s})=>({48:r,49:a,50:s}),({destroy:r,selected:a,grabHandle:s})=>[0,(r?131072:0)|(a?262144:0)|(s?524288:0)]]},$$scope:{ctx:n}}}),e.$on("nodeClicked",n[41]),e.$on("nodeMount",n[42]),e.$on("nodeReleased",n[43]),e.$on("duplicate",n[44]),{c(){Dt(e.$$.fragment)},m(r,a){Ot(e,r,a),i=!0},p(r,a){const s={};a[0]&128&&(s.node=r[7]),a[0]&33&&(s.center=r[5]||r[0]==="center"),a[0]&256&&(s.isDefault=r[8]),a[0]&16&&(s.useDefaults=r[4]),a[0]&270&&(s.dimensionsProvided=!!r[1]||!!r[2]||!!r[3]||r[8]||!1),a[0]&64&&(s.title=r[6]),a[0]&128|a[1]&933888&&(s.$$scope={dirty:a,ctx:r}),e.$set(s)},i(r){i||(B(e.$$.fragment,r),i=!0)},o(r){W(e.$$.fragment,r),i=!1},d(r){It(e,r)}}}function ah(n){let e,i;return e=new th({props:{selected:n[49]}}),e.$on("connection",n[39]),e.$on("disconnection",n[40]),{c(){Dt(e.$$.fragment)},m(r,a){Ot(e,r,a),i=!0},p(r,a){const s={};a[1]&262144&&(s.selected=r[49]),e.$set(s)},i(r){i||(B(e.$$.fragment,r),i=!0)},o(r){W(e.$$.fragment,r),i=!1},d(r){It(e,r)}}}function lh(n){let e;const i=n[38].default,r=Ze(i,n,n[45],kr),a=r||ah(n);return{c(){a&&a.c()},m(s,l){a&&a.m(s,l),e=!0},p(s,l){r?r.p&&(!e||l[0]&128|l[1]&933888)&&Re(r,i,s,s[45],e?Be(i,s[45],l,rh):He(s[45]),kr):a&&a.p&&(!e||l[1]&262144)&&a.p(s,e?l:[-1,-1])},i(s){e||(B(a,s),e=!0)},o(s){W(a,s),e=!1},d(s){a&&a.d(s)}}}function uh(n){let e=n[7]&&n[10].get(n[7].id),i,r,a=e&&Mr(n);return{c(){a&&a.c(),i=Pe()},m(s,l){a&&a.m(s,l),tt(s,i,l),r=!0},p(s,l){l[0]&1152&&(e=s[7]&&s[10].get(s[7].id)),e?a?(a.p(s,l),l[0]&1152&&B(a,1)):(a=Mr(s),a.c(),B(a,1),a.m(i.parentNode,i)):a&&(re(),W(a,1,1,()=>{a=null}),ae())},i(s){r||(B(a),r=!0)},o(s){W(a),r=!1},d(s){a&&a.d(s),s&&Q(i)}}}function hh(n,e,i){let r,a,s=pt,l=()=>(s(),s=se(r,R=>i(37,a=R)),r),h;n.$$.on_destroy.push(()=>s());let{$$slots:c={},$$scope:d}=e;const _=as(c),p=Gt("graph"),v=Gt("group");let{position:g={x:0,y:0}}=e,{drop:b=!1}=e,{dimensions:w=null}=e,{id:k=0}=e,{bgColor:M=null}=e,{borderRadius:O=null}=e,{borderColor:I=null}=e,{borderWidth:Z=null}=e,{selectionColor:D=null}=e,{textColor:H=null}=e,{resizable:G=!1}=e,{label:X=""}=e,{inputs:Y=1}=e,{outputs:ht=1}=e,{width:nt=null}=e,{height:A=null}=e,{TD:ot=!1}=e,{LR:E=!1}=e,{zIndex:at=1}=e,{editable:F=!1}=e,{locked:Zt=!1}=e,{rotation:lt=0}=e,{edge:K=null}=e,{connections:et=[]}=e,{useDefaults:bt=!1}=e,{center:Mt=!1}=e,{dynamic:St=!1}=e,{title:gt=""}=e,{hidden:mt=!1}=e;const wt=p.nodes;V(n,wt,R=>i(10,h=R)),$t("dynamic",St);let it,jt=!0;bi(()=>{const R=ot?"TD":E?"LR":p.direction,de=p.groupBoxes.get(v),Le=p.nodes.count()+1;i(8,jt=!_.default);const st=w||(nt||A?{width:nt||A||200,height:A||nt||100}:jt?{width:200,height:100}:{width:0,height:0}),Rt={id:k||Le,position:b==="cursor"?{x:$(p.cursor).x,y:$(p.cursor).y}:de?{x:$(de.position).x+g.x,y:$(de.position).y+g.y}:g,dimensions:st,editable:F||p.editable,label:X,group:v,resizable:G,inputs:Y,hidden:mt,outputs:ht,zIndex:at,direction:R,locked:Zt,rotation:lt};et.length&&(Rt.connections=et),Z&&(Rt.borderWidth=Z),O&&(Rt.borderRadius=O),I&&(Rt.borderColor=I),D&&(Rt.selectionColor=D),H&&(Rt.textColor=H),M&&(Rt.bgColor=M),K&&(Rt.edge=K),i(7,it=Sa(Rt)),de&&p.groups.update(xt=>{const yt=$(xt[v].nodes);return xt[v].nodes.set(new Set([...yt,it])),xt}),p.nodes.add(it,it.id)}),_o(()=>{p.nodes.delete(it.id)});function Pt(R){it&&it.connections.set([R])}function Ft(R){if(!it)return;(Array.isArray(R)?R:[R]).forEach(Le=>{const[st,Rt]=Array.isArray(Le)?Le:[Le,null],xt=`N-${st}`,yt=p.nodes.get(xt);if(!yt)return;let Lt=null;const Ne=Rt?`A-${Rt}/${xt}`:null;Ne&&(Lt=yt.anchors.get(Ne));const _e=p.edges.match(it,yt,Lt);_e.length&&p.edges.delete(_e[_e.length-1])})}$t("connect",Pt),$t("disconnect",Ft);function ut(R){be.call(this,n,R)}function vt(R){be.call(this,n,R)}function Bt(R){be.call(this,n,R)}function te(R){be.call(this,n,R)}function Vt(R){be.call(this,n,R)}function fe(R){be.call(this,n,R)}return n.$$set=R=>{"position"in R&&i(15,g=R.position),"drop"in R&&i(0,b=R.drop),"dimensions"in R&&i(1,w=R.dimensions),"id"in R&&i(16,k=R.id),"bgColor"in R&&i(17,M=R.bgColor),"borderRadius"in R&&i(18,O=R.borderRadius),"borderColor"in R&&i(19,I=R.borderColor),"borderWidth"in R&&i(20,Z=R.borderWidth),"selectionColor"in R&&i(21,D=R.selectionColor),"textColor"in R&&i(22,H=R.textColor),"resizable"in R&&i(23,G=R.resizable),"label"in R&&i(24,X=R.label),"inputs"in R&&i(25,Y=R.inputs),"outputs"in R&&i(26,ht=R.outputs),"width"in R&&i(2,nt=R.width),"height"in R&&i(3,A=R.height),"TD"in R&&i(27,ot=R.TD),"LR"in R&&i(28,E=R.LR),"zIndex"in R&&i(29,at=R.zIndex),"editable"in R&&i(30,F=R.editable),"locked"in R&&i(31,Zt=R.locked),"rotation"in R&&i(32,lt=R.rotation),"edge"in R&&i(33,K=R.edge),"connections"in R&&i(34,et=R.connections),"useDefaults"in R&&i(4,bt=R.useDefaults),"center"in R&&i(5,Mt=R.center),"dynamic"in R&&i(35,St=R.dynamic),"title"in R&&i(6,gt=R.title),"hidden"in R&&i(36,mt=R.hidden),"$$scope"in R&&i(45,d=R.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&131200&&it&&it.bgColor.set(M),n.$$.dirty[0]&16777344&&it&&it.label.set(X),n.$$.dirty[0]&4194432&&it&&it.textColor.set(H),n.$$.dirty[0]&524416&&it&&it.borderColor.set(I),n.$$.dirty[0]&2097280&&it&&it.selectionColor.set(D),n.$$.dirty[0]&8388736&&it&&it.resizable.set(G),n.$$.dirty[0]&1073741952&&it&&it.editable.set(F),n.$$.dirty[0]&128|n.$$.dirty[1]&1&&it&&it.locked.set(Zt),n.$$.dirty[0]&33554560&&it&&it.inputs.set(Y),n.$$.dirty[0]&67108992&&it&&it.outputs.set(ht),n.$$.dirty[0]&536871040&&it&&it.zIndex.set(at),n.$$.dirty[0]&128|n.$$.dirty[1]&32&&it&&(mt?$(p.groups).hidden.nodes.update(R=>R.add(it)):$(p.groups).hidden.nodes.update(R=>(R.delete(it),R))),n.$$.dirty[0]&128&&l(i(9,r=it&&(it==null?void 0:it.position))),n.$$.dirty[0]&128|n.$$.dirty[1]&64&&it&&i(15,g=a),n.$$.dirty[0]&33554560&&it&&it.inputs.set(Y),n.$$.dirty[0]&67108992&&it&&it.outputs.set(ht)},[b,w,nt,A,bt,Mt,gt,it,jt,r,h,p,wt,Pt,Ft,g,k,M,O,I,Z,D,H,G,X,Y,ht,ot,E,at,F,Zt,lt,K,et,St,mt,a,c,ut,vt,Bt,te,Vt,fe,d]}class hs extends ue{constructor(e){super(),le(this,e,hh,uh,ne,{position:15,drop:0,dimensions:1,id:16,bgColor:17,borderRadius:18,borderColor:19,borderWidth:20,selectionColor:21,textColor:22,resizable:23,label:24,inputs:25,outputs:26,width:2,height:3,TD:27,LR:28,zIndex:29,editable:30,locked:31,rotation:32,edge:33,connections:34,useDefaults:4,center:5,dynamic:35,title:6,hidden:36},null,[-1,-1])}}function ch(n){n.parentNodes.forEach(s=>fh(s));const[e,i]=dh(n);_h(e,n),mh(e);for(let s=0;s<10;s++){let l=!1;for(let h=0;h<=i;h++)if(e[h])for(let c=0;c<e[h].length;c++){const d=e[h][c],_=gh(e,d,c);_&&(qi(e[h],c,_),l=!0)}if(!l)break}const r=yh(e);for(let s=0;s<10&&vh(e,r);s++);for(let s=0;s<2;s++){let l=!1;for(let h=0;h<=i;h++)for(let c=0;c<e[h].length;c++){const d=e[h][c],_=ph(e,d,c);_&&(qi(e[h],c,_),l=!0)}if(!l)break}const a=[];for(let s=0;s<=i;s++)a.push(e[s]);return a}function fh(n,e=0,i=0){const r=[],a=(s,l=0,h=0)=>{s.depth=Math.max(s.depth,l),s.nesting=Math.max(s.nesting,h),r.push(s);for(const c of s.children){const{node:d,length:_}=c;a(d,_+l,h+1)}};a(n,e,i);for(const s of r)if(s.children.length){s.nesting=s.children[0].node.nesting-1,s.depth=s.children[0].node.depth-s.children[0].length;for(const l of s.children)s.nesting=Math.min(s.nesting,l.node.nesting-1),s.depth=Math.min(s.depth,l.node.depth-l.length)}}function dh(n){let e=0;const i={};for(const r in n.nodeList){const{depth:a,parents:s,children:l,type:h,data:c}=n.nodeList[r];e=Math.max(e,a),i[a]||(i[a]=[]);const d={id:r,children:[],parents:[],layer:a,type:h.trim()};c.props&&(d.propsId=c.props.trim());for(const _ of s)d.parents.push(_.node.id);for(const _ of l)d.children.push(_.node.id);i[a].push(d)}return[i,e]}function _h(n,e){for(const i in e.nodeList)for(const r of e.nodeList[i].children)if(r.node.depth-1>e.nodeList[i].depth){const a=e.nodeList[i].depth+1,s=r.node.depth-1,l=[];let h=0;for(let c=a;c<=s;c++){const d={id:`GHOST_${r.node.id}_${h}`,children:[],parents:[],layer:c,ignore:!0};l.push(d),h++}for(const c of r.node.parents)l[0].parents.push(c.node.id);l[l.length-1].children.push(r.node.id);for(let c=0;c<l.length-1;c++)l[c].children.push(`GHOST_${r.node.id}_${c+1}`);for(let c=s;c>=a;c--)l.length>0&&n[c].push(l[0]);for(const c of n[e.nodeList[i].depth])c.id===i&&(c.children.push(l[0].id),c.children=c.children.filter(d=>d!==r.node.id))}}function mh(n){let e=0;for(const i in n)e=Math.max(n[i].length,e);for(const i in n)if(n[i].length<e){const r=Array.from({length:e-n[i].length},()=>({id:"NULL_NODE",children:[],parents:[],layer:parseInt(i),ignore:!0}));n[i]=n[i].concat(r)}}function Sr(n,e,i){let r=0,a=0;for(const s of e.parents){for(let l=0;l<n[e.layer-1].length;l++)if(s===n[e.layer-1][l].id){r+=Math.abs(i-l);break}a++}for(const s of e.children){for(let l=0;l<n[e.layer+1].length;l++)if(s===n[e.layer+1][l].id){r+=Math.abs(i-l);break}a++}return isNaN(r/a)?0:r/a}function xr(n,e,i){let r=0,a=0;for(const s of e.parents){for(let l=0;l<n[e.layer-1].length;l++)if(s===n[e.layer-1][l].id){r+=Math.abs(i-l);break}a++}return isNaN(r/a)?0:r/a}function Tr(n,e,i){let r=0,a=0;for(const s of e.children){for(let l=0;l<n[e.layer+1].length;l++)if(s===n[e.layer+1][l].id){r+=Math.abs(i-l);break}a++}return isNaN(r/a)?0:r/a}function ph(n,e,i){const r=is(n,e.layer);let a=0;e.layer===0?a=Tr(n,e,i):a=xr(n,e,i);let s=a,l=i;for(let h=0;h<n[e.layer].length;h++)if(n[e.layer][h].id==="NULL_NODE"){qi(n[e.layer],i,h);const d=is(n,e.layer);let _=0;e.layer===0?_=Tr(n,e,h):_=xr(n,e,h),d<=r&&_<s&&(s=_,l=h),qi(n[e.layer],h,i)}return l===i?null:l}function gh(n,e,i){const r={};let a=1/0,s=0;for(let l=0;l<n[e.layer].length;l++){const h=Sr(n,e,l),c=Sr(n,n[e.layer][l],i);r[l]=h+c}for(const l in r)r[l]<a&&(a=r[l],s=parseInt(l));return s===i?null:s}function qi(n,e,i){const r=n[e];n[e]=n[i],n[i]=r}function yh(n){const e=[];for(const i in n)for(const r of n[i])e.push(r);return e.sort((i,r)=>r.parents.length+r.children.length-(i.parents.length+i.children.length))}function is(n,e){let i=0;for(let r=0;r<n[e].length;r++){const a=n[e][r],s=[],l=[];if(n[e-1])for(let h=r+1;h<n[e-1].length;h++)a.parents.includes(n[e-1][h].id)&&s.push(h);if(n[e+1])for(let h=r+1;h<n[e+1].length;h++)a.children.includes(n[e+1][h].id)&&l.push(h);for(let h=r+1;h<n[e].length;h++){const c=n[e][h];if(s.length)for(let d=0;d<n[e-1].length;d++)c.parents.includes(n[e-1][d].id)&&s.forEach(_=>{d<_&&i++});if(l.length)for(let d=0;d<n[e+1].length;d++)c.children.includes(n[e+1][d].id)&&l.forEach(_=>{d<_&&i++})}}return i}function vh(n,e){let i=!1;for(const r of e){if(r.children.length+r.parents.length===0)return i;let a=0;for(let h=0;h<n[r.layer].length;h++)if(n[r.layer][h].id===r.id){a=h;break}let s=1/0,l=a;for(let h=0;h<n[r.layer].length;h++){qi(n[r.layer],a,h);const c=is(n,r.layer);c<s&&(s=c,l=h),qi(n[r.layer],h,a)}l!==a&&(qi(n[r.layer],a,l),i=!0)}return i}function Er(n,e,i){const r=n.slice();return r[6]=e[i],r}function zr(n,e,i){const r=n.slice();return r[9]=e[i],r}function bh(n){let e,i;const r=[{label:n[9].id},{id:n[9].id},{TD:!0},n[0][n[9].id],{connections:n[9].children.map(Ir)}];let a={};for(let s=0;s<r.length;s+=1)a=fo(a,r[s]);return e=new hs({props:a}),{c(){Dt(e.$$.fragment)},m(s,l){Ot(e,s,l),i=!0},p(s,l){const h=l&3?ls(r,[l&2&&{label:s[9].id},l&2&&{id:s[9].id},r[2],us(s[0][s[9].id]),l&2&&{connections:s[9].children.map(Ir)}]):{};e.$set(h)},i(s){i||(B(e.$$.fragment,s),i=!0)},o(s){W(e.$$.fragment,s),i=!1},d(s){It(e,s)}}}function Ar(n){let e,i,r=!n[9].ignore&&bh(n);return{c(){r&&r.c(),e=Pe()},m(a,s){r&&r.m(a,s),tt(a,e,s),i=!0},p(a,s){a[9].ignore||r.p(a,s)},i(a){i||(B(r),i=!0)},o(a){W(r),i=!1},d(a){r&&r.d(a),a&&Q(e)}}}function Or(n){let e,i,r=n[6],a=[];for(let l=0;l<r.length;l+=1)a[l]=Ar(zr(n,r,l));const s=l=>W(a[l],1,1,()=>{a[l]=null});return{c(){for(let l=0;l<a.length;l+=1)a[l].c();e=Pe()},m(l,h){for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(l,h);tt(l,e,h),i=!0},p(l,h){if(h&3){r=l[6];let c;for(c=0;c<r.length;c+=1){const d=zr(l,r,c);a[c]?(a[c].p(d,h),B(a[c],1)):(a[c]=Ar(d),a[c].c(),B(a[c],1),a[c].m(e.parentNode,e))}for(re(),c=r.length;c<a.length;c+=1)s(c);ae()}},i(l){if(!i){for(let h=0;h<r.length;h+=1)B(a[h]);i=!0}},o(l){a=a.filter(Boolean);for(let h=0;h<a.length;h+=1)W(a[h]);i=!1},d(l){fn(a,l),l&&Q(e)}}}function wh(n){let e,i,r=n[1],a=[];for(let l=0;l<r.length;l+=1)a[l]=Or(Er(n,r,l));const s=l=>W(a[l],1,1,()=>{a[l]=null});return{c(){for(let l=0;l<a.length;l+=1)a[l].c();e=Pe()},m(l,h){for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(l,h);tt(l,e,h),i=!0},p(l,[h]){if(h&3){r=l[1];let c;for(c=0;c<r.length;c+=1){const d=Er(l,r,c);a[c]?(a[c].p(d,h),B(a[c],1)):(a[c]=Or(d),a[c].c(),B(a[c],1),a[c].m(e.parentNode,e))}for(re(),c=r.length;c<a.length;c+=1)s(c);ae()}},i(l){if(!i){for(let h=0;h<r.length;h+=1)B(a[h]);i=!0}},o(l){a=a.filter(Boolean);for(let h=0;h<a.length;h+=1)W(a[h]);i=!1},d(l){fn(a,l),l&&Q(e)}}}const Lh=100,Ch=100,Ir=n=>[n,"0"];function Ph(n,e,i){let{mermaid:r=""}=e,{mermaidConfig:a={}}=e;const s=pu(r),l=ch(s),h=Gt("graph");let c;return bi(()=>{h.nodes.subscribe(_=>c=_);let d=0;for(const _ of l){let p=0,v=-1/0;for(const g of _)g.ignore||(c[`N-${g.id}`].position.update(()=>({x:p,y:d})),c[`N-${g.id}`].dimensions.width.subscribe(b=>p+=b),c[`N-${g.id}`].dimensions.height.subscribe(b=>v=Math.max(v,b))),p+=Lh;d+=v+Ch}}),n.$$set=d=>{"mermaid"in d&&i(2,r=d.mermaid),"mermaidConfig"in d&&i(0,a=d.mermaidConfig)},[a,l,r]}class kh extends ue{constructor(e){super(),le(this,e,Ph,wh,ne,{mermaid:2,mermaidConfig:0})}}const Mh="modulepreload",Sh=function(n){return"/"+n},Nr={},jo=function(e,i,r){if(!i||i.length===0)return e();const a=document.getElementsByTagName("link");return Promise.all(i.map(s=>{if(s=Sh(s),s in Nr)return;Nr[s]=!0;const l=s.endsWith(".css"),h=l?'[rel="stylesheet"]':"";if(!!r)for(let _=a.length-1;_>=0;_--){const p=a[_];if(p.href===s&&(!l||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${h}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":Mh,l||(d.as="script",d.crossOrigin=""),d.href=s,document.head.appendChild(d),l)return new Promise((_,p)=>{d.addEventListener("load",_),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())},xh=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],Th=new Set(xh),ns=n=>Th.has(n);function Eh(n){let e,i,r,a,s,l,h;return{c(){e=dt("div"),i=dt("div"),r=dt("p"),a=vi(n[2]),s=Ct(),l=dt("p"),h=vi(n[6]),S(r,"class","svelte-1okgqig"),S(l,"class","svelte-1okgqig"),S(i,"class","slider-input connected svelte-1okgqig"),S(i,"aria-label",n[2]),J(i,"--percentage","100%"),S(e,"class","wrapper connected svelte-1okgqig")},m(c,d){tt(c,e,d),rt(e,i),rt(i,r),rt(r,a),rt(i,s),rt(i,l),rt(l,h)},p(c,d){d[0]&4&&Vi(a,c[2]),d[0]&64&&Vi(h,c[6]),d[0]&4&&S(i,"aria-label",c[2])},d(c){c&&Q(e)}}}function zh(n){let e,i,r,a,s,l,h,c,d,_,p,v,g,b;return{c(){e=dt("div"),i=dt("button"),i.textContent="",r=Ct(),a=dt("div"),s=dt("label"),l=vi(n[2]),h=Ct(),c=dt("input"),p=Ct(),v=dt("button"),v.textContent="+",S(i,"class","button svelte-1okgqig"),S(s,"for","slider-input"),S(s,"class","input-label svelte-1okgqig"),S(c,"tabindex",0),S(c,"id","slider-input"),S(c,"class","slider-input svelte-1okgqig"),S(c,"type","text"),c.value=d=n[6].toFixed(n[3]),S(c,"aria-label",n[2]),J(c,"background",n[9]),J(c,"--percentage",n[5]),S(a,"class","slider svelte-1okgqig"),_n(()=>n[31].call(a)),S(v,"class","button svelte-1okgqig"),S(e,"class","wrapper svelte-1okgqig"),J(e,"color",n[4])},m(w,k){tt(w,e,k),rt(e,i),rt(e,r),rt(e,a),rt(a,s),rt(s,l),rt(a,h),rt(a,c),n[30](c),_=ba(a,n[31].bind(a)),rt(e,p),rt(e,v),g||(b=[Et(i,"touchstart",ti(n[26]),{passive:!0}),Et(i,"mousedown",ti(n[27])),Et(c,"wheel",ti(ri(n[28]))),Et(c,"keydown",ti(n[29])),Ai(n[15].call(null,c)),Et(v,"touchstart",ti(n[32]),{passive:!0}),Et(v,"mousedown",ti(n[33]))],g=!0)},p(w,k){k[0]&4&&Vi(l,w[2]),k[0]&72&&d!==(d=w[6].toFixed(w[3]))&&c.value!==d&&(c.value=d),k[0]&4&&S(c,"aria-label",w[2]),k[0]&512&&J(c,"background",w[9]),k[0]&32&&J(c,"--percentage",w[5]),k[0]&16&&J(e,"color",w[4])},d(w){w&&Q(e),n[30](null),_(),g=!1,Ie(b)}}}function Ah(n){let e;function i(s,l){return s[12]?Eh:zh}let r=i(n),a=r(n);return{c(){a.c(),e=Pe()},m(s,l){a.m(s,l),tt(s,e,l)},p(s,l){r===(r=i(s))&&a?a.p(s,l):(a.d(1),a=r(s),a&&(a.c(),a.m(e.parentNode,e)))},i:pt,o:pt,d(s){a.d(s),s&&Q(e)}}}function Oh(n,e,i){let r,a,s,l,h,c,d,_=pt,p=()=>(_(),_=se(D,st=>i(6,d=st)),D),v,g=pt,b=()=>(g(),g=se(a,st=>i(36,v=st)),a),w,k=pt,M=()=>(k(),k=se(s,st=>i(25,w=st)),s),O,I,Z;V(n,Oe,st=>i(37,O=st)),n.$$.on_destroy.push(()=>_()),n.$$.on_destroy.push(()=>g()),n.$$.on_destroy.push(()=>k());let{parameterStore:D}=e;p();let{min:H=0}=e,{max:G=100}=e,{step:X=1}=e,{label:Y="Value"}=e,{fixed:ht=2}=e,{fontColor:nt=null}=e,{barColor:A=null}=e,{bgColor:ot=null}=e,E=Gt("graph"),at=Gt("node");const F=E.groups;V(n,F,st=>i(39,Z=st));const Zt=Z.selected,lt=E.activeGroup;V(n,lt,st=>i(38,I=st));let K,et,bt=!1,Mt=0,St=0;function gt(st){st.stopPropagation(),st.preventDefault(),ft(Oe,O={x:w.x,y:w.y},O),i(23,Mt=w.x),window.addEventListener("mouseup",it,{once:!0}),i(22,bt=!0)}let mt=d;function wt(st){ft(lt,I=null,I),Zt.nodes.set(new Set),ai.set(!1),st.stopPropagation(),st.preventDefault(),ft(Oe,O={x:w.x,y:w.y},O),i(23,Mt=w.x),window.addEventListener("touchend",it,{once:!0}),i(22,bt=!0)}function it(){mt===d?(et.focus(),et.select()):mt=d,i(22,bt=!1),window.removeEventListener("mouseup",it)}function jt(st){return st.addEventListener("mousedown",gt),st.addEventListener("touchstart",wt),{destroy(){st.removeEventListener("mousedown",gt)}}}function Pt(st,Rt=X){typeof d=="number"&&ft(D,d=rr(Math.max(H,Math.min(d+st*Rt,G)),3),d)}function Ft(st,Rt=X){if(typeof d!="number")return;const xt=v*.7/((G-H)/Rt);if(St+=st,Math.abs(St)>=xt){const yt=Math.floor(Math.abs(St)/xt);St>0?Pt(yt):Pt(-yt),St=St>0?St-yt*xt:St+yt*xt}}function ut(){const st=parseFloat(et.value);Number.isNaN(st)||(st<=H?ft(D,d=H,d):st>=G?ft(D,d=G,d):ft(D,d=rr(st,2),d)),i(8,et.value=JSON.stringify(d),et),et.blur()}const vt=()=>Pt(-1),Bt=()=>Pt(-1),te=st=>{Pt(Math.sign(st.deltaY),X)},Vt=st=>{const{key:Rt}=st;ns(Rt)&&(st.preventDefault(),Pt(Rt=="ArrowDown"?-1:Rt=="ArrowUp"?1:0)),Rt==="Enter"&&ut()};function fe(st){Oi[st?"unshift":"push"](()=>{et=st,i(8,et)})}function R(){K=this.offsetWidth,i(7,K)}const de=()=>Pt(1),Le=()=>Pt(1);return n.$$set=st=>{"parameterStore"in st&&p(i(0,D=st.parameterStore)),"min"in st&&i(18,H=st.min),"max"in st&&i(19,G=st.max),"step"in st&&i(1,X=st.step),"label"in st&&i(2,Y=st.label),"fixed"in st&&i(3,ht=st.fixed),"fontColor"in st&&i(4,nt=st.fontColor),"barColor"in st&&i(20,A=st.barColor),"bgColor"in st&&i(21,ot=st.bgColor)},n.$$.update=()=>{if(n.$$.dirty[0]&1&&i(12,r=typeof D.set!="function"),n.$$.dirty[0]&46137344&&bt){const st=w.x-Mt;Ft(st),i(23,Mt=w.x)}n.$$.dirty[0]&786496&&i(24,l=(d-H)/(G-H)*100),n.$$.dirty[0]&16777216&&i(5,h=`${l}%`),n.$$.dirty[0]&3145760&&i(9,c=`linear-gradient(
			90deg,
			${A||"var(--primary-color, var(--default-primary-color))"} ${h},
			${ot||"var(--accent-color, var(--default-accent-color))"} ${h}
		)`)},b(i(11,a=at.dimensions.width)),M(i(10,s=E.cursor)),[D,X,Y,ht,nt,h,d,K,et,c,s,a,r,F,lt,jt,Pt,ut,H,G,A,ot,bt,Mt,l,w,vt,Bt,te,Vt,fe,R,de,Le]}class Ih extends ue{constructor(e){super(),le(this,e,Oh,Ah,ne,{parameterStore:0,min:18,max:19,step:1,label:2,fixed:3,fontColor:4,barColor:20,bgColor:21},null,[-1,-1])}}function Nh(n){let e,i,r;return{c(){e=dt("input"),S(e,"placeholder",n[0]),S(e,"type","text")},m(a,s){tt(a,e,s),no(e,n[1]),i||(r=[Et(e,"keydown",ti(n[3])),Et(e,"click",ti(n[4])),Et(e,"mousedown",ti(n[5])),Et(e,"input",n[6])],i=!0)},p(a,[s]){s&1&&S(e,"placeholder",a[0]),s&2&&e.value!==a[1]&&no(e,a[1])},i:pt,o:pt,d(a){a&&Q(e),i=!1,Ie(r)}}}function Dh(n,e,i){let r,{placeholder:a}=e;const s=Gt("textStore");V(n,s,_=>i(1,r=_));function l(_){be.call(this,n,_)}function h(_){be.call(this,n,_)}function c(_){be.call(this,n,_)}function d(){r=this.value,s.set(r)}return n.$$set=_=>{"placeholder"in _&&i(0,a=_.placeholder)},[a,r,s,l,h,c,d]}class Zh extends ue{constructor(e){super(),le(this,e,Dh,Nh,ne,{placeholder:0})}}function Bh(n){let e,i,r,a,s,l,h,c,d,_,p;return a=new Ih({props:{parameterStore:n[0].dimensions.width,max:1e3}}),l=new Zh({props:{placeholder:"Node Label"}}),{c(){e=dt("div"),i=dt("button"),i.textContent="X",r=Ct(),Dt(a.$$.fragment),s=Ct(),Dt(l.$$.fragment),h=Ct(),c=dt("button"),c.textContent="Delete Node",S(e,"class","editor svelte-xh8yyu")},m(v,g){tt(v,e,g),rt(e,i),rt(e,r),Ot(a,e,null),rt(e,s),Ot(l,e,null),rt(e,h),rt(e,c),d=!0,_||(p=[Et(i,"click",n[5]),Et(c,"click",n[4]),Ai(n[6].call(null,e))],_=!0)},p(v,g){const b={};g&1&&(b.parameterStore=v[0].dimensions.width),a.$set(b)},i(v){d||(B(a.$$.fragment,v),B(l.$$.fragment,v),d=!0)},o(v){W(a.$$.fragment,v),W(l.$$.fragment,v),d=!1},d(v){v&&Q(e),It(a),It(l),_=!1,Ie(p)}}}function Rh(n){let e,i;return e=new hs({props:{zIndex:1/0,position:{x:n[2].x,y:n[2].y},bgColor:"white",id:"editor",$$slots:{default:[Bh,({grabHandle:r})=>({6:r}),({grabHandle:r})=>r?64:0]},$$scope:{ctx:n}}}),{c(){Dt(e.$$.fragment)},m(r,a){Ot(e,r,a),i=!0},p(r,[a]){const s={};a&4&&(s.position={x:r[2].x,y:r[2].y}),a&129&&(s.$$scope={dirty:a,ctx:r}),e.$set(s)},i(r){i||(B(e.$$.fragment,r),i=!0)},o(r){W(e.$$.fragment,r),i=!1},d(r){It(e,r)}}}function Hh(n,e,i){let r,a,s=pt,l=()=>(s(),s=se(r,p=>i(2,a=p)),r);n.$$.on_destroy.push(()=>s());let{editing:h}=e;const c=Gt("graph");$t("graph",c),$t("textStore",h.label),$t("colorStore",h.bgColor);function d(){c.nodes.delete(h.id),c.editing.set(null)}const _=()=>c.editing.set(null);return n.$$set=p=>{"editing"in p&&i(0,h=p.editing)},l(i(1,r=c.cursor)),[h,r,a,c,d,_]}class Gh extends ue{constructor(e){super(),le(this,e,Hh,Rh,ne,{editing:0})}}function Fh(n){let e,i,r,a;return{c(){e=dt("div"),i=dt("div"),S(i,"class","bounding-box svelte-1e5jg43"),J(i,"background-color",n[6]),S(e,"class","bounding-box-border svelte-1e5jg43"),S(e,"id",n[2]),J(e,"border","solid 4px "+n[6]),J(e,"top",`${n[3].y}px`),J(e,"left",`${n[3].x}px`),J(e,"width",`${n[4]}px`),J(e,"height",`${n[5]}px`)},m(s,l){tt(s,e,l),rt(e,i),r||(a=[Et(e,"contextmenu",ti(ri(n[12]))),Et(e,"mousedown",ti(ri(n[9])))],r=!0)},p(s,[l]){l&64&&J(i,"background-color",s[6]),l&4&&S(e,"id",s[2]),l&64&&J(e,"border","solid 4px "+s[6]);const h=l&64;(h||l&72)&&J(e,"top",`${s[3].y}px`),(h||l&72)&&J(e,"left",`${s[3].x}px`),(h||l&80)&&J(e,"width",`${s[4]}px`),(h||l&96)&&J(e,"height",`${s[5]}px`)},i:pt,o:pt,d(s){s&&Q(e),r=!1,Ie(a)}}}function Wh(n,e,i){let r,a,s=pt,l=()=>(s(),s=se(g,D=>i(3,a=D)),g),h,c,d,_=pt,p=()=>(_(),_=se(b,D=>i(6,d=D)),b);n.$$.on_destroy.push(()=>s()),n.$$.on_destroy.push(()=>_());let{dimensions:v}=e,{position:g}=e;l();let{color:b}=e;p();let{groupName:w}=e;const{width:k,height:M}=v;V(n,k,D=>i(4,h=D)),V(n,M,D=>i(5,c=D));const O=mo();function I(){O("groupClick",{groupName:w})}function Z(D){be.call(this,n,D)}return n.$$set=D=>{"dimensions"in D&&i(10,v=D.dimensions),"position"in D&&l(i(0,g=D.position)),"color"in D&&p(i(1,b=D.color)),"groupName"in D&&i(11,w=D.groupName)},n.$$.update=()=>{n.$$.dirty&2048&&i(2,r=`${w}-bounding-box`)},[g,b,r,a,h,c,d,k,M,I,v,w,Z]}class Uh extends ue{constructor(e){super(),le(this,e,Wh,Fh,ne,{dimensions:10,position:0,color:1,groupName:11})}}function Dr(n,e,i){const r=n.slice();return r[4]=e[i][0],r[5]=e[i][1],r}function Zr(n,e){let i,r,a;const s=[e[5],{groupName:e[4]}];let l={};for(let h=0;h<s.length;h+=1)l=fo(l,s[h]);return r=new Uh({props:l}),r.$on("groupClick",e[2]),{key:n,first:null,c(){i=Pe(),Dt(r.$$.fragment),this.first=i},m(h,c){tt(h,i,c),Ot(r,h,c),a=!0},p(h,c){e=h;const d=c&1?ls(s,[us(e[5]),{groupName:e[4]}]):{};r.$set(d)},i(h){a||(B(r.$$.fragment,h),a=!0)},o(h){W(r.$$.fragment,h),a=!1},d(h){h&&Q(i),It(r,h)}}}function jh(n){let e=[],i=new Map,r,a,s=Array.from(n[0]);const l=h=>h[4];for(let h=0;h<s.length;h+=1){let c=Dr(n,s,h),d=l(c);i.set(d,e[h]=Zr(d,c))}return{c(){for(let h=0;h<e.length;h+=1)e[h].c();r=Pe()},m(h,c){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(h,c);tt(h,r,c),a=!0},p(h,[c]){c&1&&(s=Array.from(h[0]),re(),e=so(e,c,l,1,h,s,i,r.parentNode,oo,Zr,r,Dr),ae())},i(h){if(!a){for(let c=0;c<s.length;c+=1)B(e[c]);a=!0}},o(h){for(let c=0;c<e.length;c+=1)W(e[c]);a=!1},d(h){for(let c=0;c<e.length;c+=1)e[c].d(h);h&&Q(r)}}}function qh(n,e,i){let r;const s=Gt("graph").groupBoxes;V(n,s,h=>i(0,r=h));function l(h){be.call(this,n,h)}return[r,s,l]}class Vh extends ue{constructor(e){super(),le(this,e,qh,jh,ne,{})}}const Kh=n=>({path:n[0]&256}),Br=n=>({path:n[8],destroy:n[35]}),Xh=n=>({path:n[0]&256}),Rr=n=>({path:n[8],destroy:n[35]});function Hr(n){let e,i,r,a,s;const l=n[87].default,h=Ze(l,n,n[86],Rr),c=h||Yh(n);let d=n[6]&&Gr(n);return{c(){e=yi("svg"),i=yi("path"),c&&c.c(),d&&d.c(),S(i,"id",n[32]+"-target"),S(i,"class","target svelte-1d7q5fb"),S(i,"d",n[8]),Nt(i,"cursor",n[32]==="cursor"||!n[1]),J(i,"cursor",n[1]?"pointer":"move"),J(i,"--prop-target-edge-color",n[1]?n[5]||null:"transparent"),S(e,"class","edges-wrapper svelte-1d7q5fb"),J(e,"z-index",n[11])},m(_,p){tt(_,e,p),rt(e,i),n[88](i),c&&c.m(e,null),d&&d.m(e,null),r=!0,a||(s=Et(i,"mousedown",function(){Nn(n[1])&&n[1].apply(this,arguments)}),a=!0)},p(_,p){n=_,(!r||p[0]&256)&&S(i,"d",n[8]),(!r||p[0]&2|p[1]&2)&&Nt(i,"cursor",n[32]==="cursor"||!n[1]),p[0]&2&&J(i,"cursor",n[1]?"pointer":"move"),p[0]&34&&J(i,"--prop-target-edge-color",n[1]?n[5]||null:"transparent"),h?h.p&&(!r||p[0]&256|p[2]&16777216)&&Re(h,l,n,n[86],r?Be(l,n[86],p,Xh):He(n[86]),Rr):c&&c.p&&(!r||p[0]&16645)&&c.p(n,r?p:[-1,-1,-1,-1]),n[6]?d?(d.p(n,p),p[0]&64&&B(d,1)):(d=Gr(n),d.c(),B(d,1),d.m(e,null)):d&&(re(),W(d,1,1,()=>{d=null}),ae()),p[0]&2048&&J(e,"z-index",n[11])},i(_){r||(B(c,_),B(d),r=!0)},o(_){W(c,_),W(d),r=!1},d(_){_&&Q(e),n[88](null),c&&c.d(_),d&&d.d(),a=!1,s()}}}function Yh(n){let e;return{c(){e=yi("path"),S(e,"id",n[32]),S(e,"class","edge svelte-1d7q5fb"),S(e,"d",n[8]),Nt(e,"animate",n[0]),J(e,"--prop-edge-color",n[14]),J(e,"--prop-stroke-width",n[2]?n[2]+"px":null)},m(i,r){tt(i,e,r)},p(i,r){r[0]&256&&S(e,"d",i[8]),r[0]&1&&Nt(e,"animate",i[0]),r[0]&16384&&J(e,"--prop-edge-color",i[14]),r[0]&4&&J(e,"--prop-stroke-width",i[2]?i[2]+"px":null)},d(i){i&&Q(e)}}}function Gr(n){let e,i,r,a,s;const l=n[87].label,h=Ze(l,n,n[86],Br),c=h||Jh(n);return{c(){e=yi("foreignObject"),i=dt("span"),c&&c.c(),S(i,"class","label-wrapper svelte-1d7q5fb"),S(e,"x",r=n[10].x),S(e,"y",a=n[10].y),S(e,"width","100%"),S(e,"height","100%"),S(e,"class","svelte-1d7q5fb")},m(d,_){tt(d,e,_),rt(e,i),c&&c.m(i,null),s=!0},p(d,_){h?h.p&&(!s||_[0]&256|_[2]&16777216)&&Re(h,l,d,d[86],s?Be(l,d[86],_,Kh):He(d[86]),Br):c&&c.p&&(!s||_[0]&152)&&c.p(d,s?_:[-1,-1,-1,-1]),(!s||_[0]&1024&&r!==(r=d[10].x))&&S(e,"x",r),(!s||_[0]&1024&&a!==(a=d[10].y))&&S(e,"y",a)},i(d){s||(B(c,d),s=!0)},o(d){W(c,d),s=!1},d(d){d&&Q(e),c&&c.d(d)}}}function Jh(n){let e,i;return{c(){e=dt("div"),i=vi(n[7]),S(e,"class","default-label svelte-1d7q5fb"),J(e,"--prop-label-color",n[3]),J(e,"--prop-label-text-color",n[4])},m(r,a){tt(r,e,a),rt(e,i)},p(r,a){a[0]&128&&Vi(i,r[7]),a[0]&8&&J(e,"--prop-label-color",r[3]),a[0]&16&&J(e,"--prop-label-text-color",r[4])},d(r){r&&Q(e)}}}function Qh(n){let e,i,r=!n[17]&&!n[18]&&Hr(n);return{c(){r&&r.c(),e=Pe()},m(a,s){r&&r.m(a,s),tt(a,e,s),i=!0},p(a,s){!a[17]&&!a[18]?r?(r.p(a,s),s[0]&393216&&B(r,1)):(r=Hr(a),r.c(),B(r,1),r.m(e.parentNode,e)):r&&(re(),W(r,1,1,()=>{r=null}),ae())},i(a){i||(B(r),i=!0)},o(a){W(r),i=!1},d(a){r&&r.d(a),a&&Q(e)}}}let qo;function $h(n,e,i){var Yi,Ji;let r,a,s,l,h,c,d,_,p,v,g,b,w,k,M,O,I,Z,D,H,G,X,Y,ht,nt,A,ot,E,at,F,Zt,lt,K=pt,et=()=>(K(),K=se(at,P=>i(69,lt=P)),at),bt,Mt=pt,St=()=>(Mt(),Mt=se(E,P=>i(70,bt=P)),E),gt,mt,wt,it,jt,Pt,Ft,ut,vt,Bt,te,Vt,fe,R,de=pt,Le=()=>(de(),de=se(s,P=>i(84,R=P)),s),st,Rt=pt,xt=()=>(Rt(),Rt=se(a,P=>i(85,st=P)),a),yt,Lt;n.$$.on_destroy.push(()=>K()),n.$$.on_destroy.push(()=>Mt()),n.$$.on_destroy.push(()=>de()),n.$$.on_destroy.push(()=>Rt());let{$$slots:Ne={},$$scope:_e}=e;const qe=as(Ne),me=Gt("edgeStore"),We=Gt("edgeStyle"),ke=Gt("raiseEdgesOnSelect"),Ee=Gt("edgesAboveNode");let{edge:Ce=Gt("edge")}=e,{straight:Ge=We==="straight"}=e,{step:we=We==="step"}=e,{animate:De=!1}=e,{label:Ve=""}=e,{edgeClick:Ke=null}=e,{width:Ue=null}=e,{color:li=null}=e,{labelColor:ei=null}=e,{textColor:ui=null}=e,{cornerRadius:ze=8}=e,{targetColor:Xe=null}=e;const Kt=Ce.source,Xt=Ce.target,hi=Kt.direction;V(n,hi,P=>i(72,mt=P));const ii=Xt.direction;V(n,ii,P=>i(71,gt=P));const ni=Kt.rotation;V(n,ni,P=>i(79,vt=P));const Je=Xt.rotation;V(n,Je,P=>i(78,ut=P));const N=Kt.position;V(n,N,P=>i(83,fe=P));const Ut=Xt.position;V(n,Ut,P=>i(82,Vt=P));const pe=Kt.dynamic;V(n,pe,P=>i(75,jt=P));const T=Xt.dynamic;V(n,T,P=>i(74,it=P));const _t=Kt.moving;V(n,_t,P=>i(77,Ft=P));const j=Xt.moving;V(n,j,P=>i(76,Pt=P));const zt=(Yi=Kt.node)==null?void 0:Yi.position;V(n,zt,P=>i(81,te=P));const ge=(Ji=Xt.node)==null?void 0:Ji.position;V(n,ge,P=>i(80,Bt=P));const Ae=Ce.type;V(n,Ae,P=>i(73,wt=P));const Jt=Ce.id,ye=Kt.node.hidden;V(n,ye,P=>i(17,yt=P));const Yt=Xt.node.hidden;V(n,Yt,P=>i(18,Lt=P));let ee,Me,ci={x:0,y:0},oi=!1,wi=!1,_i=!1,Ye=!1;bi(()=>{setTimeout(()=>{Me&&i(10,ci=Fo(Me))},0)}),La(()=>{Me&&i(10,ci=Fo(Me))}),_o(()=>{cancelAnimationFrame(qo)});function Xi(){oi&&(Me&&i(10,ci=Fo(Me)),qo=requestAnimationFrame(Xi))}function Ii(){if(Kt.id===null||Xt.id===null)return;const P=me.match(Kt,Xt);me.delete(P[0]),Kt==null||Kt.connected.update(he=>(Xt&&he.delete(Xt),he)),Xt==null||Xt.connected.update(he=>(Kt&&he.delete(Kt),he))}function pn(P){Oi[P?"unshift":"push"](()=>{Me=P,i(9,Me)})}return n.$$set=P=>{"edge"in P&&i(36,Ce=P.edge),"straight"in P&&i(37,Ge=P.straight),"step"in P&&i(38,we=P.step),"animate"in P&&i(0,De=P.animate),"label"in P&&i(39,Ve=P.label),"edgeClick"in P&&i(1,Ke=P.edgeClick),"width"in P&&i(2,Ue=P.width),"color"in P&&i(40,li=P.color),"labelColor"in P&&i(3,ei=P.labelColor),"textColor"in P&&i(4,ui=P.textColor),"cornerRadius"in P&&i(41,ze=P.cornerRadius),"targetColor"in P&&i(5,Xe=P.targetColor),"$$scope"in P&&i(86,_e=P.$$scope)},n.$$.update=()=>{var P;if(n.$$.dirty[2]&12288&&i(51,r=jt||it),n.$$.dirty[1]&32&&Le(i(15,s=(P=Ce.label)==null?void 0:P.text)),n.$$.dirty[1]&512|n.$$.dirty[2]&8388608&&i(14,l=li||st||null),n.$$.dirty[1]&256|n.$$.dirty[2]&4194304&&i(7,h=Ve||R||""),n.$$.dirty[0]&128&&i(6,c=h||qe.label),n.$$.dirty[2]&2097152&&i(68,d=fe),n.$$.dirty[2]&1048576&&i(67,_=Vt),n.$$.dirty[2]&524288&&i(52,p=te),n.$$.dirty[2]&262144&&i(53,v=Bt),n.$$.dirty[2]&64&&i(48,g=d.x),n.$$.dirty[2]&64&&i(47,b=d.y),n.$$.dirty[2]&32&&i(50,w=_.x),n.$$.dirty[2]&32&&i(49,k=_.y),n.$$.dirty[1]&655360&&i(66,M=w-g),n.$$.dirty[1]&327680&&i(65,O=k-b),n.$$.dirty[2]&16&&i(64,I=Math.abs(M)),n.$$.dirty[2]&8&&i(63,Z=Math.abs(O)),n.$$.dirty[2]&4&&i(61,D=Math.max(30,Math.min(600,I/2))),n.$$.dirty[2]&2&&i(59,H=Math.max(30,Math.min(600,Z/2))),n.$$.dirty[1]&7364608&&r&&Kt.node&&Xt.node){const he=v.x-p.x,je=v.y-p.y;i(44,_i=je>0),i(45,Ye=he>0);let Se,si;if(_i){const Qe=$(Kt.node.dimensions.height),Qt=p.y+Qe;Se=v.y-Qt}else{const Qe=$(Xt.node.dimensions.height),Qt=v.y+Qe;Se=p.y-Qt}if(Ye){const Qe=$(Kt.node.dimensions.width),Qt=p.x+Qe;si=v.x-Qt}else{const Qe=$(Xt.node.dimensions.width),Qt=v.x+Qe;si=p.x-Qt}i(43,wi=Se>si)}if(n.$$.dirty[1]&1077248|n.$$.dirty[2]&12288&&r){let he,je;wi?(he=_i?"south":"north",je=_i?"north":"south"):(he=Ye?"east":"west",je=Ye?"west":"east"),jt&&ft(hi,mt=he,mt),it&&ft(ii,gt=je,gt)}if(n.$$.dirty[2]&132096&&i(62,G=ar(Tn[mt],vt||0)),n.$$.dirty[2]&66048&&i(60,X=ar(Tn[gt],ut||0)),n.$$.dirty[1]&1073872896|n.$$.dirty[2]&1&&i(58,Y=g+G.x*D),n.$$.dirty[1]&268500992|n.$$.dirty[2]&1&&i(57,ht=b+G.y*H),n.$$.dirty[1]&1611137024&&i(56,nt=w+X.x*D),n.$$.dirty[1]&805568512&&i(55,A=k+X.y*H),n.$$.dirty[1]&251658240&&i(54,ot=`C ${Y}, ${ht} ${nt}, ${A}`),n.$$.dirty[1]&9371840|n.$$.dirty[2]&2048&&(!we||Jt==="cursor"||wt==="bezier")&&i(8,ee=`M ${g}, ${b} ${!Ge&&ot} ${w}, ${k}`),n.$$.dirty[0]&64|n.$$.dirty[1]&2048|n.$$.dirty[2]&49152&&(c&&!oi&&(Ft||Pt||Jt==="cursor")?(i(42,oi=!0),Xi()):oi&&!Ft&&!Pt&&Jt!=="cursor"&&(i(42,oi=!1),cancelAnimationFrame(qo))),n.$$.dirty[1]&984192|n.$$.dirty[2]&3584&&we&&Jt!=="cursor"&&!(wt&&wt==="bezier")){const he={x:g,y:b,direction:Tn[mt]},je={x:w,y:k,direction:Tn[gt]},Se=Tu(he,je,hu),si=(Qe,Qt,Ht)=>{if(Qt<Se.length-1){const ie=wu(Qe,Se[Qt+1]);return Lu(Ht,ie)}return""};i(8,ee=Se.reduce((Qe,Qt,Ht)=>{const ie=Math.sign(Qt.x),Qi=Math.sign(Qt.y);let Mi=Qt.x,Si=Qt.y,$i="";if(ze){const Tt=Se[Ht+1]||{x:0,y:0},ve=Se[Ht-1]||{x:0,y:0},gn=Qn(Qt.x,Tt.x,ze),tn=Qn(Tt.y,Qt.y,ze),$e=Qn(ve.x,Qt.x,ze),go=Qn(ve.y,Qt.y,ze),Bi=Math.min($e,go),mi=Math.min(gn,tn);Qt.x?Mi=Qt.x-(mi+Bi)*ie:Si=Qt.y-(mi+Bi)*Qi,$i=si(Qt,Ht,mi)}return Cu(Qe,Mi,Si,$i)},`M ${g}, ${b}`))}n.$$.dirty[2]&384&&i(46,F=Math.max(bt,lt)),n.$$.dirty[1]&32768|n.$$.dirty[2]&384&&i(11,Zt=Ee==="all"?1e5:Ee?F:ke===!0?F-1:ke==="source"?bt-1:ke==="target"?lt-1:0)},xt(i(16,a=(Kt==null?void 0:Kt.edgeColor)||(Xt==null?void 0:Xt.edgeColor)||null)),St(i(13,E=Kt.node.zIndex||0)),et(i(12,at=Xt.node.zIndex||0)),[De,Ke,Ue,ei,ui,Xe,c,h,ee,Me,ci,Zt,at,E,l,s,a,yt,Lt,hi,ii,ni,Je,N,Ut,pe,T,_t,j,zt,ge,Ae,Jt,ye,Yt,Ii,Ce,Ge,we,Ve,li,ze,oi,wi,_i,Ye,F,b,g,k,w,r,p,v,ot,A,nt,ht,Y,H,X,D,G,Z,I,O,M,_,d,lt,bt,gt,mt,wt,it,jt,Pt,Ft,ut,vt,Bt,te,Vt,fe,R,st,_e,Ne,pn]}class tc extends ue{constructor(e){super(),le(this,e,$h,Qh,ne,{edge:36,straight:37,step:38,animate:0,label:39,edgeClick:1,width:2,color:40,labelColor:3,textColor:4,cornerRadius:41,targetColor:5},null,[-1,-1,-1,-1])}}function ec(n){let e;const i=n[2].default,r=Ze(i,n,n[1],null);return{c(){r&&r.c()},m(a,s){r&&r.m(a,s),e=!0},p(a,[s]){r&&r.p&&(!e||s&2)&&Re(r,i,a,a[1],e?Be(i,a[1],s,null):He(a[1]),null)},i(a){e||(B(r,a),e=!0)},o(a){W(r,a),e=!1},d(a){r&&r.d(a)}}}function ic(n,e,i){let{$$slots:r={},$$scope:a}=e,{edge:s}=e;return $t("edge",s),n.$$set=l=>{"edge"in l&&i(0,s=l.edge),"$$scope"in l&&i(1,a=l.$$scope)},[s,a,r]}class nc extends ue{constructor(e){super(),le(this,e,ic,ec,ne,{edge:0})}}function Fr(n,e,i){const r=n.slice();r[3]=e[i][0],r[4]=e[i][1];const a=r[4].component;return r[5]=a,r}function oc(n){let e,i;return e=new tc({props:{edge:n[4]}}),{c(){Dt(e.$$.fragment)},m(r,a){Ot(e,r,a),i=!0},p(r,a){const s={};a&1&&(s.edge=r[4]),e.$set(s)},i(r){i||(B(e.$$.fragment,r),i=!0)},o(r){W(e.$$.fragment,r),i=!1},d(r){It(e,r)}}}function sc(n){let e,i;return e=new nc({props:{edge:n[4],$$slots:{default:[rc]},$$scope:{ctx:n}}}),{c(){Dt(e.$$.fragment)},m(r,a){Ot(e,r,a),i=!0},p(r,a){const s={};a&1&&(s.edge=r[4]),a&256&&(s.$$scope={dirty:a,ctx:r}),e.$set(s)},i(r){i||(B(e.$$.fragment,r),i=!0)},o(r){W(e.$$.fragment,r),i=!1},d(r){It(e,r)}}}function rc(n){let e,i,r;return e=new n[5]({}),{c(){Dt(e.$$.fragment),i=Ct()},m(a,s){Ot(e,a,s),tt(a,i,s),r=!0},i(a){r||(B(e.$$.fragment,a),r=!0)},o(a){W(e.$$.fragment,a),r=!1},d(a){It(e,a),a&&Q(i)}}}function Wr(n,e){let i,r,a,s,l;const h=[sc,oc],c=[];function d(_,p){return _[5]?0:1}return r=d(e),a=c[r]=h[r](e),{key:n,first:null,c(){i=Pe(),a.c(),s=Pe(),this.first=i},m(_,p){tt(_,i,p),c[r].m(_,p),tt(_,s,p),l=!0},p(_,p){e=_;let v=r;r=d(e),r===v?c[r].p(e,p):(re(),W(c[v],1,1,()=>{c[v]=null}),ae(),a=c[r],a?a.p(e,p):(a=c[r]=h[r](e),a.c()),B(a,1),a.m(s.parentNode,s))},i(_){l||(B(a),l=!0)},o(_){W(a),l=!1},d(_){_&&Q(i),c[r].d(_),_&&Q(s)}}}function ac(n){let e=[],i=new Map,r,a,s=Array.from(n[0]);const l=h=>h[3];for(let h=0;h<s.length;h+=1){let c=Fr(n,s,h),d=l(c);i.set(d,e[h]=Wr(d,c))}return{c(){for(let h=0;h<e.length;h+=1)e[h].c();r=Pe()},m(h,c){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(h,c);tt(h,r,c),a=!0},p(h,[c]){c&1&&(s=Array.from(h[0]),re(),e=so(e,c,l,1,h,s,i,r.parentNode,oo,Wr,r,Fr),ae())},i(h){if(!a){for(let c=0;c<s.length;c+=1)B(e[c]);a=!0}},o(h){for(let c=0;c<e.length;c+=1)W(e[c]);a=!1},d(h){for(let c=0;c<e.length;c+=1)e[c].d(h);h&&Q(r)}}}function lc(n,e,i){let r;const s=Gt("graph").edges;return V(n,s,l=>i(0,r=l)),[r,s]}class uc extends ue{constructor(e){super(),le(this,e,lc,ac,ne,{})}}function hc(n){let e,i,r,a;const s=n[11].default,l=Ze(s,n,n[10],null);return{c(){e=dt("div"),l&&l.c(),S(e,"class","svelvet-graph-wrapper svelte-19pa6i0"),S(e,"role","presentation"),J(e,"transform",n[0])},m(h,c){tt(h,e,c),l&&l.m(e,null),i=!0,r||(a=[Et(e,"contextmenu",hn(ri(n[12]))),Et(e,"click",hn(ri(n[13]))),Et(e,"touchstart",hn(ri(n[14])))],r=!0)},p(h,[c]){l&&l.p&&(!i||c&1024)&&Re(l,s,h,h[10],i?Be(s,h[10],c,null):He(h[10]),null),c&1&&J(e,"transform",h[0])},i(h){i||(B(l,h),i=!0)},o(h){W(l,h),i=!1},d(h){h&&Q(e),l&&l.d(h),r=!1,Ie(a)}}}function cc(n,e,i){let r,a,s,l,h,{$$slots:c={},$$scope:d}=e;const _=Gt("graph"),p=_.transforms,v=p.scale;V(n,v,H=>i(9,h=H));const g=p.translation;V(n,g,H=>i(8,l=H));const b=_.cursor;V(n,b,H=>i(15,s=H));let{isMovable:w}=e,k,M=!1;function O(){ft(g,l=Su($(Oe),s,p),l),i(5,k=requestAnimationFrame(O))}function I(H){be.call(this,n,H)}function Z(H){be.call(this,n,H)}function D(H){be.call(this,n,H)}return n.$$set=H=>{"isMovable"in H&&i(4,w=H.isMovable),"$$scope"in H&&i(10,d=H.$$scope)},n.$$.update=()=>{n.$$.dirty&256&&i(7,r=l),n.$$.dirty&640&&i(0,a=`translate(${r.x}px, ${r.y}px) scale(${h})`),n.$$.dirty&112&&(w&&!M?(i(6,M=!0),i(5,k=requestAnimationFrame(O))):(!w||!M)&&(i(6,M=!1),cancelAnimationFrame(k)))},[a,v,g,b,w,k,M,r,l,h,d,c,I,Z,D]}class fc extends ue{constructor(e){super(),le(this,e,cc,hc,ne,{isMovable:4})}}function dc(n){let e,i,r,a,s;const l=n[8].default,h=Ze(l,n,n[9],null);return i=new uc({}),a=new Vh({}),a.$on("groupClick",n[5]),{c(){h&&h.c(),e=Ct(),Dt(i.$$.fragment),r=Ct(),Dt(a.$$.fragment)},m(c,d){h&&h.m(c,d),tt(c,e,d),Ot(i,c,d),tt(c,r,d),Ot(a,c,d),s=!0},p(c,d){h&&h.p&&(!s||d&512)&&Re(h,l,c,c[9],s?Be(l,c[9],d,null):He(c[9]),null)},i(c){s||(B(h,c),B(i.$$.fragment,c),B(a.$$.fragment,c),s=!0)},o(c){W(h,c),W(i.$$.fragment,c),W(a.$$.fragment,c),s=!1},d(c){h&&h.d(c),c&&Q(e),It(i,c),c&&Q(r),It(a,c)}}}function _c(n){let e,i;return e=new fc({props:{isMovable:n[0],$$slots:{default:[dc]},$$scope:{ctx:n}}}),{c(){Dt(e.$$.fragment)},m(r,a){Ot(e,r,a),i=!0},p(r,[a]){const s={};a&1&&(s.isMovable=r[0]),a&512&&(s.$$scope={dirty:a,ctx:r}),e.$set(s)},i(r){i||(B(e.$$.fragment,r),i=!0)},o(r){W(e.$$.fragment,r),i=!1},d(r){It(e,r)}}}function mc(n,e,i){let r,a,s,l,h,c;V(n,Oe,I=>i(13,l=I)),V(n,ai,I=>i(7,c=I));let{$$slots:d={},$$scope:_}=e;const p=Gt("graph"),v=Gt("snapTo");let{isMovable:g}=e;const b=p.activeGroup;V(n,b,I=>i(6,h=I));const w=p.groups;V(n,w,I=>i(10,r=I));const k=p.initialNodePositions;V(n,k,I=>i(11,a=I));const M=p.cursor;V(n,M,I=>i(12,s=I));function O(I){ft(ai,c=!0,c);const{groupName:Z}=I.detail;ft(b,h=Z,h),ft(Oe,l=s,l),ft(k,a=Oa(r[Z].nodes),a)}return n.$$set=I=>{"isMovable"in I&&i(0,g=I.isMovable),"$$scope"in I&&i(9,_=I.$$scope)},n.$$.update=()=>{n.$$.dirty&192&&h&&c&&Du(p,v)},[g,b,w,k,M,O,h,c,d,_]}class pc extends ue{constructor(e){super(),le(this,e,mc,_c,ne,{isMovable:0})}}function gc(n){let e,i;return{c(){e=yi("line"),i=yi("line"),S(e,"x1",n[8]),S(e,"y1",0),S(e,"x2",n[8]),S(e,"y2",n[5]),S(e,"stroke-width",n[4]),S(i,"y1",n[8]),S(i,"x1",0),S(i,"y2",n[8]),S(i,"x2",n[5]),S(i,"stroke-width",n[4])},m(r,a){tt(r,e,a),tt(r,i,a)},p(r,a){a&256&&S(e,"x1",r[8]),a&256&&S(e,"x2",r[8]),a&32&&S(e,"y2",r[5]),a&16&&S(e,"stroke-width",r[4]),a&256&&S(i,"y1",r[8]),a&256&&S(i,"y2",r[8]),a&32&&S(i,"x2",r[5]),a&16&&S(i,"stroke-width",r[4])},d(r){r&&Q(e),r&&Q(i)}}}function yc(n){let e;return{c(){e=yi("circle"),S(e,"class","background-dot svelte-1iqxg5z"),S(e,"r",n[4]),S(e,"cx",n[8]),S(e,"cy",n[8]),J(e,"--calculated-dot-color",n[2])},m(i,r){tt(i,e,r)},p(i,r){r&16&&S(e,"r",i[4]),r&256&&S(e,"cx",i[8]),r&256&&S(e,"cy",i[8]),r&4&&J(e,"--calculated-dot-color",i[2])},d(i){i&&Q(e)}}}function vc(n){let e,i,r,a,s;function l(d,_){if(d[0]==="dots")return yc;if(d[0]==="lines")return gc}let h=l(n),c=h&&h(n);return{c(){e=dt("div"),i=yi("svg"),r=yi("defs"),a=yi("pattern"),c&&c.c(),s=yi("rect"),S(a,"id","graph-pattern"),S(a,"x",n[6]),S(a,"y",n[7]),S(a,"width",n[5]),S(a,"height",n[5]),S(a,"patternUnits","userSpaceOnUse"),S(s,"width","100%"),S(s,"height","100%"),S(s,"fill","url(#graph-pattern)"),S(i,"class","svelte-1iqxg5z"),S(e,"id","background-wrapper"),S(e,"class","svelte-1iqxg5z"),J(e,"--calculated-background-color",n[1])},m(d,_){tt(d,e,_),rt(e,i),rt(i,r),rt(r,a),c&&c.m(a,null),rt(i,s),n[19](e)},p(d,[_]){h===(h=l(d))&&c?c.p(d,_):(c&&c.d(1),c=h&&h(d),c&&(c.c(),c.m(a,null))),_&64&&S(a,"x",d[6]),_&128&&S(a,"y",d[7]),_&32&&S(a,"width",d[5]),_&32&&S(a,"height",d[5]),_&2&&J(e,"--calculated-background-color",d[1])},i:pt,o:pt,d(d){d&&Q(e),c&&c.d(),n[19](null)}}}function bc(n,e,i){let r,a,s,l,h,c,d;const _=Gt("graph");let{style:p="dots"}=e,{gridWidth:v=lu}=e,{dotSize:g=uu}=e,{bgColor:b=null}=e,{dotColor:w=null}=e;const k=_.transforms,M=k.scale;V(n,M,Y=>i(17,c=Y));const O=k.translation;V(n,O,Y=>i(18,d=Y));let I,Z,D,H,G;function X(Y){Oi[Y?"unshift":"push"](()=>{I=Y,i(3,I)})}return n.$$set=Y=>{"style"in Y&&i(0,p=Y.style),"gridWidth"in Y&&i(11,v=Y.gridWidth),"dotSize"in Y&&i(12,g=Y.dotSize),"bgColor"in Y&&i(1,b=Y.bgColor),"dotColor"in Y&&i(2,w=Y.dotColor)},n.$$.update=()=>{n.$$.dirty&262144&&i(15,r=d),n.$$.dirty&131072&&i(16,a=c),n.$$.dirty&67584&&i(5,s=a*v),n.$$.dirty&69632&&i(4,l=a*g/2),n.$$.dirty&32&&i(8,h=s/2),n.$$.dirty&122904&&(i(13,Z=(I==null?void 0:I.offsetWidth)||0),i(14,D=(I==null?void 0:I.offsetHeight)||0),i(6,H=(Z+l)*(1-a)/2+r.x),i(7,G=(D+l)*(1-a)/2+r.y))},[p,b,w,I,l,s,H,G,h,M,O,v,g,Z,D,r,a,c,d,X]}class Ra extends ue{constructor(e){super(),le(this,e,bc,vc,ne,{style:0,gridWidth:11,dotSize:12,bgColor:1,dotColor:2})}}function wc(n){let e,i;return{c(){e=dt("div"),i=dt("div"),S(i,"class","selection-box svelte-10ds4jd"),Nt(i,"creating",n[0]),S(e,"class","selection-border svelte-10ds4jd"),Nt(e,"creating",n[0]),J(e,"--prop-selection-box-color",n[1]),J(e,"height",n[4]),J(e,"width",n[3]),J(e,"top",n[6]),J(e,"left",n[5])},m(r,a){tt(r,e,a),rt(e,i),n[18](i)},p(r,[a]){a&1&&Nt(i,"creating",r[0]),a&1&&Nt(e,"creating",r[0]),a&2&&J(e,"--prop-selection-box-color",r[1]),a&16&&J(e,"height",r[4]),a&8&&J(e,"width",r[3]),a&64&&J(e,"top",r[6]),a&32&&J(e,"left",r[5])},i:pt,o:pt,d(r){r&&Q(e),n[18](null)}}}function Lc(n,e,i){let r,a,s,l,h,c,d,_,p,v,g=pt,b=()=>(g(),g=se(r,A=>i(20,v=A)),r),w,k;V(n,Ta,A=>i(16,w=A)),n.$$.on_destroy.push(()=>g());let{graph:M}=e,{anchor:O}=e,{adding:I=!1}=e,{creating:Z=!1}=e,{color:D=null}=e;const{groups:H}=M;V(n,H,A=>i(17,k=A));let G,X;bi(Y);function Y(){G=Array.from(document.querySelectorAll(".svelvet-node")).map(ot=>{const{top:E,left:at,width:F,height:Zt}=ot.getBoundingClientRect();return{id:ot.id,top:E,left:at,width:F,height:Zt}})}function ht(){if(!G)return;const A=G.reduce((ot,E)=>{if(h+O.left<=E.left&&l+O.top<=E.top&&h+O.left+Math.abs(s)>=E.left+E.width&&l+O.top+Math.abs(a)>=E.top+E.height){const at=E.id,F=M.nodes.get(at);if(!F)return ot;ot.push(F)}return ot},[]);I?A.forEach(ot=>{v.add(ot)}):ft(r,v=new Set(A),v),r.set(v)}function nt(A){Oi[A?"unshift":"push"](()=>{X=A,i(2,X)})}return n.$$set=A=>{"graph"in A&&i(9,M=A.graph),"anchor"in A&&i(10,O=A.anchor),"adding"in A&&i(11,I=A.adding),"creating"in A&&i(0,Z=A.creating),"color"in A&&i(1,D=A.color)},n.$$.update=()=>{n.$$.dirty&131072&&b(i(7,r=k.selected.nodes)),n.$$.dirty&66560&&i(12,a=w.y-O.y-O.top),n.$$.dirty&66560&&i(14,s=w.x-O.x-O.left),n.$$.dirty&5120&&i(13,l=Math.min(O.y,O.y+a)),n.$$.dirty&17408&&i(15,h=Math.min(O.x,O.x+s)),n.$$.dirty&8192&&i(6,c=`${l}px`),n.$$.dirty&32768&&i(5,d=`${h}px`),n.$$.dirty&4096&&i(4,_=`${Math.abs(a)}px`),n.$$.dirty&16384&&i(3,p=`${Math.abs(s)}px`),n.$$.dirty&20480&&(s||a)&&ht()},[Z,D,X,p,_,d,c,r,H,M,O,I,a,l,s,h,w,k,nt]}class Cc extends ue{constructor(e){super(),le(this,e,Lc,wc,ne,{graph:9,anchor:10,adding:11,creating:0,color:1})}}const Pc=n=>({}),Ur=n=>({}),kc=n=>({}),jr=n=>({}),Mc=n=>({}),qr=n=>({}),Sc=n=>({}),Vr=n=>({});function Kr(n){let e,i;return e=new Gh({props:{editing:n[19]}}),{c(){Dt(e.$$.fragment)},m(r,a){Ot(e,r,a),i=!0},p(r,a){const s={};a[0]&524288&&(s.editing=r[19]),e.$set(s)},i(r){i||(B(e.$$.fragment,r),i=!0)},o(r){W(e.$$.fragment,r),i=!1},d(r){It(e,r)}}}function xc(n){let e,i,r=n[19]&&Kr(n);const a=n[50].default,s=Ze(a,n,n[52],null);return{c(){r&&r.c(),e=Ct(),s&&s.c()},m(l,h){r&&r.m(l,h),tt(l,e,h),s&&s.m(l,h),i=!0},p(l,h){l[19]?r?(r.p(l,h),h[0]&524288&&B(r,1)):(r=Kr(l),r.c(),B(r,1),r.m(e.parentNode,e)):r&&(re(),W(r,1,1,()=>{r=null}),ae()),s&&s.p&&(!i||h[1]&2097152)&&Re(s,a,l,l[52],i?Be(a,l[52],h,null):He(l[52]),null)},i(l){i||(B(r),B(s,l),i=!0)},o(l){W(r),W(s,l),i=!1},d(l){r&&r.d(l),l&&Q(e),s&&s.d(l)}}}function Tc(n){let e,i;return e=new Ra({}),{c(){Dt(e.$$.fragment)},m(r,a){Ot(e,r,a),i=!0},p:pt,i(r){i||(B(e.$$.fragment,r),i=!0)},o(r){W(e.$$.fragment,r),i=!1},d(r){It(e,r)}}}function Ec(n){let e;const i=n[50].background,r=Ze(i,n,n[52],Vr);return{c(){r&&r.c()},m(a,s){r&&r.m(a,s),e=!0},p(a,s){r&&r.p&&(!e||s[1]&2097152)&&Re(r,i,a,a[52],e?Be(i,a[52],s,Sc):He(a[52]),Vr)},i(a){e||(B(r,a),e=!0)},o(a){W(r,a),e=!1},d(a){r&&r.d(a)}}}function Xr(n){let e,i,r;var a=n[11];function s(l){return{}}return a&&(e=dn(a,s())),{c(){e&&Dt(e.$$.fragment),i=Pe()},m(l,h){e&&Ot(e,l,h),tt(l,i,h),r=!0},p(l,h){if(h[0]&2048&&a!==(a=l[11])){if(e){re();const c=e;W(c.$$.fragment,1,0,()=>{It(c,1)}),ae()}a?(e=dn(a,s()),Dt(e.$$.fragment),B(e.$$.fragment,1),Ot(e,i.parentNode,i)):e=null}},i(l){r||(e&&B(e.$$.fragment,l),r=!0)},o(l){e&&W(e.$$.fragment,l),r=!1},d(l){l&&Q(i),e&&It(e,l)}}}function Yr(n){let e,i,r;var a=n[12];function s(l){return{}}return a&&(e=dn(a,s())),{c(){e&&Dt(e.$$.fragment),i=Pe()},m(l,h){e&&Ot(e,l,h),tt(l,i,h),r=!0},p(l,h){if(h[0]&4096&&a!==(a=l[12])){if(e){re();const c=e;W(c.$$.fragment,1,0,()=>{It(c,1)}),ae()}a?(e=dn(a,s()),Dt(e.$$.fragment),B(e.$$.fragment,1),Ot(e,i.parentNode,i)):e=null}},i(l){r||(e&&B(e.$$.fragment,l),r=!0)},o(l){e&&W(e.$$.fragment,l),r=!1},d(l){l&&Q(i),e&&It(e,l)}}}function Jr(n){let e,i,r;var a=n[10];function s(l){return{}}return a&&(e=dn(a,s())),{c(){e&&Dt(e.$$.fragment),i=Pe()},m(l,h){e&&Ot(e,l,h),tt(l,i,h),r=!0},p(l,h){if(h[0]&1024&&a!==(a=l[10])){if(e){re();const c=e;W(c.$$.fragment,1,0,()=>{It(c,1)}),ae()}a?(e=dn(a,s()),Dt(e.$$.fragment),B(e.$$.fragment,1),Ot(e,i.parentNode,i)):e=null}},i(l){r||(e&&B(e.$$.fragment,l),r=!0)},o(l){e&&W(e.$$.fragment,l),r=!1},d(l){l&&Q(i),e&&It(e,l)}}}function Qr(n){let e,i;return e=new Cc({props:{creating:n[15],anchor:n[13],graph:n[0],adding:n[16],color:n[7]}}),{c(){Dt(e.$$.fragment)},m(r,a){Ot(e,r,a),i=!0},p(r,a){const s={};a[0]&32768&&(s.creating=r[15]),a[0]&8192&&(s.anchor=r[13]),a[0]&1&&(s.graph=r[0]),a[0]&65536&&(s.adding=r[16]),a[0]&128&&(s.color=r[7]),e.$set(s)},i(r){i||(B(e.$$.fragment,r),i=!0)},o(r){W(e.$$.fragment,r),i=!1},d(r){It(e,r)}}}function zc(n){let e,i,r,a,s,l,h,c,d,_,p,v,g,b,w,k;i=new pc({props:{isMovable:n[17],$$slots:{default:[xc]},$$scope:{ctx:n}}});const M=[Ec,Tc],O=[];function I(E,at){return E[8]?0:1}a=I(n),s=O[a]=M[a](n);let Z=n[3]&&Xr(n),D=n[4]&&Yr(n),H=n[5]&&Jr(n);const G=n[50].minimap,X=Ze(G,n,n[52],qr),Y=n[50].controls,ht=Ze(Y,n,n[52],jr),nt=n[50].toggle,A=Ze(nt,n,n[52],Ur);let ot=n[14]&&!n[6]&&Qr(n);return{c(){e=dt("section"),Dt(i.$$.fragment),r=Ct(),s.c(),l=Ct(),Z&&Z.c(),h=Ct(),D&&D.c(),c=Ct(),H&&H.c(),d=Ct(),X&&X.c(),_=Ct(),ht&&ht.c(),p=Ct(),A&&A.c(),v=Ct(),ot&&ot.c(),S(e,"id",g=n[0].id),S(e,"class","svelvet-wrapper svelte-jhwgz3"),S(e,"title",n[9]),S(e,"tabindex",0),J(e,"width",n[1]?n[1]+"px":"100%"),J(e,"height",n[2]?n[2]+"px":"100%")},m(E,at){tt(E,e,at),Ot(i,e,null),rt(e,r),O[a].m(e,null),rt(e,l),Z&&Z.m(e,null),rt(e,h),D&&D.m(e,null),rt(e,c),H&&H.m(e,null),rt(e,d),X&&X.m(e,null),rt(e,_),ht&&ht.m(e,null),rt(e,p),A&&A.m(e,null),rt(e,v),ot&&ot.m(e,null),n[51](e),b=!0,w||(k=[Et(window,"touchend",n[31]),Et(window,"mouseup",n[31]),Et(window,"scroll",n[30]),Et(window,"resize",n[30]),Et(e,"wheel",ri(n[37])),Et(e,"mousedown",hn(ri(n[32]))),Et(e,"touchend",ri(n[34])),Et(e,"touchstart",hn(ri(n[33]))),Et(e,"keydown",n[35]),Et(e,"keyup",n[36])],w=!0)},p(E,at){const F={};at[0]&131072&&(F.isMovable=E[17]),at[0]&524288|at[1]&2097152&&(F.$$scope={dirty:at,ctx:E}),i.$set(F);let Zt=a;a=I(E),a===Zt?O[a].p(E,at):(re(),W(O[Zt],1,1,()=>{O[Zt]=null}),ae(),s=O[a],s?s.p(E,at):(s=O[a]=M[a](E),s.c()),B(s,1),s.m(e,l)),E[3]?Z?(Z.p(E,at),at[0]&8&&B(Z,1)):(Z=Xr(E),Z.c(),B(Z,1),Z.m(e,h)):Z&&(re(),W(Z,1,1,()=>{Z=null}),ae()),E[4]?D?(D.p(E,at),at[0]&16&&B(D,1)):(D=Yr(E),D.c(),B(D,1),D.m(e,c)):D&&(re(),W(D,1,1,()=>{D=null}),ae()),E[5]?H?(H.p(E,at),at[0]&32&&B(H,1)):(H=Jr(E),H.c(),B(H,1),H.m(e,d)):H&&(re(),W(H,1,1,()=>{H=null}),ae()),X&&X.p&&(!b||at[1]&2097152)&&Re(X,G,E,E[52],b?Be(G,E[52],at,Mc):He(E[52]),qr),ht&&ht.p&&(!b||at[1]&2097152)&&Re(ht,Y,E,E[52],b?Be(Y,E[52],at,kc):He(E[52]),jr),A&&A.p&&(!b||at[1]&2097152)&&Re(A,nt,E,E[52],b?Be(nt,E[52],at,Pc):He(E[52]),Ur),E[14]&&!E[6]?ot?(ot.p(E,at),at[0]&16448&&B(ot,1)):(ot=Qr(E),ot.c(),B(ot,1),ot.m(e,null)):ot&&(re(),W(ot,1,1,()=>{ot=null}),ae()),(!b||at[0]&1&&g!==(g=E[0].id))&&S(e,"id",g),(!b||at[0]&512)&&S(e,"title",E[9]),at[0]&2&&J(e,"width",E[1]?E[1]+"px":"100%"),at[0]&4&&J(e,"height",E[2]?E[2]+"px":"100%")},i(E){b||(B(i.$$.fragment,E),B(s),B(Z),B(D),B(H),B(X,E),B(ht,E),B(A,E),B(ot),b=!0)},o(E){W(i.$$.fragment,E),W(s),W(Z),W(D),W(H),W(X,E),W(ht,E),W(A,E),W(ot),b=!1},d(E){E&&Q(e),It(i),O[a].d(),Z&&Z.d(),D&&D.d(),H&&H.d(),X&&X.d(E),ht&&ht.d(E),A&&A.d(E),ot&&ot.d(),n[51](null),w=!1,Ie(k)}}}let Vo;function Ac(n,e,i){let r,a,s,l,h,c,d,_,p,v,g,b,w,k,M;V(n,es,N=>i(64,c=N)),V(n,Oe,N=>i(65,d=N)),V(n,ai,N=>i(66,p=N)),V(n,ki,N=>i(69,b=N));let{$$slots:O={},$$scope:I}=e,{graph:Z}=e,{width:D}=e,{height:H}=e,{minimap:G=!1}=e,{controls:X=!1}=e,{toggle:Y=!1}=e,{fixedZoom:ht=!1}=e,{disableSelection:nt=!1}=e,{ZOOM_INCREMENT:A=.1}=e,{PAN_INCREMENT:ot=50}=e,{PAN_TIME:E=250}=e,{MAX_SCALE:at=3}=e,{MIN_SCALE:F=.2}=e,{selectionColor:Zt}=e,{backgroundExists:lt}=e,{fitView:K=!1}=e,{trackpadPan:et}=e,{modifier:bt}=e,{theme:Mt="light"}=e,{title:St}=e;const gt=mo(),mt={},wt=q(!1),it=q(0),jt=q(null);V(n,jt,N=>i(18,_=N));const Pt=Z.cursor,Ft=Z.transforms.scale;V(n,Ft,N=>i(62,l=N));const ut=Z.dimensions;V(n,ut,N=>i(49,k=N));const vt=Z.transforms.translation;V(n,vt,N=>i(61,s=N));const Bt=Z.groups;V(n,Bt,N=>i(63,h=N));const te=Z.groupBoxes,Vt=h.selected.nodes;V(n,Vt,N=>i(60,a=N));const fe=Z.activeGroup;V(n,fe,N=>i(68,g=N));const R=Z.initialNodePositions;V(n,R,N=>i(67,v=N));const de=Z.editing;V(n,de,N=>i(19,M=N));const Le=Z.bounds.nodeBounds;V(n,Le,N=>i(70,w=N));let st=0,Rt=1,xt={x:0,y:0,top:0,left:0},yt=!1,Lt=!1,Ne=!1,_e=!1,qe=!1,me=!1,We,ke=null,Ee=null,Ce=null;const Ge={id:null,position:Z.cursor,offset:q({x:0,y:0}),connected:q(new Set),dynamic:q(!1),edge:null,edgeColor:q(null),direction:q("self"),inputKey:null,type:"output",moving:ao(!1),store:null,mounted:q(!0),rotation:ao(0),node:{zIndex:q(1/0),rotating:q(!1),position:Z.cursor,hidden:q(!1),dimensions:{width:q(0),height:q(0)}}};$t("graphDOMElement",jt),$t("cursorAnchor",Ge),$t("duplicate",wt),$t("graph",Z),$t("transforms",Z.transforms),$t("dimensions",Z.dimensions),$t("locked",Z.locked),$t("groups",Z.groups),$t("bounds",Z.bounds),$t("edgeStore",Z.edges),$t("nodeStore",Z.nodes),$t("mounted",it),bi(()=>{Ue()});async function we(){await Fl();const{x:N,y:Ut,scale:pe}=Au(We,w);N!==null&&Ut!==null&&pe!==null&&(Z.transforms.scale.set(pe),vt.set({x:N,y:Ut}))}async function De(){i(11,Ee=(await jo(()=>import("./Minimap-522677ba.js"),[])).default)}async function Ve(){i(10,ke=(await jo(()=>import("./ThemeToggle-ec99eaa9.js"),[])).default)}async function Ke(){i(12,Ce=(await jo(()=>import("./Controls-40579778.js"),[])).default)}function Ue(){if(!_)return;const N=_.getBoundingClientRect();We={top:N.top,left:N.left,bottom:N.bottom,right:N.right,width:N.width,height:N.height},Z.dimensions.set(We),K==="resize"&&we()}function li(N){if(gt("edgeDrop",{cursor:$(Pt),source:{node:b==null?void 0:b.anchor.node.id.slice(2),anchor:b==null?void 0:b.anchor.id.split("/")[0].slice(2)}}),Lt){const T=`${bu()}/${Z.id}`,_t=$(Pt),j=_t.x-d.x,zt=_t.y-d.y,ge=Math.min(d.y,d.y+zt),Ae=Math.min(d.x,d.x+j),Jt={width:q(Math.abs(j)),height:q(Math.abs(zt))},ye=q({x:Ae,y:ge}),Yt={group:q(T),dimensions:Jt,position:ye,color:q(du()),moving:q(!1)};te.add(Yt,T),Array.from(a).forEach(ee=>{ee.group.set(T)}),Bt.update(ee=>{const Me={parent:q(Yt),nodes:q(new Set([...a,Yt]))};return ee[T]=Me,ee}),ft(Vt,a=new Set,a),i(15,Lt=!1),i(14,yt=!1)}g&&Array.from($(h[g].nodes)).forEach(T=>T.moving.set(!1));const Ut=Z.edges.get("cursor");Ut&&(Z.edges.delete("cursor"),Ut.disconnect||gt("edgeDrop",{cursor:$(Pt),source:{node:b==null?void 0:b.anchor.node.id.slice(2),anchor:b==null?void 0:b.anchor.id.split("/")[0].slice(2)}})),ft(fe,g=null,g),ft(Oe,d={x:0,y:0},d),ft(R,v=[],v),i(14,yt=!1),i(17,_e=!1),ft(ai,p=!1,p),N.shiftKey||ki.set(null),i(13,xt.y=0,xt),i(13,xt.x=0,xt)}function ei(N){if(N.button===2)return;_&&_.focus();const{clientX:Ut,clientY:pe}=N;if(ft(Oe,d=$(Pt),d),N.shiftKey||N.metaKey){N.preventDefault(),i(14,yt=!0);const{top:T,left:_t}=r;i(13,xt.y=pe-T,xt),i(13,xt.x=Ut-_t,xt),i(13,xt.top=T,xt),i(13,xt.left=_t,xt),N.shiftKey&&N.metaKey?i(15,Lt=!0):i(15,Lt=!1),N.metaKey&&!N.shiftKey?i(16,Ne=!0):i(16,Ne=!1)}else i(17,_e=!0),ft(Vt,a=new Set,a),Vt.set(a)}function ui(N){ft(Vt,a=new Set,a),Vt.set(a),ft(Oe,d=$(Pt),d),i(17,_e=!0),N.touches.length===2&&(Xe(),st=c,Rt=l)}function ze(){i(17,_e=!1),qe=!1}function Xe(){qe||(qe=!0,Vo=requestAnimationFrame(Kt))}function Kt(){if(!qe){cancelAnimationFrame(Vo);return}const Ut=c/st;ft(Ft,l=Rt*Ut,l),Vo=requestAnimationFrame(Kt)}function Xt(N){const{key:Ut,code:pe}=N,T=N.target;if(!(pe==="KeyR"&&N.metaKey)&&!(T.tagName=="INPUT"||T.tagName=="TEXTAREA"))if(N.preventDefault(),pe==="KeyA"&&N[`${bt}Key`]){const _t=Z.nodes.getAll().filter(j=>!$(j.locked));ft(Vt,a=new Set(_t),a)}else ns(Ut)?ni(Ut,N):Ut==="="?lr(-1,Z.dimensions,Z.transforms,A):Ut==="-"?lr(1,Z.dimensions,Z.transforms,A):Ut==="0"?we():Ut==="Control"?h.selected.nodes.set(new Set):pe==="KeyD"&&N[`${bt}Key`]&&(wt.set(!0),setTimeout(()=>{wt.set(!1)},100))}function hi(N){const{key:Ut}=N;ns(Ut)?(clearInterval(mt[Ut]),delete mt[Ut]):Ut==="Shift"&&ki.set(null)}function ii(N){if(ht)return;const Ut=N.shiftKey?.15:1,{clientX:pe,clientY:T,deltaY:_t}=N,j=s,zt={x:pe,y:T};if((et||N.metaKey)&&_t%1===0){ft(vt,s={x:ft(vt,s.x-=N.deltaX,s),y:ft(vt,s.y-=N.deltaY,s)},s);return}if(l>=at&&_t<0||l<=F&&_t>0)return;const ge=Math.min(.009*Ut*Math.abs(_t),.08),Ae=za(l,Math.sign(_t),ge),Jt=Ea(l,Ae,j,zt,We);Ft.set(Ae),vt.set(Jt)}function ni(N,Ut){const pe=Ut.shiftKey?2:1,T=performance.now(),_t=N==="ArrowLeft"||N==="ArrowUp"?-1:1,j=N==="ArrowLeft"||N==="ArrowRight",zt=j?s.x:s.y,ge=zt+_t*ot*pe;if(!mt[N]){let Ae=setInterval(()=>{const Jt=performance.now()-T;if(a.size===0){const ye=zt+(ge-zt)*(Jt/E);vt.set({x:j?ye:s.x,y:j?s.y:ye})}else{const ye={x:j?_t*2:0,y:j?0:_t*2};Array.from(a).forEach(Yt=>{const ee=$(Yt.position);let Me;const ci=$(Yt.group),oi=$(Z.groupBoxes);if(ci&&(Me=oi.get(ci)),Me){const wi=$(Yt.dimensions.width),_i=$(Yt.dimensions.height),Ye=Da(Me,wi,_i);Na(ee,ye,Yt.position,Ye)}else Ia(ee,ye,Yt.position)})}},2);mt[N]=Ae}}function Je(N){Oi[N?"unshift":"push"](()=>{_=N,jt.set(_)})}return n.$$set=N=>{"graph"in N&&i(0,Z=N.graph),"width"in N&&i(1,D=N.width),"height"in N&&i(2,H=N.height),"minimap"in N&&i(3,G=N.minimap),"controls"in N&&i(4,X=N.controls),"toggle"in N&&i(5,Y=N.toggle),"fixedZoom"in N&&i(38,ht=N.fixedZoom),"disableSelection"in N&&i(6,nt=N.disableSelection),"ZOOM_INCREMENT"in N&&i(39,A=N.ZOOM_INCREMENT),"PAN_INCREMENT"in N&&i(40,ot=N.PAN_INCREMENT),"PAN_TIME"in N&&i(41,E=N.PAN_TIME),"MAX_SCALE"in N&&i(42,at=N.MAX_SCALE),"MIN_SCALE"in N&&i(43,F=N.MIN_SCALE),"selectionColor"in N&&i(7,Zt=N.selectionColor),"backgroundExists"in N&&i(8,lt=N.backgroundExists),"fitView"in N&&i(44,K=N.fitView),"trackpadPan"in N&&i(45,et=N.trackpadPan),"modifier"in N&&i(46,bt=N.modifier),"theme"in N&&i(47,Mt=N.theme),"title"in N&&i(9,St=N.title),"$$scope"in N&&i(52,I=N.$$scope)},n.$$.update=()=>{n.$$.dirty[1]&262144&&(r=k),n.$$.dirty[1]&65536&&Mt&&document.documentElement.setAttribute("svelvet-theme",Mt),n.$$.dirty[1]&139264&&!me&&K&&(we(),i(48,me=!0)),n.$$.dirty[0]&1056&&Y&&!ke&&Ve(),n.$$.dirty[0]&2056&&G&&!Ee&&De(),n.$$.dirty[0]&4112&&X&&!Ce&&Ke()},[Z,D,H,G,X,Y,nt,Zt,lt,St,ke,Ee,Ce,xt,yt,Lt,Ne,_e,_,M,jt,Ft,ut,vt,Bt,Vt,fe,R,de,Le,Ue,li,ei,ui,ze,Xt,hi,ii,ht,A,ot,E,at,F,K,et,bt,Mt,me,k,O,Je,I]}class Oc extends ue{constructor(e){super(),le(this,e,Ac,zc,ne,{graph:0,width:1,height:2,minimap:3,controls:4,toggle:5,fixedZoom:38,disableSelection:6,ZOOM_INCREMENT:39,PAN_INCREMENT:40,PAN_TIME:41,MAX_SCALE:42,MIN_SCALE:43,selectionColor:7,backgroundExists:8,fitView:44,trackpadPan:45,modifier:46,theme:47,title:9},null,[-1,-1,-1])}}const Ic=n=>({}),$r=n=>({slot:"minimap"}),Nc=n=>({}),ta=n=>({slot:"controls"}),Dc=n=>({}),ea=n=>({slot:"background"}),Zc=n=>({}),ia=n=>({slot:"toggle"});function Bc(n){let e;return{c(){e=dt("div"),S(e,"class","svelvet-temp svelte-dunl81"),J(e,"width",n[2]?n[2]+"px":"100%"),J(e,"height",n[3]?n[3]+"px":"100%")},m(i,r){tt(i,e,r)},p(i,r){r[0]&4&&J(e,"width",i[2]?i[2]+"px":"100%"),r[0]&8&&J(e,"height",i[3]?i[3]+"px":"100%")},i:pt,o:pt,d(i){i&&Q(e)}}}function Rc(n){let e,i;return e=new Oc({props:{width:n[2],height:n[3],toggle:n[6],backgroundExists:n[15],minimap:n[4],graph:n[14],fitView:n[7],theme:n[1],controls:n[5],selectionColor:n[8],disableSelection:n[9],trackpadPan:n[11],modifier:n[12],title:n[13],$$slots:{toggle:[Uc],background:[Wc],controls:[Fc],minimap:[Gc],default:[Hc]},$$scope:{ctx:n}}}),e.$on("edgeDrop",n[28]),{c(){Dt(e.$$.fragment)},m(r,a){Ot(e,r,a),i=!0},p(r,a){const s={};a[0]&4&&(s.width=r[2]),a[0]&8&&(s.height=r[3]),a[0]&64&&(s.toggle=r[6]),a[0]&32768&&(s.backgroundExists=r[15]),a[0]&16&&(s.minimap=r[4]),a[0]&16384&&(s.graph=r[14]),a[0]&128&&(s.fitView=r[7]),a[0]&2&&(s.theme=r[1]),a[0]&32&&(s.controls=r[5]),a[0]&256&&(s.selectionColor=r[8]),a[0]&512&&(s.disableSelection=r[9]),a[0]&2048&&(s.trackpadPan=r[11]),a[0]&4096&&(s.modifier=r[12]),a[0]&8192&&(s.title=r[13]),a[0]&536871937&&(s.$$scope={dirty:a,ctx:r}),e.$set(s)},i(r){i||(B(e.$$.fragment,r),i=!0)},o(r){W(e.$$.fragment,r),i=!1},d(r){It(e,r)}}}function na(n){let e,i;return e=new kh({props:{mermaid:n[0],mermaidConfig:n[10]}}),{c(){Dt(e.$$.fragment)},m(r,a){Ot(e,r,a),i=!0},p(r,a){const s={};a[0]&1&&(s.mermaid=r[0]),a[0]&1024&&(s.mermaidConfig=r[10]),e.$set(s)},i(r){i||(B(e.$$.fragment,r),i=!0)},o(r){W(e.$$.fragment,r),i=!1},d(r){It(e,r)}}}function Hc(n){let e,i,r=n[0].length&&na(n);const a=n[27].default,s=Ze(a,n,n[29],null);return{c(){r&&r.c(),e=Ct(),s&&s.c()},m(l,h){r&&r.m(l,h),tt(l,e,h),s&&s.m(l,h),i=!0},p(l,h){l[0].length?r?(r.p(l,h),h[0]&1&&B(r,1)):(r=na(l),r.c(),B(r,1),r.m(e.parentNode,e)):r&&(re(),W(r,1,1,()=>{r=null}),ae()),s&&s.p&&(!i||h[0]&536870912)&&Re(s,a,l,l[29],i?Be(a,l[29],h,null):He(l[29]),null)},i(l){i||(B(r),B(s,l),i=!0)},o(l){W(r),W(s,l),i=!1},d(l){r&&r.d(l),l&&Q(e),s&&s.d(l)}}}function Gc(n){let e;const i=n[27].minimap,r=Ze(i,n,n[29],$r);return{c(){r&&r.c()},m(a,s){r&&r.m(a,s),e=!0},p(a,s){r&&r.p&&(!e||s[0]&536870912)&&Re(r,i,a,a[29],e?Be(i,a[29],s,Ic):He(a[29]),$r)},i(a){e||(B(r,a),e=!0)},o(a){W(r,a),e=!1},d(a){r&&r.d(a)}}}function Fc(n){let e;const i=n[27].controls,r=Ze(i,n,n[29],ta);return{c(){r&&r.c()},m(a,s){r&&r.m(a,s),e=!0},p(a,s){r&&r.p&&(!e||s[0]&536870912)&&Re(r,i,a,a[29],e?Be(i,a[29],s,Nc):He(a[29]),ta)},i(a){e||(B(r,a),e=!0)},o(a){W(r,a),e=!1},d(a){r&&r.d(a)}}}function Wc(n){let e;const i=n[27].background,r=Ze(i,n,n[29],ea);return{c(){r&&r.c()},m(a,s){r&&r.m(a,s),e=!0},p(a,s){r&&r.p&&(!e||s[0]&536870912)&&Re(r,i,a,a[29],e?Be(i,a[29],s,Dc):He(a[29]),ea)},i(a){e||(B(r,a),e=!0)},o(a){W(r,a),e=!1},d(a){r&&r.d(a)}}}function Uc(n){let e;const i=n[27].toggle,r=Ze(i,n,n[29],ia);return{c(){r&&r.c()},m(a,s){r&&r.m(a,s),e=!0},p(a,s){r&&r.p&&(!e||s[0]&536870912)&&Re(r,i,a,a[29],e?Be(i,a[29],s,Zc):He(a[29]),ia)},i(a){e||(B(r,a),e=!0)},o(a){W(r,a),e=!1},d(a){r&&r.d(a)}}}function jc(n){let e,i,r,a;const s=[Rc,Bc],l=[];function h(c,d){return c[14]?0:1}return e=h(n),i=l[e]=s[e](n),{c(){i.c(),r=Pe()},m(c,d){l[e].m(c,d),tt(c,r,d),a=!0},p(c,d){let _=e;e=h(c),e===_?l[e].p(c,d):(re(),W(l[_],1,1,()=>{l[_]=null}),ae(),i=l[e],i?i.p(c,d):(i=l[e]=s[e](c),i.c()),B(i,1),i.m(r.parentNode,r))},i(c){a||(B(i),a=!0)},o(c){W(i),a=!1},d(c){l[e].d(c),c&&Q(r)}}}function qc(n,e,i){let r,{$$slots:a={},$$scope:s}=e;const l=as(a);let{mermaid:h=""}=e,{theme:c="light"}=e,{id:d=0}=e,{snapTo:_=0}=e,{zoom:p=1}=e,{TD:v=!1}=e,{editable:g=!1}=e,{locked:b=!1}=e,{width:w=0}=e,{height:k=0}=e,{minimap:M=!1}=e,{controls:O=!1}=e,{toggle:I=!1}=e,{fitView:Z=!1}=e,{selectionColor:D="lightblue"}=e,{edgeStyle:H="bezier"}=e,{edge:G=null}=e,{disableSelection:X=!1}=e,{mermaidConfig:Y={}}=e,{translation:ht={x:0,y:0}}=e,{trackpadPan:nt=!1}=e,{modifier:A="meta"}=e,{raiseEdgesOnSelect:ot=!1}=e,{edgesAboveNode:E=!1}=e,{title:at=""}=e,F,Zt=v?"TD":"LR";$t("snapTo",_),$t("edgeStyle",H),$t("graphEdge",G),$t("raiseEdgesOnSelect",ot),$t("edgesAboveNode",E),bi(()=>{const K=localStorage.getItem("state");if(K)i(14,F=Zu(K)),Wo.add(F,F.id);else{let et=`G-${d||Wo.count()+1}`;i(14,F=Aa(et,{zoom:p,direction:Zt,editable:g,locked:b,translation:ht})),Wo.add(F,et)}});function lt(K){be.call(this,n,K)}return n.$$set=K=>{"mermaid"in K&&i(0,h=K.mermaid),"theme"in K&&i(1,c=K.theme),"id"in K&&i(16,d=K.id),"snapTo"in K&&i(17,_=K.snapTo),"zoom"in K&&i(18,p=K.zoom),"TD"in K&&i(19,v=K.TD),"editable"in K&&i(20,g=K.editable),"locked"in K&&i(21,b=K.locked),"width"in K&&i(2,w=K.width),"height"in K&&i(3,k=K.height),"minimap"in K&&i(4,M=K.minimap),"controls"in K&&i(5,O=K.controls),"toggle"in K&&i(6,I=K.toggle),"fitView"in K&&i(7,Z=K.fitView),"selectionColor"in K&&i(8,D=K.selectionColor),"edgeStyle"in K&&i(22,H=K.edgeStyle),"edge"in K&&i(23,G=K.edge),"disableSelection"in K&&i(9,X=K.disableSelection),"mermaidConfig"in K&&i(10,Y=K.mermaidConfig),"translation"in K&&i(24,ht=K.translation),"trackpadPan"in K&&i(11,nt=K.trackpadPan),"modifier"in K&&i(12,A=K.modifier),"raiseEdgesOnSelect"in K&&i(25,ot=K.raiseEdgesOnSelect),"edgesAboveNode"in K&&i(26,E=K.edgesAboveNode),"title"in K&&i(13,at=K.title),"$$scope"in K&&i(29,s=K.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&278528&&F&&F.transforms.scale.set(p)},i(15,r=l.background),[h,c,w,k,M,O,I,Z,D,X,Y,nt,A,at,F,r,d,_,p,v,g,b,H,G,ht,ot,E,a,lt,s]}class Vc extends ue{constructor(e){super(),le(this,e,qc,jc,ne,{mermaid:0,theme:1,id:16,snapTo:17,zoom:18,TD:19,editable:20,locked:21,width:2,height:3,minimap:4,controls:5,toggle:6,fitView:7,selectionColor:8,edgeStyle:22,edge:23,disableSelection:9,mermaidConfig:10,translation:24,trackpadPan:11,modifier:12,raiseEdgesOnSelect:25,edgesAboveNode:26,title:13},null,[-1,-1])}}function oa(n,e,i){const r=n.slice();return r[12]=e[i],r}function sa(n,e,i){const r=n.slice();return r[15]=e[i],r}function ra(n){let e,i=n[15].text+"",r,a;return{c(){e=dt("option"),r=vi(i),a=Ct(),e.__value=n[15],e.value=e.__value},m(s,l){tt(s,e,l),rt(e,r),rt(e,a)},p:pt,d(s){s&&Q(e)}}}function Kc(n){let e,i,r,a=n[12].label+"",s,l,h,c,d,_,p,v,g,b,w,k,M,O,I,Z,D,H,G,X,Y,ht=n[3],nt=[];for(let A=0;A<ht.length;A+=1)nt[A]=ra(sa(n,ht,A));return I=new Ba({props:{width:!0,height:!0,rotation:!0}}),D=new mn({props:{direction:"west",dynamic:!0}}),G=new mn({props:{direction:"west",dynamic:!0}}),{c(){e=dt("div"),i=dt("section"),r=dt("h2"),s=vi(a),l=Ct(),h=dt("input"),d=Ct(),_=dt("select");for(let A=0;A<nt.length;A+=1)nt[A].c();v=Ct(),g=dt("input"),w=Ct(),k=dt("input"),O=Ct(),Dt(I.$$.fragment),Z=Ct(),Dt(D.$$.fragment),H=Ct(),Dt(G.$$.fragment),X=Ct(),S(h,"class","text-white my-1"),h.value=c=n[12].notes,S(h,"placeholder","Enter notes"),S(_,"class","text-white my-1"),S(_,"placeholder","Select a category"),S(g,"class","text-white my-1"),g.value=b=n[12].notes,S(g,"placeholder","Charts to display"),S(k,"class","text-white my-1"),k.value=M=n[12].notes,S(k,"placeholder","Geospatial morphing/effects"),S(i,"class","container mx-3 my-3"),S(e,"class","node svelte-1wrk81x")},m(A,ot){tt(A,e,ot),rt(e,i),rt(i,r),rt(r,s),rt(i,l),rt(i,h),rt(i,d),rt(i,_);for(let E=0;E<nt.length;E+=1)nt[E]&&nt[E].m(_,null);tr(_,n[12].category),rt(i,v),rt(i,g),rt(i,w),rt(i,k),rt(i,O),Ot(I,i,null),rt(e,Z),Ot(D,e,null),rt(e,H),Ot(G,e,null),tt(A,X,ot),Y=!0},p(A,ot){if((!Y||ot&2)&&a!==(a=A[12].label+"")&&Vi(s,a),(!Y||ot&10&&c!==(c=A[12].notes)&&h.value!==c)&&(h.value=c),ot&8){ht=A[3];let E;for(E=0;E<ht.length;E+=1){const at=sa(A,ht,E);nt[E]?nt[E].p(at,ot):(nt[E]=ra(at),nt[E].c(),nt[E].m(_,null))}for(;E<nt.length;E+=1)nt[E].d(1);nt.length=ht.length}(!Y||ot&10&&p!==(p=A[12].category))&&tr(_,A[12].category),(!Y||ot&10&&b!==(b=A[12].notes)&&g.value!==b)&&(g.value=b),(!Y||ot&10&&M!==(M=A[12].notes)&&k.value!==M)&&(k.value=M)},i(A){Y||(B(I.$$.fragment,A),B(D.$$.fragment,A),B(G.$$.fragment,A),Y=!0)},o(A){W(I.$$.fragment,A),W(D.$$.fragment,A),W(G.$$.fragment,A),Y=!1},d(A){A&&Q(e),fn(nt,A),It(I),It(D),It(G),A&&Q(X)}}}function aa(n){let e,i;const r=[n[12]];let a={$$slots:{default:[Kc]},$$scope:{ctx:n}};for(let s=0;s<r.length;s+=1)a=fo(a,r[s]);return e=new hs({props:a}),e.$on("nodeClicked",n[4]),{c(){Dt(e.$$.fragment)},m(s,l){Ot(e,s,l),i=!0},p(s,l){const h=l&2?ls(r,[us(s[12])]):{};l&262146&&(h.$$scope={dirty:l,ctx:s}),e.$set(h)},i(s){i||(B(e.$$.fragment,s),i=!0)},o(s){W(e.$$.fragment,s),i=!1},d(s){It(e,s)}}}function Xc(n){let e,i,r=n[1],a=[];for(let l=0;l<r.length;l+=1)a[l]=aa(oa(n,r,l));const s=l=>W(a[l],1,1,()=>{a[l]=null});return{c(){for(let l=0;l<a.length;l+=1)a[l].c();e=Pe()},m(l,h){for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(l,h);tt(l,e,h),i=!0},p(l,h){if(h&26){r=l[1];let c;for(c=0;c<r.length;c+=1){const d=oa(l,r,c);a[c]?(a[c].p(d,h),B(a[c],1)):(a[c]=aa(d),a[c].c(),B(a[c],1),a[c].m(e.parentNode,e))}for(re(),c=r.length;c<a.length;c+=1)s(c);ae()}},i(l){if(!i){for(let h=0;h<r.length;h+=1)B(a[h]);i=!0}},o(l){a=a.filter(Boolean);for(let h=0;h<a.length;h+=1)W(a[h]);i=!1},d(l){fn(a,l),l&&Q(e)}}}function Yc(n){let e,i;return e=new Ra({props:{bgColor:"#faebd7",slot:"background"}}),{c(){Dt(e.$$.fragment)},m(r,a){Ot(e,r,a),i=!0},p:pt,i(r){i||(B(e.$$.fragment,r),i=!0)},o(r){W(e.$$.fragment,r),i=!1},d(r){It(e,r)}}}function Jc(n){let e,i,r,a,s;return{c(){e=dt("button"),e.textContent="Highlight all events",i=Ct(),r=dt("button"),r.textContent="Clear all events",S(e,"class","bg-slate-700 svelte-1wrk81x"),S(r,"class","bg-slate-700 svelte-1wrk81x")},m(l,h){tt(l,e,h),tt(l,i,h),tt(l,r,h),a||(s=[Et(e,"click",n[8]),Et(r,"click",n[9])],a=!0)},p:pt,d(l){l&&Q(e),l&&Q(i),l&&Q(r),a=!1,Ie(s)}}}function Qc(n){let e;return{c(){e=dt("p"),e.textContent='No events selected. Please open an event and click, "Add to list"'},m(i,r){tt(i,e,r)},p:pt,d(i){i&&Q(e)}}}function $c(n){let e,i,r,a;i=new Vc({props:{height:n[0],editable:!0,$$slots:{background:[Yc],default:[Xc]},$$scope:{ctx:n}}});function s(c,d){return c[1].length<1?Qc:Jc}let l=s(n),h=l(n);return{c(){e=dt("div"),Dt(i.$$.fragment),r=Ct(),h.c(),S(e,"id","events-in-focus")},m(c,d){tt(c,e,d),Ot(i,e,null),rt(e,r),h.m(e,null),a=!0},p(c,[d]){const _={};d&1&&(_.height=c[0]),d&262146&&(_.$$scope={dirty:d,ctx:c}),i.$set(_),l===(l=s(c))&&h?h.p(c,d):(h.d(1),h=l(c),h&&(h.c(),h.m(e,null)))},i(c){a||(B(i.$$.fragment,c),a=!0)},o(c){W(i.$$.fragment,c),a=!1},d(c){c&&Q(e),It(i),h.d()}}}function tf(n,e,i){let r;V(n,lo,g=>i(7,r=g));let a=new L.FeatureGroup,{height:s}=e,l=[],h,c=[{text:"Category 1",value:"1"},{text:"Category 2",value:"2"},{text:"Category 3",value:"3"}];bi(()=>{for(let g=0;g<r.length;g++){let b=r[g];l.push({label:b.title,width:220,height:100,notes:"",feature:b})}i(1,l),i(7,r),i(6,h)});function d(g){let b=g.feature;a.clearLayers(),console.log("Zooming to feature"),a.addLayer(new L.CircleMarker(b.geometry.coordinates.reverse(),{radius:30,color:"#ff7800",weight:5,opacity:.65})),ji.flyTo(b.geometry.coordinates,4),a.addTo(ji)}function _(g){a.clearLayers(),console.log("Zooming to feature"),r.forEach(b=>{a.addLayer(new L.CircleMarker(b.feature.geometry.coordinates.reverse(),{radius:30,color:"#ff7800",weight:5,opacity:.9}))}),a.addTo(ji)}const p=()=>_(),v=()=>{lo.set([]),a.clearLayers(),i(1,l=[])};return n.$$set=g=>{"height"in g&&i(0,s=g.height)},n.$$.update=()=>{n.$$.dirty&194&&r.length>0&&(i(6,h=r[r.length-1]),l.push({label:h.title,width:220,height:200,notes:"",feature:h.feature}),i(1,l),i(7,r),i(6,h))},[s,l,a,c,d,_,h,r,p,v]}class ef extends ue{constructor(e){super(),le(this,e,tf,$c,ne,{height:0})}}var la={},nf={get exports(){return la},set exports(n){la=n}};(function(n){(function(e){n.exports=e(ro)})(function(e){return e.Control.Search=e.Control.extend({includes:e.version[0]==="1"?e.Evented.prototype:e.Mixin.Events,options:{url:"",layer:null,sourceData:null,jsonpParam:null,propertyLoc:"loc",propertyName:"title",formatData:null,filterData:null,moveToLocation:null,buildTip:null,container:"",zoom:null,minLength:1,initial:!0,casesensitive:!1,autoType:!0,delayType:400,tooltipLimit:-1,tipAutoSubmit:!0,firstTipSubmit:!1,autoResize:!0,collapsed:!0,autoCollapse:!1,autoCollapseTime:1200,textErr:"Location not found",textCancel:"Cancel",textPlaceholder:"Search...",hideMarkerOnCollapse:!1,position:"topleft",marker:{icon:!1,animate:!0,circle:{radius:10,weight:3,color:"#e03",stroke:!0,fill:!1}}},_getPath:function(i,r){const a=r.split("."),s=a.pop(),l=a.length;let h=a[0],c=1;if(l>0)for(;(i=i[h])&&c<l;)h=a[c++];if(i)return i[s]},_isObject:function(i){return Object.prototype.toString.call(i)==="[object Object]"},initialize:function(i){e.Util.setOptions(this,i||{}),this._inputMinSize=this.options.textPlaceholder?this.options.textPlaceholder.length:10,this._layer=this.options.layer||new e.LayerGroup,this._filterData=this.options.filterData||this._defaultFilterData,this._formatData=this.options.formatData||this._defaultFormatData,this._moveToLocation=this.options.moveToLocation||this._defaultMoveToLocation,this._autoTypeTmp=this.options.autoType,this._countertips=0,this._recordsCache={},this._curReq=null},onAdd:function(i){return this._map=i,this._container=e.DomUtil.create("div","leaflet-control-search"),this._input=this._createInput(this.options.textPlaceholder,"search-input"),this._tooltip=this._createTooltip("search-tooltip"),this._cancel=this._createCancel(this.options.textCancel,"search-cancel"),this._button=this._createButton(this.options.textPlaceholder,"search-button"),this._alert=this._createAlert("search-alert"),this.options.collapsed===!1&&this.expand(this.options.collapsed),this.options.marker&&(this.options.marker instanceof e.Marker||this.options.marker instanceof e.CircleMarker?this._markerSearch=this.options.marker:this._isObject(this.options.marker)&&(this._markerSearch=new e.Control.Search.Marker([0,0],this.options.marker)),this._markerSearch._isMarkerSearch=!0),this.setLayer(this._layer),i.on({resize:this._handleAutoresize},this),this._container},addTo:function(i){return this.options.container?(this._container=this.onAdd(i),this._wrapper=e.DomUtil.get(this.options.container),this._wrapper.style.position="relative",this._wrapper.appendChild(this._container)):e.Control.prototype.addTo.call(this,i),this},onRemove:function(i){this._recordsCache={},i.off({resize:this._handleAutoresize},this)},setLayer:function(i){return this._layer=i,this._layer.addTo(this._map),this},showAlert:function(i){const r=this;return i=i||this.options.textErr,this._alert.style.display="block",this._alert.innerHTML=i,clearTimeout(this.timerAlert),this.timerAlert=setTimeout(function(){r.hideAlert()},this.options.autoCollapseTime),this},hideAlert:function(){return this._alert.style.display="none",this},cancel:function(){return this._input.value="",this._handleKeypress({keyCode:8}),this._input.size=this._inputMinSize,this._input.focus(),this._cancel.style.display="none",this._hideTooltip(),this.fire("search:cancel"),this},expand:function(i){return i=typeof i=="boolean"?i:!0,this._input.style.display="block",e.DomUtil.addClass(this._container,"search-exp"),i!==!1&&(this._input.focus(),this._map.on("dragstart click",this.collapse,this)),this.fire("search:expanded"),this},collapse:function(){return this._hideTooltip(),this.cancel(),this._alert.style.display="none",this._input.blur(),this.options.collapsed&&(this._input.style.display="none",this._cancel.style.display="none",e.DomUtil.removeClass(this._container,"search-exp"),this.options.hideMarkerOnCollapse&&this._map.removeLayer(this._markerSearch),this._map.off("dragstart click",this.collapse,this)),this.fire("search:collapsed"),this},collapseDelayed:function(){const i=this;return this.options.autoCollapse?(clearTimeout(this.timerCollapse),this.timerCollapse=setTimeout(function(){i.collapse()},this.options.autoCollapseTime),this):this},collapseDelayedStop:function(){return clearTimeout(this.timerCollapse),this},_createAlert:function(i){const r=e.DomUtil.create("div",i,this._container);return r.style.display="none",e.DomEvent.on(r,"click",e.DomEvent.stop,this).on(r,"click",this.hideAlert,this),r},_createInput:function(i,r){const a=this,s=e.DomUtil.create("label",r,this._container),l=e.DomUtil.create("input",r,this._container);return l.type="text",l.size=this._inputMinSize,l.value="",l.autocomplete="off",l.autocorrect="off",l.autocapitalize="off",l.placeholder=i,l.style.display="none",l.role="search",l.id=l.role+l.type+l.size,s.htmlFor=l.id,s.style.display="none",s.value=i,e.DomEvent.disableClickPropagation(l).on(l,"keyup",this._handleKeypress,this).on(l,"paste",function(h){setTimeout(function(c){a._handleKeypress(c)},10,h)},this).on(l,"blur",this.collapseDelayed,this).on(l,"focus",this.collapseDelayedStop,this),l},_createCancel:function(i,r){const a=e.DomUtil.create("a",r,this._container);return a.href="#",a.title=i,a.style.display="none",a.innerHTML="<span>&otimes;</span>",e.DomEvent.on(a,"click",e.DomEvent.stop,this).on(a,"click",this.cancel,this),a},_createButton:function(i,r){const a=e.DomUtil.create("a",r,this._container);return a.href="#",a.title=i,e.DomEvent.on(a,"click",e.DomEvent.stop,this).on(a,"click",this._handleSubmit,this).on(a,"focus",this.collapseDelayedStop,this).on(a,"blur",this.collapseDelayed,this),a},_createTooltip:function(i){const r=this,a=e.DomUtil.create("ul",i,this._container);return a.style.display="none",e.DomEvent.disableClickPropagation(a).on(a,"blur",this.collapseDelayed,this).on(a,"wheel",function(s){r.collapseDelayedStop(),e.DomEvent.stopPropagation(s)},this).on(a,"mouseover",function(s){r.collapseDelayedStop()},this),a},_createTip:function(i,r){let a;if(this.options.buildTip){if(a=this.options.buildTip.call(this,i,r),typeof a=="string"){const s=e.DomUtil.create("div");s.innerHTML=a,a=s.firstChild}}else a=e.DomUtil.create("li",""),a.innerHTML=i;return e.DomUtil.addClass(a,"search-tip"),a._text=i,this.options.tipAutoSubmit&&e.DomEvent.disableClickPropagation(a).on(a,"click",e.DomEvent.stop,this).on(a,"click",function(s){this._input.value=i,this._handleAutoresize(),this._input.focus(),this._hideTooltip(),this._handleSubmit()},this),a},_getUrl:function(i){return typeof this.options.url=="function"?this.options.url(i):this.options.url},_defaultFilterData:function(i,r){const a={};if(i=i.replace(new RegExp("[.*+?^${}()|[]\\]","g"),""),i==="")return[];const s=this.options.initial?"^":"",l=this.options.casesensitive?void 0:"i",h=new RegExp(s+i,l);for(const c in r)h.test(c)&&(a[c]=r[c]);return a},showTooltip:function(i){if(this._countertips=0,this._tooltip.innerHTML="",this._tooltip.currentSelection=-1,this.options.tooltipLimit)for(const r in i){if(this._countertips===this.options.tooltipLimit)break;this._countertips++,this._tooltip.appendChild(this._createTip(r,i[r]))}return this._countertips>0?(this._tooltip.style.display="block",this._autoTypeTmp&&this._autoType(),this._autoTypeTmp=this.options.autoType):this._hideTooltip(),this._tooltip.scrollTop=0,this._countertips},_hideTooltip:function(){return this._tooltip.style.display="none",this._tooltip.innerHTML="",0},_defaultFormatData:function(i){const r=this,a=this.options.propertyName,s=this.options.propertyLoc,l={};if(e.Util.isArray(s))for(const h in i)l[r._getPath(i[h],a)]=e.latLng(r._getPath(i[h],s[0]),r._getPath(i[h],s[1]));else for(const h in i)l[r._getPath(i[h],a)]=e.latLng(r._getPath(i[h],s));return l},_recordsFromJsonp:function(i,r){e.Control.Search.callJsonp=r;const a=e.DomUtil.create("script","leaflet-search-jsonp",document.getElementsByTagName("body")[0]),s=e.Util.template(this._getUrl(i)+"&"+this.options.jsonpParam+"=L.Control.Search.callJsonp",{s:i});return a.type="text/javascript",a.src=s,{abort:function(){a.parentNode.removeChild(a)}}},_recordsFromAjax:function(i,r){let a;try{a=new window.XMLHttpRequest}catch{throw new Error("XMLHttpRequest is not supported")}const s=e.Util.template(this._getUrl(i),{s:i});return a.open("GET",s),a.onload=function(){r(JSON.parse(a.responseText))},a.onreadystatechange=function(){a.readyState===4&&a.status===200&&this.onload()},a.send(),a},_searchInLayer:function(i,r,a){const s=this;let l;i instanceof e.Control.Search.Marker||(i instanceof e.Marker||i instanceof e.CircleMarker?s._getPath(i.options,a)?(l=i.getLatLng(),l.layer=i,r[s._getPath(i.options,a)]=l):s._getPath(i.feature.properties,a)&&(l=i.getLatLng(),l.layer=i,r[s._getPath(i.feature.properties,a)]=l):i instanceof e.Path||i instanceof e.Polyline||i instanceof e.Polygon?s._getPath(i.options,a)?(l=i.getBounds().getCenter(),l.layer=i,r[s._getPath(i.options,a)]=l):s._getPath(i.feature.properties,a)&&(l=i.getBounds().getCenter(),l.layer=i,r[s._getPath(i.feature.properties,a)]=l):Object.prototype.hasOwnProperty.call(i,"feature")?Object.prototype.hasOwnProperty.call(i.feature.properties,a)&&(i.getLatLng&&typeof i.getLatLng=="function"?(l=i.getLatLng(),l.layer=i,r[i.feature.properties[a]]=l):i.getBounds&&typeof i.getBounds=="function"&&(l=i.getBounds().getCenter(),l.layer=i,r[i.feature.properties[a]]=l)):i instanceof e.LayerGroup&&i.eachLayer(function(h){s._searchInLayer(h,r,a)}))},_recordsFromLayer:function(){const i=this,r={},a=this.options.propertyName;return this._layer.eachLayer(function(s){i._searchInLayer(s,r,a)}),r},_autoType:function(){const i=this._input.value.length,r=this._tooltip.firstChild?this._tooltip.firstChild._text:"",a=r.length;if(r.indexOf(this._input.value)===0)if(this._input.value=r,this._handleAutoresize(),this._input.createTextRange){const s=this._input.createTextRange();s.collapse(!0),s.moveStart("character",i),s.moveEnd("character",a),s.select()}else this._input.setSelectionRange?this._input.setSelectionRange(i,a):this._input.selectionStart&&(this._input.selectionStart=i,this._input.selectionEnd=a)},_hideAutoType:function(){let i;if((i=this._input.selection)&&i.empty)i.empty();else if(this._input.createTextRange){i=this._input.createTextRange(),i.collapse(!0);const r=this._input.value.length;i.moveStart("character",r),i.moveEnd("character",r),i.select()}else this._input.getSelection&&this._input.getSelection().removeAllRanges(),this._input.selectionStart=this._input.selectionEnd},_handleKeypress:function(i){const r=this;switch(i.keyCode){case 27:this.collapse();break;case 13:(this._countertips===1||this.options.firstTipSubmit&&this._countertips>0)&&this._tooltip.currentSelection===-1&&this._handleArrowSelect(1),this._handleSubmit();break;case 38:this._handleArrowSelect(-1);break;case 40:this._handleArrowSelect(1);break;case 45:case 46:this._autoTypeTmp=!1;break;case 37:case 39:case 16:case 17:case 35:case 36:break;default:this._input.value.length?this._cancel.style.display="block":this._cancel.style.display="none",this._input.value.length>=this.options.minLength?(clearTimeout(this.timerKeypress),this.timerKeypress=setTimeout(function(){r._fillRecordsCache()},this.options.delayType)):this._hideTooltip()}this._handleAutoresize()},searchText:function(i){const r=i.charCodeAt(i.length);this._input.value=i,this._input.style.display="block",e.DomUtil.addClass(this._container,"search-exp"),this._autoTypeTmp=!1,this._handleKeypress({keyCode:r})},_fillRecordsCache:function(){const i=this,r=this._input.value;let a;this._curReq&&this._curReq.abort&&this._curReq.abort(),e.DomUtil.addClass(this._container,"search-load"),this.options.layer?(this._recordsCache=this._recordsFromLayer(),a=this._filterData(this._input.value,this._recordsCache),this.showTooltip(a),e.DomUtil.removeClass(this._container,"search-load")):(this.options.sourceData?this._retrieveData=this.options.sourceData:this.options.url&&(this._retrieveData=this.options.jsonpParam?this._recordsFromJsonp:this._recordsFromAjax),this._curReq=this._retrieveData(this,r,function(s){i._recordsCache=i._formatData(i,s),i.options.sourceData?a=i._filterData(i._input.value,i._recordsCache):a=i._recordsCache,i.showTooltip(a),e.DomUtil.removeClass(i._container,"search-load")}))},_handleAutoresize:function(){let i;this._input.style.maxWidth!==this._map._container.offsetWidth&&(i=this._map._container.clientWidth,i-=10+20+1+30+22,this._input.style.maxWidth=i.toString()+"px"),this.options.autoResize&&this._container.offsetWidth+20<this._map._container.offsetWidth&&(this._input.size=this._input.value.length<this._inputMinSize?this._inputMinSize:this._input.value.length)},_handleArrowSelect:function(i){const r=this._tooltip.hasChildNodes()?this._tooltip.childNodes:[];for(let a=0;a<r.length;a++)e.DomUtil.removeClass(r[a],"search-tip-select");if(i===1&&this._tooltip.currentSelection>=r.length-1)e.DomUtil.addClass(r[this._tooltip.currentSelection],"search-tip-select");else if(i===-1&&this._tooltip.currentSelection<=0)this._tooltip.currentSelection=-1;else if(this._tooltip.style.display!=="none"){this._tooltip.currentSelection+=i,e.DomUtil.addClass(r[this._tooltip.currentSelection],"search-tip-select"),this._input.value=r[this._tooltip.currentSelection]._text;const a=r[this._tooltip.currentSelection].offsetTop;a+r[this._tooltip.currentSelection].clientHeight>=this._tooltip.scrollTop+this._tooltip.clientHeight?this._tooltip.scrollTop=a-this._tooltip.clientHeight+r[this._tooltip.currentSelection].clientHeight:a<=this._tooltip.scrollTop&&(this._tooltip.scrollTop=a)}},_handleSubmit:function(){if(this._hideAutoType(),this.hideAlert(),this._hideTooltip(),this._input.style.display==="none")this.expand();else if(this._input.value==="")this.collapse();else{const i=this._getLocation(this._input.value);i?(this.showLocation(i,this._input.value),this.fire("search:locationfound",{latlng:i,text:this._input.value,layer:i.layer?i.layer:null})):this.showAlert()}},_getLocation:function(i){return Object.prototype.hasOwnProperty.call(this._recordsCache,i)?this._recordsCache[i]:!1},_defaultMoveToLocation:function(i,r,a){this.options.zoom?this._map.setView(i,this.options.zoom):this._map.panTo(i)},showLocation:function(i,r){const a=this;return a._map.once("moveend zoomend",function(s){a._markerSearch&&a._markerSearch.addTo(a._map).setLatLng(i)}),a._moveToLocation(i,r,a._map),a.options.autoCollapse&&a.collapse(),a}}),e.Control.Search.Marker=e.Marker.extend({includes:e.version[0]==="1"?e.Evented.prototype:e.Mixin.Events,options:{icon:new e.Icon.Default,animate:!0,circle:{radius:10,weight:3,color:"#e03",stroke:!0,fill:!1}},initialize:function(i,r){e.setOptions(this,r),r.icon===!0&&(r.icon=new e.Icon.Default),e.Marker.prototype.initialize.call(this,i,r),e.Control.Search.prototype._isObject(this.options.circle)&&(this._circleLoc=new e.CircleMarker(i,this.options.circle))},onAdd:function(i){e.Marker.prototype.onAdd.call(this,i),this._circleLoc&&(i.addLayer(this._circleLoc),this.options.animate&&this.animate())},onRemove:function(i){e.Marker.prototype.onRemove.call(this,i),this._circleLoc&&i.removeLayer(this._circleLoc)},setLatLng:function(i){return e.Marker.prototype.setLatLng.call(this,i),this._circleLoc&&this._circleLoc.setLatLng(i),this},_initIcon:function(){this.options.icon&&e.Marker.prototype._initIcon.call(this)},_removeIcon:function(){this.options.icon&&e.Marker.prototype._removeIcon.call(this)},animate:function(){if(this._circleLoc){const i=this._circleLoc,r=200,a=5;let s=parseInt(i._radius/a);const l=this.options.circle.radius;let h=i._radius*2,c=0;i._timerAnimLoc=setInterval(function(){c+=.5,s+=c,h-=s,i.setRadius(h),h<l&&(clearInterval(i._timerAnimLoc),i.setRadius(l))},r)}return this}}),e.Map.addInitHook(function(){this.options.searchControl&&(this.searchControl=e.control.search(this.options.searchControl),this.addControl(this.searchControl))}),e.control.search=function(i){return new e.Control.Search(i)},e.Control.Search})})(nf);function of(n){let e,i,r,a,s;return{c(){e=dt("input"),i=Ct(),r=dt("button"),r.textContent="Search",S(e,"type","text"),S(e,"id","search-input"),S(e,"class","rounded-md text-white p-1 w-40 bg-slate-700"),S(e,"placeholder","Search for an event"),S(r,"class","rounded-md p-1 mt-2 bg-slate-700"),S(r,"id","search-button")},m(l,h){tt(l,e,h),no(e,n[1]),tt(l,i,h),tt(l,r,h),a||(s=[Et(e,"input",n[2]),Et(r,"click",n[3])],a=!0)},p(l,[h]){h&2&&e.value!==l[1]&&no(e,l[1])},i:pt,o:pt,d(l){l&&Q(e),l&&Q(i),l&&Q(r),a=!1,Ie(s)}}}function sf(n,e,i){let r,a=L.featureGroup();function s(){a.clearLayers(),ts.eachLayer(c=>{c.feature.properties.excerpt.toLowerCase().includes(r.toLowerCase())&&a.addLayer(new L.CircleMarker(c.getLatLng(),{radius:30,color:"#ff7800",weight:5,opacity:.65}))}),a.getLayers().length>0?a.addTo(ji):alert("No results found.")}function l(){r=this.value,i(1,r)}return[s,r,l,()=>s()]}class rf extends ue{constructor(e){super(),le(this,e,sf,of,ne,{searchLayer:0})}get searchLayer(){return this.$$.ctx[0]}}function cs(){}function Ha(n){return n()}function ua(){return Object.create(null)}function In(n){n.forEach(Ha)}function fs(n){return typeof n=="function"}function af(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function ha(n,e,i,r){if(n){const a=Ga(n,e,i,r);return n[0](a)}}function Ga(n,e,i,r){return n[1]&&r?function(a,s){for(const l in s)a[l]=s[l];return a}(i.ctx.slice(),n[1](r(e))):i.ctx}function ca(n,e,i,r,a,s,l){const h=function(c,d,_,p){if(c[2]&&p){const v=c[2](p(_));if(d.dirty===void 0)return v;if(typeof v=="object"){const g=[],b=Math.max(d.dirty.length,v.length);for(let w=0;w<b;w+=1)g[w]=d.dirty[w]|v[w];return g}return d.dirty|v}return d.dirty}(e,r,a,s);if(h){const c=Ga(e,i,r,l);n.p(c,h)}}function lf(n){return n&&fs(n.destroy)?n.destroy:cs}function Ko(n,e){n.appendChild(e)}function uf(n,e,i){n.insertBefore(e,i||null)}function Fa(n){n.parentNode.removeChild(n)}function Xo(n){return document.createElement(n)}function hf(){return n=" ",document.createTextNode(n);var n}function cf(n,e,i,r){return n.addEventListener(e,i,r),()=>n.removeEventListener(e,i,r)}function xn(n,e,i){i==null?n.removeAttribute(e):n.getAttribute(e)!==i&&n.setAttribute(e,i)}function fa(n,e,i){n.classList[i?"add":"remove"](e)}let ho;function co(n){ho=n}function ff(){if(!ho)throw new Error("Function called outside component initialization");return ho}function df(){const n=ff();return(e,i)=>{const r=n.$$.callbacks[e];if(r){const a=function(s,l){const h=document.createEvent("CustomEvent");return h.initCustomEvent(s,!1,!1,l),h}(e,i);r.slice().forEach(s=>{s.call(n,a)})}}}const En=[],da=[],eo=[],_a=[],_f=Promise.resolve();let os=!1;function ss(n){eo.push(n)}let Yo=!1;const Jo=new Set;function Wa(){if(!Yo){Yo=!0;do{for(let n=0;n<En.length;n+=1){const e=En[n];co(e),mf(e.$$)}for(co(null),En.length=0;da.length;)da.pop()();for(let n=0;n<eo.length;n+=1){const e=eo[n];Jo.has(e)||(Jo.add(e),e())}eo.length=0}while(En.length);for(;_a.length;)_a.pop()();os=!1,Yo=!1,Jo.clear()}}function mf(n){if(n.fragment!==null){n.update(),In(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(ss)}}const io=new Set;function rs(n,e){n&&n.i&&(io.delete(n),n.i(e))}function ma(n,e,i,r){if(n&&n.o){if(io.has(n))return;io.add(n),(void 0).c.push(()=>{io.delete(n),r&&(i&&n.d(1),r())}),n.o(e)}}function pf(n,e){n.$$.dirty[0]===-1&&(En.push(n),os||(os=!0,_f.then(Wa)),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function gf(n,e,i,r,a,s,l=[-1]){const h=ho;co(n);const c=n.$$={fragment:null,ctx:null,props:s,update:cs,not_equal:a,bound:ua(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:e.context||[]),callbacks:ua(),dirty:l,skip_bound:!1};let d=!1;if(c.ctx=i?i(n,e.props||{},(_,p,...v)=>{const g=v.length?v[0]:p;return c.ctx&&a(c.ctx[_],c.ctx[_]=g)&&(!c.skip_bound&&c.bound[_]&&c.bound[_](g),d&&pf(n,_)),p}):[],c.update(),d=!0,In(c.before_update),c.fragment=!!r&&r(c.ctx),e.target){if(e.hydrate){const _=function(p){return Array.from(p.childNodes)}(e.target);c.fragment&&c.fragment.l(_),_.forEach(Fa)}else c.fragment&&c.fragment.c();e.intro&&rs(n.$$.fragment),function(_,p,v,g){const{fragment:b,on_mount:w,on_destroy:k,after_update:M}=_.$$;b&&b.m(p,v),g||ss(()=>{const O=w.map(Ha).filter(fs);k?k.push(...O):In(O),_.$$.on_mount=[]}),M.forEach(ss)}(n,e.target,e.anchor,e.customElement),Wa()}co(h)}class yf{$destroy(){(function(e,i){const r=e.$$;r.fragment!==null&&(In(r.on_destroy),r.fragment&&r.fragment.d(i),r.on_destroy=r.fragment=null,r.ctx=[])})(this,1),this.$destroy=cs}$on(e,i){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(i),()=>{const a=r.indexOf(i);a!==-1&&r.splice(a,1)}}$set(e){var i;this.$$set&&(i=e,Object.keys(i).length!==0)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function vf(n,e){e=Object.assign({open:!0,duration:.2,easing:"ease"},e);const i=()=>{};let r=i,a=i;const s=n.addEventListener("transitionend",()=>{r(),r=i,a=i});async function l(){return new Promise(requestAnimationFrame)}function h(){return`height ${e.duration}s ${e.easing}`}async function c(){n.style.height=n.scrollHeight+"px";try{await async function(){return new Promise((d,_)=>{r=d,a=_})}(),n.style.height="auto"}catch{}}return n.style.overflow="hidden",n.style.transition=h(),n.style.height=e.open?"auto":"0px",{update:function(d){(e=Object.assign(e,d)).open?c():async function(){n.style.height==="auto"?(n.style.transition="none",await l(),n.style.height=n.scrollHeight+"px",n.style.transition=h(),await l(),n.style.height="0px"):(a(),n.style.height="0px")}()},destroy:function(){n.removeEventListener("transitionend",s)}}}const bf=n=>({}),pa=n=>({}),wf=n=>({}),ga=n=>({});function Lf(n){let e,i,r,a,s,l,h,c;const d=n[5].header,_=ha(d,n,n[4],ga),p=n[5].body,v=ha(p,n,n[4],pa);return{c(){e=Xo("div"),i=Xo("div"),_&&_.c(),r=hf(),a=Xo("div"),v&&v.c(),xn(i,"class","card-header svelte-yon7im"),xn(a,"class","card-body"),xn(e,"class","card"),xn(e,"aria-expanded",n[0]),fa(e,"open",n[0])},m(g,b){uf(g,e,b),Ko(e,i),_&&_.m(i,null),Ko(e,r),Ko(e,a),v&&v.m(a,null),l=!0,h||(c=[cf(i,"click",n[3]),lf(s=vf.call(null,a,{open:n[0],duration:n[1],easing:n[2]}))],h=!0)},p(g,[b]){_&&_.p&&(!l||16&b)&&ca(_,d,g,g[4],b,wf,ga),v&&v.p&&(!l||16&b)&&ca(v,p,g,g[4],b,bf,pa),s&&fs(s.update)&&7&b&&s.update.call(null,{open:g[0],duration:g[1],easing:g[2]}),(!l||1&b)&&xn(e,"aria-expanded",g[0]),1&b&&fa(e,"open",g[0])},i(g){l||(rs(_,g),rs(v,g),l=!0)},o(g){ma(_,g),ma(v,g),l=!1},d(g){g&&Fa(e),_&&_.d(g),v&&v.d(g),h=!1,In(c)}}}function Cf(n,e,i){let{$$slots:r={},$$scope:a}=e,{open:s=!0}=e,{duration:l=.2}=e,{easing:h="ease"}=e;const c=df();return n.$$set=d=>{"open"in d&&i(0,s=d.open),"duration"in d&&i(1,l=d.duration),"easing"in d&&i(2,h=d.easing),"$$scope"in d&&i(4,a=d.$$scope)},[s,l,h,function(){i(0,s=!s),c(s?"open":"close")},a,r]}class Pf extends yf{constructor(e){super(),gf(this,e,Cf,Lf,af,{open:0,duration:1,easing:2})}}function kf(n){let e;return{c(){e=dt("h2"),e.textContent="Events in focus ",S(e,"class","font-semibold text-xl "),S(e,"slot","header")},m(i,r){tt(i,e,r)},p:pt,d(i){i&&Q(e)}}}function Mf(n){let e,i,r;return i=new ef({props:{height:n[2]}}),{c(){e=dt("div"),Dt(i.$$.fragment),S(e,"slot","body")},m(a,s){tt(a,e,s),Ot(i,e,null),r=!0},p(a,s){const l={};s&4&&(l.height=a[2]),i.$set(l)},i(a){r||(B(i.$$.fragment,a),r=!0)},o(a){W(i.$$.fragment,a),r=!1},d(a){a&&Q(e),It(i)}}}function Sf(n){let e,i,r,a,s,l,h,c,d,_,p,v,g,b;return _n(n[3]),i=new tu({}),c=new rf({}),p=new Pf({props:{$$slots:{body:[Mf],header:[kf]},$$scope:{ctx:n}}}),{c(){e=dt("main"),Dt(i.$$.fragment),r=Ct(),a=dt("div"),s=dt("div"),s.innerHTML=`<h1 class="font-bold text-3xl ">Explorer for Hindutva Watch</h1> 
      <h3>This is a prototype to explore linked stories of Hindutva</h3>`,l=Ct(),h=dt("div"),Dt(c.$$.fragment),d=Ct(),_=dt("div"),Dt(p.$$.fragment),S(s,"id","meta-info"),S(s,"class","m-3 svelte-4w7jep"),S(h,"id","search"),S(h,"class","m-2"),S(a,"id","left-bar"),S(a,"class","p-4 svelte-4w7jep"),S(_,"id","right-bar"),S(_,"class","p-4 svelte-4w7jep")},m(w,k){tt(w,e,k),Ot(i,e,null),rt(e,r),rt(e,a),rt(a,s),rt(a,l),rt(a,h),Ot(c,h,null),rt(e,d),rt(e,_),Ot(p,_,null),v=!0,g||(b=Et(window,"resize",n[3]),g=!0)},p(w,[k]){const M={};k&20&&(M.$$scope={dirty:k,ctx:w}),p.$set(M)},i(w){v||(B(i.$$.fragment,w),B(c.$$.fragment,w),B(p.$$.fragment,w),v=!0)},o(w){W(i.$$.fragment,w),W(c.$$.fragment,w),W(p.$$.fragment,w),v=!1},d(w){w&&Q(e),It(i),It(c),It(p),g=!1,b()}}}function xf(n,e,i){let r,a,s;function l(){i(1,r=window.innerWidth),i(0,a=window.innerHeight)}return n.$$.update=()=>{n.$$.dirty&1&&i(2,s=a/1.4)},[a,r,s,l]}class Tf extends ue{constructor(e){super(),le(this,e,xf,Sf,ne,{})}}new Tf({target:document.getElementById("app")});export{ls as A,us as B,It as C,oo as D,vi as E,ti as F,Vi as G,Ie as H,Ze as I,Re as J,He as K,Be as L,lr as M,ft as N,Au as O,ue as S,S as a,J as b,tt as c,Q as d,dt as e,V as f,se as g,Ct as h,le as i,rt as j,re as k,Et as l,ae as m,pt as n,bi as o,B as p,W as q,Gt as r,ne as s,Nt as t,so as u,po as v,Pe as w,fo as x,Dt as y,Ot as z};
