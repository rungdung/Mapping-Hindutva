import{S as $,i as ee,s as oe,e as F,a as q,t as E,b as h,c as L,l as Ae,n as A,d as G,f as k,o as Pe,g as V,h as pe,j as Q,k as Z,u as we,m as x,p as R,q as O,r as Te,v as je,w as v,x as De,y as Ee,z as ze,A as Le,B as Ge,C as qe,D as ye}from"./index-ee55deb5.js";function Oe(o){let e,t=`${o[13]}px`,n=`${o[15]}px`,s=`${o[16]}px`,i=`rotate(${o[10]}deg)`,d=`${o[11].y-o[3]}px`,u=`${o[11].x-o[4]}px`,_,p;return{c(){e=F("button"),q(e,"class","minimap-node svelte-1hs9omb"),E(e,"hidden",o[1]),E(e,"hideable",o[6]),h(e,"z-index",o[12]),h(e,"border-radius",t),h(e,"--prop-background-color",o[5]||o[14]||!o[8]&&o[7]||null),h(e,"width",n),h(e,"height",s),h(e,"transform",i),h(e,"top",d),h(e,"left",u)},m(m,a){L(m,e,a),_||(p=Ae(e,"click",o[25]),_=!0)},p(m,[a]){a&2&&E(e,"hidden",m[1]),a&64&&E(e,"hideable",m[6]),a&4096&&h(e,"z-index",m[12]),a&8192&&t!==(t=`${m[13]}px`)&&h(e,"border-radius",t),a&16800&&h(e,"--prop-background-color",m[5]||m[14]||!m[8]&&m[7]||null),a&32768&&n!==(n=`${m[15]}px`)&&h(e,"width",n),a&65536&&s!==(s=`${m[16]}px`)&&h(e,"height",s),a&1024&&i!==(i=`rotate(${m[10]}deg)`)&&h(e,"transform",i),a&2056&&d!==(d=`${m[11].y-m[3]}px`)&&h(e,"top",d),a&2064&&u!==(u=`${m[11].x-m[4]}px`)&&h(e,"left",u)},i:A,o:A,d(m){m&&G(e),_=!1,p()}}}function Xe(o,e,t){let n,s,i,d,u,_,p,m=A,a=()=>(m(),m=V(i,g=>t(12,p=g)),i),C,N,W,y;o.$$.on_destroy.push(()=>m());let{node:w}=e,{hidden:H=!1}=e,{toggleHidden:S}=e,{top:b}=e,{left:r}=e,{nodeColor:l=null}=e,{hideable:c}=e;const{position:B,dimensions:M,bgColor:P,borderRadius:T,rotation:j}=w;k(o,B,g=>t(24,_=g)),k(o,P,g=>t(14,N=g)),k(o,T,g=>t(13,C=g)),k(o,j,g=>t(23,u=g));const{width:I,height:X}=M;k(o,I,g=>t(15,W=g)),k(o,X,g=>t(16,y=g));let D=null;Pe(()=>{var z;const g=(z=document.querySelector(`#${w.id}`))==null?void 0:z.firstChild;g&&t(7,D=window.getComputedStyle(g).backgroundColor)});const J=()=>{c&&S(w)};return o.$$set=g=>{"node"in g&&t(0,w=g.node),"hidden"in g&&t(1,H=g.hidden),"toggleHidden"in g&&t(2,S=g.toggleHidden),"top"in g&&t(3,b=g.top),"left"in g&&t(4,r=g.left),"nodeColor"in g&&t(5,l=g.nodeColor),"hideable"in g&&t(6,c=g.hideable)},o.$$.update=()=>{o.$$.dirty&16777216&&t(11,n=_),o.$$.dirty&8388608&&t(10,s=u),o.$$.dirty&1&&a(t(9,i=w.zIndex)),o.$$.dirty&128&&t(8,d=D==="rgba(0, 0, 0, 0)")},[w,H,S,b,r,l,c,D,d,i,s,n,p,C,N,W,y,B,P,T,j,I,X,u,_,J]}class Ye extends ${constructor(e){super(),ee(this,e,Xe,Oe,oe,{node:0,hidden:1,toggleHidden:2,top:3,left:4,nodeColor:5,hideable:6})}}function Fe(o){let e,t;return{c(){e=F("div"),q(e,"class","mini-bounding-box svelte-aoq4g"),q(e,"id",t=`mini-${o[2]}-bounding-box`),h(e,"border","solid 4px "+o[8]),h(e,"top",`${o[5].y-o[3]}px`),h(e,"left",`${o[5].x-o[4]}px`),h(e,"width",`${o[6]}px`),h(e,"height",`${o[7]}px`),h(e,"background-color",o[8])},m(n,s){L(n,e,s)},p(n,[s]){s&4&&t!==(t=`mini-${n[2]}-bounding-box`)&&q(e,"id",t),s&256&&h(e,"border","solid 4px "+n[8]);const i=s&256;(i||s&296)&&h(e,"top",`${n[5].y-n[3]}px`),(i||s&304)&&h(e,"left",`${n[5].x-n[4]}px`),(i||s&320)&&h(e,"width",`${n[6]}px`),(i||s&384)&&h(e,"height",`${n[7]}px`),i&&h(e,"background-color",n[8])},i:A,o:A,d(n){n&&G(e)}}}function Je(o,e,t){let n,s=A,i=()=>(s(),s=V(C,b=>t(5,n=b)),C),d,u,_,p=A,m=()=>(p(),p=V(N,b=>t(8,_=b)),N);o.$$.on_destroy.push(()=>s()),o.$$.on_destroy.push(()=>p());let{dimensions:a}=e,{position:C}=e;i();let{color:N}=e;m();let{groupName:W}=e,{top:y}=e,{left:w}=e;const{width:H,height:S}=a;return k(o,H,b=>t(6,d=b)),k(o,S,b=>t(7,u=b)),o.$$set=b=>{"dimensions"in b&&t(11,a=b.dimensions),"position"in b&&i(t(0,C=b.position)),"color"in b&&m(t(1,N=b.color)),"groupName"in b&&t(2,W=b.groupName),"top"in b&&t(3,y=b.top),"left"in b&&t(4,w=b.left)},[C,N,W,y,w,n,d,u,_,H,S,a]}class Ke extends ${constructor(e){super(),ee(this,e,Je,Fe,oe,{dimensions:11,position:0,color:1,groupName:2,top:3,left:4})}}function ke(o,e,t){const n=o.slice();return n[54]=e[t][0],n[55]=e[t][1],n}function Ce(o,e,t){const n=o.slice();return n[54]=e[t][0],n[58]=e[t][1],n}function Ne(o){let e,t;return e=new Ye({props:{node:o[58],top:o[11],left:o[10],nodeColor:o[3],hidden:o[13].has(o[58]),toggleHidden:o[27],hideable:o[6]}}),{c(){Ee(e.$$.fragment)},m(n,s){ze(e,n,s),t=!0},p(n,s){const i={};s[0]&16384&&(i.node=n[58]),s[0]&2048&&(i.top=n[11]),s[0]&1024&&(i.left=n[10]),s[0]&8&&(i.nodeColor=n[3]),s[0]&24576&&(i.hidden=n[13].has(n[58])),s[0]&64&&(i.hideable=n[6]),e.$set(i)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){qe(e,n)}}}function Se(o,e){let t,n,s,i=e[58].id!=="N-editor"&&Ne(e);return{key:o,first:null,c(){t=v(),i&&i.c(),n=v(),this.first=t},m(d,u){L(d,t,u),i&&i.m(d,u),L(d,n,u),s=!0},p(d,u){e=d,e[58].id!=="N-editor"?i?(i.p(e,u),u[0]&16384&&R(i,1)):(i=Ne(e),i.c(),R(i,1),i.m(n.parentNode,n)):i&&(Z(),O(i,1,1,()=>{i=null}),x())},i(d){s||(R(i),s=!0)},o(d){O(i),s=!1},d(d){d&&G(t),i&&i.d(d),d&&G(n)}}}function We(o,e){let t,n,s;const i=[e[55],{top:e[11]},{left:e[10]},{groupName:e[54]}];let d={};for(let u=0;u<i.length;u+=1)d=De(d,i[u]);return n=new Ke({props:d}),{key:o,first:null,c(){t=v(),Ee(n.$$.fragment),this.first=t},m(u,_){L(u,t,_),ze(n,u,_),s=!0},p(u,_){e=u;const p=_[0]&35840?Le(i,[_[0]&32768&&Ge(e[55]),_[0]&2048&&{top:e[11]},_[0]&1024&&{left:e[10]},_[0]&32768&&{groupName:e[54]}]):{};n.$set(p)},i(u){s||(R(n.$$.fragment,u),s=!0)},o(u){O(n.$$.fragment,u),s=!1},d(u){u&&G(t),qe(n,u)}}}function Qe(o){let e,t,n=[],s=new Map,i,d=[],u=new Map,_=`${o[9]}px`,p=`${o[8]}px`,m=`scale(${o[7]})`,a,C,N=`${o[0]}px`,W=`${o[1]?o[1]:o[0]}px`,y,w=Array.from(o[14].entries());const H=r=>r[54];for(let r=0;r<w.length;r+=1){let l=Ce(o,w,r),c=H(l);s.set(c,n[r]=Se(c,l))}let S=Array.from(o[15].entries());const b=r=>r[54];for(let r=0;r<S.length;r+=1){let l=ke(o,S,r),c=b(l);u.set(c,d[r]=We(c,l))}return{c(){e=F("div"),t=F("div");for(let r=0;r<n.length;r+=1)n[r].c();i=pe();for(let r=0;r<d.length;r+=1)d[r].c();a=pe(),C=F("div"),q(t,"class","node-wrapper svelte-1qxvbux"),h(t,"width",_),h(t,"height",p),h(t,"transform",m),q(C,"class","overlay svelte-1qxvbux"),q(C,"style",o[12]),q(e,"class","minimap-wrapper svelte-1qxvbux"),E(e,"SW",o[5]==="SW"),E(e,"NE",o[5]==="NE"),E(e,"SE",o[5]==="SE"),E(e,"NW",o[5]==="NW"),h(e,"width",N),h(e,"height",W),h(e,"--prop-minimap-border-color",o[4]),h(e,"--prop-minimap-background-color",o[2])},m(r,l){L(r,e,l),Q(e,t);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(t,null);Q(t,i);for(let c=0;c<d.length;c+=1)d[c]&&d[c].m(t,null);Q(e,a),Q(e,C),y=!0},p(r,l){l[0]&134245448&&(w=Array.from(r[14].entries()),Z(),n=we(n,l,H,1,r,w,s,t,ye,Se,i,Ce),x()),l[0]&35840&&(S=Array.from(r[15].entries()),Z(),d=we(d,l,b,1,r,S,u,t,ye,We,null,ke),x()),l[0]&512&&_!==(_=`${r[9]}px`)&&h(t,"width",_),l[0]&256&&p!==(p=`${r[8]}px`)&&h(t,"height",p),l[0]&128&&m!==(m=`scale(${r[7]})`)&&h(t,"transform",m),(!y||l[0]&4096)&&q(C,"style",r[12]),(!y||l[0]&32)&&E(e,"SW",r[5]==="SW"),(!y||l[0]&32)&&E(e,"NE",r[5]==="NE"),(!y||l[0]&32)&&E(e,"SE",r[5]==="SE"),(!y||l[0]&32)&&E(e,"NW",r[5]==="NW"),l[0]&1&&N!==(N=`${r[0]}px`)&&h(e,"width",N),l[0]&3&&W!==(W=`${r[1]?r[1]:r[0]}px`)&&h(e,"height",W),l[0]&16&&h(e,"--prop-minimap-border-color",r[4]),l[0]&4&&h(e,"--prop-minimap-background-color",r[2])},i(r){if(!y){for(let l=0;l<w.length;l+=1)R(n[l]);for(let l=0;l<S.length;l+=1)R(d[l]);y=!0}},o(r){for(let l=0;l<n.length;l+=1)O(n[l]);for(let l=0;l<d.length;l+=1)O(d[l]);y=!1},d(r){r&&G(e);for(let l=0;l<n.length;l+=1)n[l].d();for(let l=0;l<d.length;l+=1)d[l].d()}}}const He=.9;function Ue(o,e,t){let n,s,i,d,u,_,p,m,a,C,N,W,y,w,H,S,b,r,l,c,B,M,P,T,j,I,X,D,J,g=Te("graph"),{width:z=100}=e,{height:Y=z}=e,{mapColor:te=null}=e,{nodeColor:ne=null}=e,{borderColor:ie=null}=e,{corner:le="SE"}=e,{hideable:re=!1}=e;const Be=z*He,Me=Y*He,K=g.bounds,se=K.top;k(o,se,f=>t(11,B=f));const de=K.left;k(o,de,f=>t(10,c=f));const he=K.bottom;k(o,he,f=>t(44,T=f));const ue=K.right;k(o,ue,f=>t(45,j=f));const fe=g.nodes;k(o,fe,f=>t(14,D=f));const ge=g.groups;k(o,ge,f=>t(47,X=f));const me=g.transforms,be=g.dimensions;k(o,be,f=>t(46,I=f));const U=X.hidden.nodes;k(o,U,f=>t(13,l=f));const _e=me.scale;k(o,_e,f=>t(42,M=f));const ae=me.translation;k(o,ae,f=>t(43,P=f));const ce=g.groupBoxes;k(o,ce,f=>t(15,J=f));const Ie={clientX:0,clientY:0};function Re(f){l.has(f)?l.delete(f):l.add(f),U.set(l)}return o.$$set=f=>{"width"in f&&t(0,z=f.width),"height"in f&&t(1,Y=f.height),"mapColor"in f&&t(2,te=f.mapColor),"nodeColor"in f&&t(3,ne=f.nodeColor),"borderColor"in f&&t(4,ie=f.borderColor),"corner"in f&&t(5,le=f.corner),"hideable"in f&&t(6,re=f.hideable)},o.$$.update=()=>{o.$$.dirty[1]&32768&&t(41,n=I.width),o.$$.dirty[1]&32768&&t(40,s=I.height),o.$$.dirty[0]&1024|o.$$.dirty[1]&16384&&t(9,i=j-c),o.$$.dirty[0]&2048|o.$$.dirty[1]&8192&&t(8,d=T-B),o.$$.dirty[0]&768&&t(34,u=i/d),o.$$.dirty[0]&3&&t(33,_=z/Y),o.$$.dirty[1]&7680&&t(39,p=je(Ie,0,0,n,s,M,P)),o.$$.dirty[0]&512|o.$$.dirty[1]&3072&&t(36,m=n/i/M),o.$$.dirty[0]&256|o.$$.dirty[1]&2560&&t(35,a=s/d/M),o.$$.dirty[0]&2304|o.$$.dirty[1]&256&&t(38,C=(p.y-B)/d),o.$$.dirty[0]&1536|o.$$.dirty[1]&256&&t(37,N=(p.x-c)/i),o.$$.dirty[1]&12&&t(32,y=u>=_),o.$$.dirty[0]&768|o.$$.dirty[1]&2&&t(7,w=y?Be/i:Me/d),o.$$.dirty[0]&384&&t(28,r=d*w),o.$$.dirty[0]&268435458&&t(30,S=(Y-r)/2),o.$$.dirty[0]&640&&t(29,b=i*w),o.$$.dirty[0]&536870913&&t(31,H=(z-b)/2),o.$$.dirty[0]&1879048192|o.$$.dirty[1]&241&&t(12,W=`
		top: ${S+C*r}px;
		left: ${H+N*b}px;
		width: ${m*b}px;
		height: ${a*r}px;`)},[z,Y,te,ne,ie,le,re,w,d,i,c,B,W,l,D,J,se,de,he,ue,fe,ge,be,U,_e,ae,ce,Re,r,b,S,H,y,_,u,a,m,N,C,p,s,n,M,P,T,j,I]}class Ze extends ${constructor(e){super(),ee(this,e,Ue,Qe,oe,{width:0,height:1,mapColor:2,nodeColor:3,borderColor:4,corner:5,hideable:6},null,[-1,-1])}}export{Ze as default};
